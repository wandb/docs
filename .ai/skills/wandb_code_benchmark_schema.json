{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://wandb.ai/schemas/code-benchmark-v1.json",
  "title": "W&B Code Generation Evaluation Benchmark",
  "description": "Schema for W&B SDK code generation evaluation datasets",
  "type": "object",
  "properties": {
    "metadata": {
      "type": "object",
      "properties": {
        "version": {
          "type": "string",
          "pattern": "^\\d+\\.\\d+\\.\\d+$",
          "description": "Semantic version of the benchmark dataset"
        },
        "created_date": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 timestamp of dataset creation"
        },
        "last_updated": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 timestamp of last update"
        },
        "description": {
          "type": "string",
          "description": "Overall description of the benchmark"
        },
        "sdk_version": {
          "type": "string",
          "description": "Target W&B SDK version compatibility (e.g., '>=0.18.0')"
        },
        "num_examples": {
          "type": "integer",
          "minimum": 0,
          "description": "Total number of examples in the dataset"
        }
      },
      "required": [
        "version",
        "created_date",
        "description"
      ],
      "additionalProperties": false
    },
    "examples": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "pattern": "^[a-z0-9_]+$",
            "description": "Unique identifier (lowercase with underscores)"
          },
          "category": {
            "type": "string",
            "enum": [
              "runs",
              "artifacts",
              "registry",
              "logging",
              "experiments",
              "tables",
              "sweeps",
              "models",
              "other"
            ],
            "description": "Category of W&B functionality"
          },
          "difficulty": {
            "type": "string",
            "enum": [
              "basic",
              "intermediate",
              "advanced"
            ],
            "description": "Complexity level of the task"
          },
          "prompt": {
            "type": "string",
            "minLength": 10,
            "description": "Natural language description of what code should be generated"
          },
          "reference_code": {
            "type": "string",
            "minLength": 10,
            "description": "The canonical/correct implementation"
          },
          "key_concepts": {
            "type": "array",
            "items": {
              "type": "string",
              "minLength": 1
            },
            "minItems": 1,
            "description": "List of W&B concepts demonstrated"
          },
          "common_mistakes": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "mistake": {
                  "type": "string",
                  "minLength": 5,
                  "description": "Description of common error"
                },
                "bad_code": {
                  "type": "string",
                  "description": "Example of incorrect code"
                }
              },
              "required": [
                "mistake"
              ],
              "additionalProperties": false
            },
            "description": "Common errors to watch for"
          },
          "placeholders": {
            "type": "object",
            "patternProperties": {
              "^<[^>]+>$": {
                "type": "string",
                "description": "Description of what this placeholder represents"
              }
            },
            "additionalProperties": false,
            "description": "Mapping of placeholder names to descriptions"
          },
          "source_file": {
            "type": "string",
            "pattern": "^[a-z0-9_]+\\.py$",
            "description": "Original source file name"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Additional tags for filtering/searching"
          }
        },
        "required": [
          "id",
          "category",
          "difficulty",
          "prompt",
          "reference_code",
          "key_concepts"
        ],
        "additionalProperties": false
      }
    }
  },
  "required": [
    "metadata",
    "examples"
  ],
  "additionalProperties": false
}
