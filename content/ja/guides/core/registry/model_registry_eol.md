---
title: レガシーなモデルレジストリからの移行
menu:
  default:
    identifier: model_registry_eol
    parent: registry
weight: 9
---

W&B は、旧 **モデルレジストリ** から強化された **W&B Registry** への移行を進めています。この移行はシームレスに行われ、すべて W&B によって管理されます。移行プロセスでは、これまでのワークフローが維持されるだけでなく、強力な新機能が利用可能になります。ご質問やサポートが必要な場合は、[support@wandb.com](mailto:support@wandb.com) までご連絡ください。

## 移行の理由

W&B Registry では旧モデルレジストリに比べて大幅な改善が行われています。

- **組織レベルでの統一された体験**：チームを問わず、組織内で厳選した Artifacts を共有・管理できます。
- **ガバナンスの強化**：アクセス制御や制限付きレジストリ、公開範囲設定によって、ユーザーのアクセス管理が可能になります。
- **機能強化**：カスタムレジストリや高度な検索、監査ログ、オートメーション対応など、最新の ML インフラストラクチャーに役立つ機能が追加されています。

以下の表は、旧モデルレジストリと新しい W&B Registry の主な違いをまとめたものです。

| 機能 | 旧 W&B モデルレジストリ | W&B Registry |
| ----- | ----- | ----- |
| Artifact 公開範囲 | チームレベルのみ（チームメンバーに制限） | 組織レベルの公開範囲と詳細な権限制御 |
| カスタムレジストリ | 非対応 | 完全対応 ― どの artifact タイプでもカスタムレジストリ作成可能 |
| アクセス制御 | 非対応 | レジストリ単位のロールベース（Admin, Member, Viewer） |
| 用語 |「Registered models」：モデル バージョンへのポインタ | 「Collections」：任意の artifact バージョンへのポインタ |
| レジストリの対象範囲 | モデルのバージョン管理のみ対応  | モデル・データセット・カスタム artifact など対応範囲が拡大 |
| オートメーション | レジストリ単位のオートメーション | レジストリ・コレクション単位ともにサポート（移行時コピー） |
| 検索・探索性 | 検索・探索性に制限あり | 組織全体のすべてのレジストリで一括検索 |
| API 互換性 | `wandb.init.link_model()`など MR 固有パターン | 最新 SDK API（`link_artifact()`, `use_artifact()`）で自動リダイレクト |
| 移行 | サービス終了 | 自動で移行・拡張 ― データはコピーされ削除されません |

## 移行準備

- **対応は不要**：移行は完全自動化されており、W&B が管理します。スクリプト実行や設定変更、データの手動移動は不要です。
- **情報を確認**：移行予定日の２週間前に、W&B アプリ UI のバナーでお知らせします。
- **権限を確認**：移行完了後、管理者はチームの運用に沿ったレジストリアクセスを確認してください。
- **以降は新しいパスを利用**：既存のコードはそのまま動きますが、新しいプロジェクトでは W&B Registry パスの利用を推奨します。

## 移行プロセス

### 一時的な書き込み操作の停止

移行作業中、チームのモデルレジストリへの書き込み操作は最大１時間まで一時停止となります。新たに作成された移行後の W&B Registry も同様に、一時的に書き込みが停止されます。

### データ移行

W&B は旧モデルレジストリから新しい W&B Registry へ以下のデータを移行します。

- Collections
- 紐づく artifact バージョン
- バージョン履歴
- エイリアス、タグ、説明
- オートメーション（コレクション・レジストリの両方）
- パーミッション（サービスアカウントのロール・保護付きエイリアス含む）

W&B アプリの UI 上では、旧モデルレジストリが新しい W&B Registry に置き換えられます。移行されたレジストリ名はチーム名の後ろに `mr-migrated` が付きます。

```text
<team-name>-mr-migrated
```

これらレジストリはデフォルトで **制限付き（Restricted）** 公開範囲となり、既存のプライバシー区分が守られます。元の `<team-name>` のメンバーだけが該当レジストリへアクセスできます。

## 移行完了後

移行完了後は次のようになります。

- 旧モデルレジストリは**閲覧専用**となります。データの参照やアクセスは可能ですが、新しい書き込みはできなくなります。
- 旧モデルレジストリのデータは**新しい W&B Registry へコピー**されます。データの削除や移動は発生しません。
- 新しい W&B Registry からすべてのデータにアクセスできます。
- バージョン管理やガバナンス、監査ログ、オートメーション等は新しい Registry UI でご利用ください。
- 既存のコードもそのまま利用可能です。
   - [既存のパスや API コールは自動的に新しい W&B Registry へリダイレクトされます。]({{< relref "#code-will-continue-to-work" >}})
   - [Artifact バージョンのパスも自動的にリダイレクトされます。]({{< relref "#legacy-paths-will-redirect-to-new-wb-registry-paths" >}})
- 旧モデルレジストリは UI 上で一定期間引き続き表示されますが、最終的には非表示となります。
- Registry で利用可能な拡張機能もご確認ください。
    - [組織レベルのアクセス管理]({{< relref "/guides/core/registry/create_registry/#visibility-types" >}})
    - [ロールベースのアクセス制御]({{< relref "/guides/core/registry/configure_registry/" >}})
    - [レジストリ単位のリネージ追跡]({{< relref "/guides/core/registry/lineage/" >}})
    - [オートメーション]({{< relref "/guides/core/automations/" >}})

### 既存のコードは引き続き動作します

旧モデルレジストリを参照する既存の API コールは自動的に新しい W&B Registry へリダイレクトされます。次のような API コールは変更不要で引き続き動作します。

- `wandb.Api().artifact()`
- `wandb.run.use_artifact()`
- `wandb.run.link_artifact()`
- `wandb.Artifact().link()`

### 旧パスは新しい W&B Registry パスへリダイレクトされます

W&B は旧モデルレジストリのパスを自動的に新しい W&B Registry フォーマットへリダイレクトします。これにより、すぐにパスを書き換えなくても既存のコードを使い続けられます。ただし自動リダイレクトは、移行前に旧モデルレジストリで作成されていた Collection のみに適用されます。

例えば：

- 旧モデルレジストリに `"my-model"` という collection が既に存在していれば、link アクションは成功します
- 旧モデルレジストリに `"my-model"` が無ければ、リダイレクトされずエラーになります

```python
# "my-model" が旧モデルレジストリに存在していた場合はリダイレクトされます
run.link_artifact(artifact, "team-name/model-registry/my-model")

# "new-model" が旧モデルレジストリに存在していなかった場合は失敗します
run.link_artifact(artifact, "team-name/model-registry/new-model")
```

旧モデルレジストリからバージョンを取得するには、チーム名、`"model-registry"` 文字列、コレクション名、バージョンを組み合わせたパスを使用していました。

```python
f"{team-name}/model-registry/{collection-name}:{version}"
```

W&B はこれらのパスを自動的に新しい W&B Registry フォーマットにリダイレクトします。新しい形式では、組織名、`"wandb-registry"` 文字列、チーム名、コレクション名、バージョンが含まれます。

```python
# 新しいパスにリダイレクトされます
f"{org-name}/wandb-registry-{team-name}/{collection-name}:{version}"
```

{{% alert title="Python SDK 警告について" %}}

コード内で旧モデルレジストリのパスを使い続けている場合、警告メッセージが表示されることがあります。この警告はコードを中断しませんが、新しい W&B Registry フォーマットにパスを更新することを推奨するものです。

警告が表示されるかどうかは、お使いの W&B Python SDK のバージョンによって異なります。

* 最新の W&B SDK（`v0.21.0` 以上）を利用している場合、リダイレクトが発生したことを示す警告がログに表示されます。
* それ以前のバージョンでは、リダイレクトは静かに動作し、警告は表示されません。一部のメタデータ（entity や project 名など）は旧形式が参照されることがあります。

{{% /alert %}}

## よくあるご質問

### 移行時期はどのようにして分かりますか？

事前にアプリ内バナーや W&B から直接お知らせがあります。

### ダウンタイムはありますか？

移行作業中、旧モデルレジストリと新しい W&B Registry への書き込み操作は約１時間ほど一時的に停止します。他の W&B サービスへの影響はありません。

### コードが動かなくなることはありますか？

いいえ。旧モデルレジストリのパスや Python SDK の呼び出しはすべて自動的に新しい Registry へリダイレクトされます。

### データが削除されることはありますか？

いいえ。データは新しい W&B Registry へコピーされます。旧モデルレジストリは閲覧専用になり、後に非表示となりますが、データが削除・消失することはありません。

### 古い SDK を使っていますが大丈夫ですか？

リダイレクトは引き続き動作しますが、警告は表示されません。できるだけ最新バージョンの W&B SDK へアップグレードすることを推奨します。

### 移行したレジストリ名の変更や編集はできますか？

はい、移行したレジストリの名前変更やメンバーの追加・削除なども可能です。これらのレジストリは実質カスタムレジストリであり、移行後もリダイレクト機能は維持されます。

## ご質問・ご相談

サポートや移行についてのご相談は [support@wandb.com](mailto:support@wandb.com) までお気軽にご連絡ください。W&B は新しい W&B Registry へのスムーズな移行をサポートいたします。