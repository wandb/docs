# Lychee link checker configuration
# See https://lychee.cli.rs/guides/config/ for full documentation

# Base URL for resolving relative links
# This will be overridden at runtime by the workflows
base_url = 'https://docs.wandb.ai'

# Don't check heading anchors (fragments) - Mintlify generates these dynamically
include_fragments = false

# Suppress progress bars in CI for cleaner logs
no_progress = true

# Exclude private/internal network links
exclude_all_private = true

# Retry configuration for handling transient failures
max_retries = 5
retry_wait_time = 2

# Accept these HTTP status codes as valid
# 200 = OK
# 429 = Too Many Requests (rate limit - treat as success)
accept = [200, 429]

# Only check HTTP/HTTPS URLs
scheme = [
  "http",
  "https",
]

# Only check URLs matching these patterns (required when checking URL lists)
include = [
  '^https?://',  # Match all http:// and https:// URLs
]

# Logging verbosity
verbose = "error"

# URL patterns to exclude from checking
# Images - Mintlify rewrites paths during build
# Example URLs used in generated docs
# Social media URLs
# Third party URLs that timeout or rate-limit
# W&B production URLs (checked separately)
exclude = [
  '\.(png|jpg|jpeg|gif|svg|webp|ico)$',
  'https://kubeflow.mysite.com',
  'my-fake-url\.com',
  'my\.domain\.net',
  'https://wiki.python.org/moin/UsingPickle',
  'discord\.com',
  'https?://x\.com',
  'auth0\.com/docs',
  'https://cognito-idp.us-east-1.amazonaws.com',
  'netapp\.com',
  'portal\.azure\.com',
  'hhs\.gov',
  '^https://([^/]+\.)?github\.com/wandb',
  '^https://(api|app|deploy|docs|www)\.wandb\.(ai|com)',
  '^https://wandb\.(ai|com)',
]

# File/directory paths to exclude from checking
exclude_path = [
  # Exclude non-documentation directories
  ".github",
  "node_modules",
  "scripts",
]
