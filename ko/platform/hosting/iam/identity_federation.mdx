---
title: SDK에서 페더레이션 ID 사용하기
---

W&amp;B SDK를 통해 조직의 자격 증명을 사용해 페더레이션 ID로 로그인할 수 있습니다. W&amp;B 조직 관리자가 조직에 대해 SSO를 구성했다면, 이미 W&amp;B 앱 UI에 로그인할 때 조직 자격 증명을 사용하고 있을 것입니다. 이런 의미에서 ID 페더레이션은 W&amp;B SDK를 위한 SSO와 유사하지만, JSON Web Token(JWT)을 직접 사용한다는 점이 다릅니다. API 키의 대안으로 ID 페더레이션을 사용할 수 있습니다.

[RFC 7523](https://datatracker.ietf.org/doc/html/rfc7523)는 SDK에서 ID 페더레이션을 사용하는 데 기반이 되는 표준입니다.

<Note>
  ID 페더레이션은 모든 플랫폼 유형(SaaS Cloud, Dedicated Cloud, Self-Managed 인스턴스)의 `Enterprise` 플랜에서 `Preview`로 제공됩니다. 궁금한 점이 있으면 W&amp;B 담당 팀에 문의하세요.
</Note>

<Note>
  이 문서에서는 `identity provider`와 `JWT issuer`라는 용어를 혼용하여 사용합니다. 이 기능의 문맥에서는 둘 다 동일한 대상을 가리킵니다.
</Note>

<div id="jwt-issuer-setup">
  ## JWT 발급자 설정
</div>

첫 단계로, 조직 관리자(organization admin)는 W&amp;B 조직과 공개적으로 접근 가능한 JWT 발급자(JWT issuer) 간에 연합(federation)을 설정해야 합니다.

* 조직 대시보드에서 **Settings** 탭으로 이동합니다.
* **Authentication** 옵션에서 `Set up JWT Issuer`를 클릭합니다.
* 텍스트 상자에 JWT issuer URL을 입력한 뒤 `Create`를 클릭합니다.

W&amp;B는 `${ISSUER_URL}/.well-known/openid-configuration` 경로에서 OIDC 디스커버리 문서를 자동으로 검색하고, 해당 디스커버리 문서 내의 관련 URL에서 JSON Web Key Set(JWKS)을 찾습니다. JWKS는 JWT가 해당 아이덴티티 제공자(identity provider)에 의해 발급되었는지 실시간으로 검증하는 데 사용됩니다.

<div id="using-the-jwt-to-access-wb">
  ## JWT를 사용하여 W&amp;B에 액세스하기
</div>

W&amp;B 조직에 대해 JWT issuer가 설정된 후에는, 사용자가 해당 identity provider에서 발급한 JWT를 사용하여 관련 W&amp;B 프로젝트에 액세스할 수 있습니다. JWT를 사용하는 절차는 다음과 같습니다:

* 조직에서 제공하는 방법 중 하나를 사용해 identity provider에 로그인해야 합니다. 일부 provider는 API 또는 SDK를 통해 자동화된 방식으로 액세스할 수 있고, 일부는 전용 UI를 통해서만 액세스할 수 있습니다. 자세한 내용은 W&amp;B 조직 관리자나 JWT issuer 소유자에게 문의하십시오.
* identity provider에 로그인한 뒤 JWT를 발급받으면, 이를 안전한 위치의 파일에 저장하고 해당 파일의 절대 경로를 환경 변수 `WANDB_IDENTITY_TOKEN_FILE`에 설정하십시오.
* W&amp;B SDK 또는 CLI를 사용하여 W&amp;B 프로젝트에 액세스하십시오. SDK 또는 CLI는 JWT를 자동으로 감지한 뒤, JWT가 성공적으로 검증되면 이를 W&amp;B access token으로 교환합니다. W&amp;B access token은 실행, 메트릭, 아티팩트 등을 로깅하는 등 AI 워크플로우를 활성화하기 위한 관련 API에 액세스하는 데 사용됩니다. access token은 기본적으로 `~/.config/wandb/credentials.json` 경로에 저장됩니다. 환경 변수 `WANDB_CREDENTIALS_FILE`을 지정하여 이 경로를 변경할 수 있습니다.

<Note>
  JWT는 API 키, 비밀번호 등과 같은 장기 자격 증명의 단점을 보완하기 위해 설계된 단기 자격 증명입니다. identity provider에 구성된 JWT 만료 시간에 따라 JWT를 지속적으로 갱신하고, 환경 변수 `WANDB_IDENTITY_TOKEN_FILE`이 참조하는 파일에 항상 최신 JWT가 저장되도록 해야 합니다.

  W&amp;B access token에도 기본 만료 시간이 있으며, 만료 후에는 SDK 또는 CLI가 JWT를 사용해 이를 자동으로 갱신하려고 시도합니다. 이때 사용자 JWT도 이미 만료되어 갱신되지 않았다면 인증 실패가 발생할 수 있습니다. 가능하다면 JWT를 가져오고 만료 후 갱신하는 메커니즘을, W&amp;B SDK 또는 CLI를 사용하는 AI 워크로드의 일부로 구현하는 것이 좋습니다.
</Note>

<div id="jwt-validation">
  ### JWT 유효성 검사
</div>

JWT를 W&amp;B 액세스 토큰으로 교환한 다음 프로젝트에 액세스하는 워크플로의 일부로, JWT에는 다음과 같은 유효성 검사가 수행됩니다:

* JWT 서명은 W&amp;B 조직 수준의 JWKS를 사용해 검증됩니다. 이는 1차 방어선이며, 이 단계에서 실패한다면 JWKS에 문제가 있거나 JWT가 서명된 방식에 문제가 있다는 의미입니다.
* JWT의 `iss` 클레임은 조직 수준에서 구성한 issuer URL과 같아야 합니다.
* JWT의 `sub` 클레임은 W&amp;B 조직에 구성된 사용자의 이메일 주소와 같아야 합니다.
* JWT의 `aud` 클레임은 AI 워크플로의 일부로 액세스 중인 프로젝트를 포함하고 있는 W&amp;B 조직의 이름과 같아야 합니다. [Dedicated Cloud](/ko/platform/hosting/hosting-options/dedicated_cloud) 또는 [Self-Managed](/ko/platform/hosting/hosting-options/self-managed) 인스턴스의 경우, 인스턴스 수준 환경 변수 `SKIP_AUDIENCE_VALIDATION`을 `true`로 설정하여 audience 클레임 유효성 검사를 건너뛰거나 audience로 `wandb`를 사용할 수 있습니다.
* JWT의 `exp` 클레임은 토큰이 여전히 유효한지, 아니면 만료되어 갱신이 필요한지를 확인하기 위해 검사됩니다.

<div id="external-service-accounts">
  ## 외부 서비스 계정
</div>

W&amp;B는 오랫동안 장기 유효 API 키를 사용하는 기본 제공 서비스 계정을 지원해 왔습니다. 이제 SDK 및 CLI용 아이덴티티 페더레이션 기능을 통해, 조직 수준에서 구성된 것과 동일한 issuer가 발급한 JWT를 사용해 인증하는 외부 서비스 계정도 사용할 수 있습니다. 팀 관리자는 기본 제공 서비스 계정과 마찬가지로, 팀 범위 내에서 외부 서비스 계정을 구성할 수 있습니다.

외부 서비스 계정을 구성하려면:

* 팀의 **Service Accounts** 탭으로 이동합니다.
* `New service account`를 클릭합니다.
* 서비스 계정 이름을 입력하고, `Authentication Method`로 `Federated Identity`를 선택한 다음, `Subject`를 입력하고 `Create`를 클릭합니다.

외부 서비스 계정의 JWT에 있는 `sub` 클레임은 팀 관리자가 팀 수준 **Service Accounts** 탭에서 해당 계정의 subject로 설정한 값과 동일해야 합니다. 이 클레임은 [JWT 유효성 검사](#jwt-validation)의 일부로 검증됩니다. `aud` 클레임 요구 사항은 사람 사용자 JWT에 대한 요구 사항과 유사합니다.

[외부 서비스 계정의 JWT를 사용하여 W&amp;B에 액세스할 때](#using-the-jwt-to-access-wb)는, 초기 JWT를 생성하고 지속적으로 갱신하는 워크플로를 자동화하는 편이 일반적으로 더 쉽습니다. 외부 서비스 계정을 사용해 로깅된 실행을 특정 사람 사용자에게 귀속하고 싶다면, 기본 제공 서비스 계정을 사용할 때와 마찬가지로 AI 워크플로에 `WANDB_USERNAME` 또는 `WANDB_USER_EMAIL` 환경 변수를 설정할 수 있습니다.

<Note>
  W&amp;B는 유연성과 단순성 간의 균형을 맞추기 위해, 데이터 민감도 수준이 서로 다른 AI 워크로드 전반에 걸쳐 기본 제공 서비스 계정과 외부 서비스 계정을 혼합하여 사용할 것을 권장합니다.
</Note>