---
title: SCIM으로 사용자, 그룹 및 역할 관리
---

<Note>
  [SCIM 실제 동작 시연 영상](https://www.youtube.com/watch?v=Nw3QBqV0I-o)을 시청하세요 (12분)
</Note>

<div id="overview">
  ## 개요
</div>

SCIM(System for Cross-domain Identity Management) API를 사용하면 인스턴스 또는 조직 관리자가 W&amp;B 조직의 사용자, 그룹, 그리고 사용자 정의 역할을 관리할 수 있습니다. SCIM 그룹은 W&amp;B 팀(Teams)에 매핑됩니다.

W&amp;B의 SCIM API는 Okta를 포함한 주요 아이덴티티 프로바이더와 호환되며, 이를 통해 사용자 프로비저닝 및 디프로비저닝(프로비저닝 해제)을 자동화할 수 있습니다. Okta 및 기타 아이덴티티 프로바이더와의 SSO 구성 방법은 [SSO 문서](/ko/platform/hosting/iam/sso/)를 참고하세요.

SCIM API와 상호작용하는 방법을 보여주는 실용적인 Python 예제는 [`wandb-scim`](https://github.com/wandb/examples/tree/master/wandb-scim) 리포지토리를 방문하세요.

<div id="supported-features">
  ### 지원되는 기능
</div>

* **필터링**: API는 `/Users` 및 `/Groups` 엔드포인트에 대한 필터링을 지원합니다
* **PATCH 작업**: 리소스를 부분적으로 업데이트하기 위한 PATCH를 지원합니다
* **ETag 지원**: 충돌 감지를 위해 ETag를 사용한 조건부 업데이트를 지원합니다
* **서비스 계정 인증**: 조직 서비스 계정이 API에 접근할 수 있습니다

<Note>
  여러 Enterprise [Multi-tenant SaaS](/ko/platform/hosting/hosting-options/multi_tenant_cloud) 조직의 관리자라면, SCIM API 요청을 보낼 조직을 반드시 설정해야 합니다. 그렇게 해야 API Key를 사용해 전송하는 SCIM API 요청이 올바른 조직에 반영됩니다. 프로필 이미지를 클릭한 다음 **User Settings**를 클릭하고, **Default API organization** 설정을 확인하십시오.

  선택한 호스팅 옵션에 따라 이 페이지의 예시에서 사용하는 `<host-url>` 플레이스홀더 값이 결정됩니다.

  또한 예시에서는 `abc`, `def`와 같은 사용자 ID를 사용합니다. 실제 요청과 응답에서는 사용자 ID에 해시된 값이 사용됩니다.
</Note>

<div id="authentication">
  ## 인증
</div>

주요 차이점을 검토한 뒤, 사용자 아이덴티티 또는 서비스 계정을 사용해 인증하는 방식을 선택하세요.

<div id="key-differences">
  ### 주요 차이점
</div>

* 사용 대상: 사용자 계정은 일회성의 대화형 관리자 작업에 적합하고, 서비스 계정은 자동화 및 통합(CI/CD, 프로비저닝 도구)에 가장 적합합니다.
* 자격 증명: 사용자 계정은 사용자 이름과 API 키를 함께 전송하고, 서비스 계정은 API 키만 전송합니다(사용자 이름 없음).
* Authorization 헤더의 페이로드: 사용자 계정은 `username:API-KEY`를 인코딩하고, 서비스 계정은 `:API-KEY`를 인코딩합니다(앞에 콜론 포함).
* 범위와 권한: 둘 다 관리자 권한이 필요합니다. 서비스 계정은 조직 범위이며 헤드리스(headless)이므로 자동화 작업에 대해 더 명확한 감사 추적을 제공합니다.
* 자격 증명 위치: 사용자 계정은 User Settings에서 자신의 API 키를 복사하고, 서비스 계정 키는 조직의 Service account 탭에 있습니다.
* Multi-tenant Cloud: 둘 이상의 Multi-tenant Cloud 조직에 대한 액세스 권한이 있는 경우, SCIM API 호출이 의도한 조직으로 라우팅되도록 Default API organization을 반드시 설정해야 합니다.

<div id="users">
  ### 사용자
</div>

대화형 관리자 작업을 수행할 때는 개인 관리자 자격 증명을 사용하십시오. HTTP `Authorization` 헤더를 `Basic <base64(username:API-KEY)>` 형식으로 구성하십시오.

예를 들어, `demo:p@55w0rd`로 인증하려면:

```bash
Authorization: Basic ZGVtbzpwQDU1dzByZA==
```

<div id="service-accounts">
  ### 서비스 계정
</div>

자동화나 통합 작업에는 조직 범위의 서비스 계정을 사용하세요. HTTP `Authorization` 헤더를 `Basic <base64(:API-KEY)>` 형식으로 설정합니다(앞에 콜론(:)이 오고 사용자 이름은 비워 둔다는 점에 유의하세요). 서비스 계정 API 키는 조직 대시보드의 **Service account** 탭에서 확인할 수 있습니다. 자세한 내용은 [조직 범위 서비스 계정](/ko/platform/hosting/iam/service-accounts/#organization-scoped-service-accounts)을 참고하세요.

예를 들어, API 키 `sa-p@55w0rd`로 인증하려면 다음과 같이 설정합니다:

```bash
Authorization: Basic OnNhLXBANTV3MHJk
```

<div id="user-management">
  ## 사용자 관리
</div>

SCIM 사용자 리소스는 W&amp;B 사용자와 매핑됩니다. 조직의 사용자를 관리하려면 다음 엔드포인트를 사용하세요.

<div id="get-user">
  ### 사용자 조회
</div>

조직의 특정 사용자 정보를 조회합니다.

<Note>이 작업으로는 서비스 계정은 조회되지 않습니다.</Note>

<div id="endpoint">
  #### 엔드포인트
</div>

* **URL**: `<host-url>/scim/Users/{id}`
* **Method**: GET

<div id="parameters">
  #### 매개변수
</div>

| 매개변수 | 타입 | 필수 여부 | 설명 |
|-----------|------|----------|-------------|
| `id` | string | 예 | 사용자의 고유 ID |

#### 예시

<Tabs>
  <Tab title="사용자 조회 요청">
    ```bash
    GET /scim/Users/abc
    ```
  </Tab>

  <Tab title="사용자 조회 응답">
    ```bash
    (Status 200)
    ```

    ```json
    {
        "active": true,
        "daysActive": 42,
        "displayName": "Dev User 1",
        "emails": {
            "Value": "dev-user1@example.com",
            "Display": "",
            "Type": "",
            "Primary": true
        },
        "id": "abc",
        "lastActiveAt": "2023-10-15T14:32:10Z",
        "meta": {
            "resourceType": "User",
            "created": "2023-10-01T00:00:00Z",
            "lastModified": "2023-10-01T00:00:00Z",
            "location": "Users/abc"
        },
        "schemas": [
            "urn:ietf:params:scim:schemas:core:2.0:User"
        ],
        "userName": "dev-user1"
    }
    ```

    응답에는 조직 내에서 사용자의 활동에 대한 세부 정보가 포함됩니다:

    * **`daysActive`**: 사용자가 조직에서 활성으로 집계된 총 일수입니다.
    * **`lastActiveAt`**: 사용자의 가장 최근 활동 시점의 ISO 8601 타임스탬프입니다. 사용자가 한 번도 활성으로 집계된 적이 없으면 `null`을 반환합니다.

    &quot;활성&quot;의 정의는 배포 유형에 따라 다릅니다:

    * **Dedicated Cloud / Self-Managed**: 사용자가 로그인하여 W&amp;B App에서 어떤 페이지든 열거나, 실행을 기록하거나, SDK를 사용하거나, 그 밖에 어떤 방식으로든 W&amp;B 서버와 상호작용하면 활성으로 간주됩니다.
    * **Multi-tenant Cloud**: 사용자가 2025년 5월 8일 이후에 조직 범위의 감사 대상 작업을 수행한 경우 활성으로 간주됩니다. 전체 목록은 [Audit logging actions](/ko/platform/hosting/monitoring-usage/audit-logging#actions)를 참조하세요.
  </Tab>
</Tabs>

<div id="list-users">
  ### 사용자 목록
</div>

조직의 모든 사용자 목록을 조회합니다.

<Note>이 작업에서는 서비스 계정이 조회되지 않습니다.</Note>

<div id="filter-users">
  #### 사용자 필터
</div>

`/Users` 엔드포인트에서는 사용자 이름이나 이메일 주소로 사용자를 필터링할 수 있습니다:

* `userName eq "value"` - 사용자 이름으로 필터링
* `emails.value eq "value"` - 이메일 주소로 필터링

<div id="example">
  ##### 예시
</div>

```bash
GET /scim/Users?filter=userName eq "john.doe"
GET /scim/Users?filter=emails.value eq "john@example.com"
```

<div id="endpoint">
  #### 엔드포인트
</div>

* **URL**: `<host-url>/scim/Users`
* **Method**: GET

#### 예시

<Tabs>
  <Tab title="List Users Request">
    ```bash
    GET /scim/Users
    ```
  </Tab>

  <Tab title="List Users Response">
    ```bash
    (Status 200)
    ```

    ```json
    {
        "Resources": [
            {
                "active": true,
                "daysActive": 42,
                "displayName": "Dev User 1",
                "emails": {
                    "Value": "dev-user1@example.com",
                    "Display": "",
                    "Type": "",
                    "Primary": true
                },
                "id": "abc",
                "lastActiveAt": "2023-10-15T14:32:10Z",
                "meta": {
                    "resourceType": "User",
                    "created": "2023-10-01T00:00:00Z",
                    "lastModified": "2023-10-01T00:00:00Z",
                    "location": "Users/abc"
                },
                "schemas": [
                    "urn:ietf:params:scim:schemas:core:2.0:User"
                ],
                "userName": "dev-user1"
            }
        ],
        "itemsPerPage": 9999,
        "schemas": [
            "urn:ietf:params:scim:api:messages:2.0:ListResponse"
        ],
        "startIndex": 1,
        "totalResults": 1
    }
    ```

    응답에는 조직 내 각 사용자의 활동에 대한 세부 정보가 포함됩니다.

    * **`daysActive`**: 사용자가 조직에서 활동한 총 일수입니다.
    * **`lastActiveAt`**: 사용자의 가장 최근 활동 시각을 나타내는 ISO 8601 타임스탬프입니다. 사용자가 한 번도 활동한 적이 없다면 `null`을 반환합니다.

    &quot;활성(active)&quot;의 정의는 배포 유형에 따라 다릅니다.

    * **Dedicated Cloud / Self-Managed**: 사용자가 로그인하거나, W&amp;B 앱의 어떤 페이지든 열거나, 실행을 로깅하거나, SDK를 사용하거나, 어떤 방식으로든 W&amp;B 서버와 상호작용하면 활성 상태로 간주됩니다.
    * **Multi-tenant Cloud**: 사용자가 2025년 5월 8일 이후에 조직 범위로 감사 가능(auditable)한 작업을 수행한 경우 활성 상태로 간주됩니다. 전체 목록은 [Audit logging actions](/ko/platform/hosting/monitoring-usage/audit-logging#actions)를 참조하세요.
  </Tab>
</Tabs>

<div id="create-user">
  ### 사용자 생성
</div>

조직에 새 사용자를 추가합니다.

<div id="endpoint">
  #### 엔드포인트
</div>

* **URL**: `<host-url>/scim/Users`
* **Method**: POST

<div id="parameters">
  #### 매개변수
</div>

| 매개변수 | 타입 | 필수 여부 | 설명 |
|-----------|------|----------|-------------|
| `emails` | array | 예 | 이메일 객체 배열입니다. 기본(primary) 이메일 주소를 하나 포함해야 합니다 |
| `userName` | string | 예 | 새 사용자의 사용자 이름입니다 |

#### 예시

<Tabs>
  <Tab title="사용자 생성 요청 (Dedicated/Self-Managed)">
    ```bash
    POST /scim/Users
    ```

    ```json
    {
        "schemas": [
            "urn:ietf:params:scim:schemas:core:2.0:User"
        ],
        "emails": [
            {
                "primary": true,
                "value": "dev-user2@example.com"
            }
        ],
        "userName": "dev-user2"
    }
    ```
  </Tab>

  <Tab title="사용자 생성 요청 (Multi-tenant)">
    ```bash
    POST /scim/Users
    ```

    ```json
    {
        "schemas": [
            "urn:ietf:params:scim:schemas:core:2.0:User",
            "urn:ietf:params:scim:schemas:extension:teams:2.0:User"
        ],
        "emails": [
            {
                "primary": true,
                "value": "dev-user2@example.com"
            }
        ],
        "userName": "dev-user2",
        "urn:ietf:params:scim:schemas:extension:teams:2.0:User": {
            "teams": ["my-team"]
        }
    }
    ```
  </Tab>
</Tabs>

<div id="response">
  #### 응답
</div>

<Tabs>
  <Tab title="사용자 생성 응답 (Dedicated/Self-Managed)">
    ```bash
    (Status 201)
    ```

    ```json
    {
        "active": true,
        "displayName": "Dev User 2",
        "emails": {
            "Value": "dev-user2@example.com",
            "Display": "",
            "Type": "",
            "Primary": true
        },
        "id": "def",
        "meta": {
            "resourceType": "User",
            "created": "2023-10-01T00:00:00Z",
            "location": "Users/def"
        },
        "schemas": [
            "urn:ietf:params:scim:schemas:core:2.0:User"
        ],
        "userName": "dev-user2"
    }
    ```
  </Tab>

  <Tab title="사용자 생성 응답 (멀티 테넌트)">
    ```bash
    (Status 201)
    ```

    ```json
    {
        "active": true,
        "displayName": "Dev User 2",
        "emails": {
            "Value": "dev-user2@example.com",
            "Display": "",
            "Type": "",
            "Primary": true
        },
        "id": "def",
        "meta": {
            "resourceType": "User",
            "created": "2023-10-01T00:00:00Z",
            "location": "Users/def"
        },
        "schemas": [
            "urn:ietf:params:scim:schemas:core:2.0:User",
            "urn:ietf:params:scim:schemas:extension:teams:2.0:User"
        ],
        "userName": "dev-user2",
        "organizationRole": "member",
        "teamRoles": [
            {
                "teamName": "my-team",
                "roleName": "member"
            }
        ],
        "groups": [
            {
                "value": "my-team-id"
            }
        ]
    }
    ```
  </Tab>
</Tabs>

<div id="delete-user">
  ### 사용자 삭제
</div>

<Warning>
  **관리자 액세스 유지**

  인스턴스나 조직에는 항상 최소 한 명 이상의 관리자 사용자가 있어야 합니다. 그렇지 않으면 어떤 사용자도 조직의 W&amp;B 계정을 구성하거나 유지관리할 수 없습니다. 조직이 SCIM 또는 다른 자동화된 프로세스를 사용해 W&amp;B에서 사용자를 프로비저닝 해제하는 경우, 프로비저닝 해제 작업으로 인해 인스턴스나 조직의 마지막 남은 관리자가 의도치 않게 제거될 수 있습니다.

  운영 절차 수립에 대한 도움이 필요하거나 관리자 액세스를 복구해야 하는 경우 [support](mailto:support@wandb.com)로 문의하세요.
</Warning>

조직에서 사용자를 완전히 삭제합니다.

<Note>이 작업은 사용자에만 적용되며 서비스 계정에는 적용되지 않습니다. 서비스 계정은 W&amp;B Team 설정에서 삭제하세요.</Note>

<div id="endpoint">
  #### 엔드포인트
</div>

* **URL**: `<host-url>/scim/Users/{id}`
* **메서드**: DELETE

<div id="parameters">
  #### 매개변수
</div>

| 매개변수 | 타입 | 필수 여부 | 설명 |
|-----------|------|----------|-------------|
| `id` | string | 예 | 삭제할 사용자의 고유 ID |

#### 예제

<Tabs>
  <Tab title="사용자 삭제 요청">
    ```bash
    DELETE /scim/Users/abc
    ```
  </Tab>

  <Tab title="사용자 삭제 응답">
    ```bash
    (Status 204)
    ```
  </Tab>
</Tabs>

<Note>
  사용자를 일시적으로 비활성화하려면 `PATCH` 엔드포인트를 사용하는 [사용자 비활성화](#deactivate-user) API를 참고하세요.
</Note>

<div id="update-user-email">
  ### 사용자 이메일 업데이트
</div>

사용자의 기본 이메일 주소를 업데이트합니다.
사용자의 계정이 조직에서 관리되지 않는 **멀티 테넌트 클라우드** 환경에서는 사용할 수 없습니다.

<div id="endpoint">
  #### 엔드포인트
</div>

* **URL**: `<host-url>/scim/Users/{id}`
* **Method**: PATCH

<div id="parameters">
  #### 매개변수
</div>

| 매개변수 | 유형 | 필수 | 설명 |
|-----------|------|----------|-------------|
| `id` | string | Yes | 사용자의 고유 ID |
| `op` | string | Yes | `replace` |
| `path` | string | Yes | `emails` |
| `value` | array | Yes | 새 이메일 객체를 포함하는 배열 |

#### 예시

<Tabs>
  <Tab title="이메일 업데이트 요청">
    ```bash
    PATCH /scim/Users/abc
    ```

    ```json
    {
        "schemas": ["urn:ietf:params:scim:api:messages:2.0:PatchOp"],
        "Operations": [
            {
                "op": "replace",
                "path": "emails",
                "value": [
                    {
                        "value": "newemail@example.com",
                        "primary": true
                    }
                ]
            }
        ]
    }
    ```
  </Tab>

  <Tab title="이메일 업데이트 응답">
    ```bash
    (Status 200)
    ```

    ```json
    {
        "active": true,
        "displayName": "Dev User 1",
        "emails": {
            "Value": "newemail@example.com",
            "Display": "",
            "Type": "",
            "Primary": true
        },
        "id": "abc",
        "meta": {
            "resourceType": "User",
            "created": "2023-10-01T00:00:00Z",
            "lastModified": "2023-10-01T00:00:00Z",
            "location": "Users/abc"
        },
        "schemas": [
            "urn:ietf:params:scim:schemas:core:2.0:User"
        ],
        "userName": "dev-user1"
    }
    ```
  </Tab>
</Tabs>

<div id="update-user-display-name">
  ### 사용자 표시 이름 업데이트
</div>

사용자의 표시 이름을 업데이트합니다.
조직에서 사용자 계정을 관리하지 않는 **멀티 테넌트 클라우드(Multi-tenant Cloud) 환경에서는 이 기능을 사용할 수 없습니다.**

<div id="endpoint">
  #### 엔드포인트
</div>

* **URL**: `<host-url>/scim/Users/{id}`
* **메서드**: PATCH

<div id="parameters">
  #### 매개변수
</div>

| 매개변수 | 유형 | 필수 | 설명 |
|-----------|------|----------|-------------|
| `id` | string | Yes | 사용자 고유 ID |
| `op` | string | Yes | `replace` |
| `path` | string | Yes | `displayName` |
| `value` | string | Yes | 새 표시 이름 |

#### 예시

<Tabs>
  <Tab title="표시 이름 업데이트 요청">
    ```bash
    PATCH /scim/Users/abc
    ```

    ```json
    {
        "schemas": ["urn:ietf:params:scim:api:messages:2.0:PatchOp"],
        "Operations": [
            {
                "op": "replace",
                "path": "displayName",
                "value": "John Doe"
            }
        ]
    }
    ```
  </Tab>

  <Tab title="표시 이름 업데이트 응답">
    ```bash
    (상태 200)
    ```

    ```json
    {
        "active": true,
        "displayName": "John Doe",
        "emails": {
            "Value": "dev-user1@example.com",
            "Display": "",
            "Type": "",
            "Primary": true
        },
        "id": "abc",
        "meta": {
            "resourceType": "User",
            "created": "2025-7-01T00:00:00Z",
            "lastModified": "2025-7-01T00:00:00Z",
            "location": "users/dev-user1"
        },
        "schemas": [
            "urn:ietf:params:scim:schemas:core:2.0:User"
        ],
        "userName": "dev-user1"
    }
    ```
  </Tab>
</Tabs>

<div id="deactivate-user">
  ### 사용자 비활성화
</div>

조직의 사용자를 비활성화합니다. 실제 결과는 배포 유형에 따라 다릅니다:

* **Dedicated Cloud** / **Self-Managed**: 사용자의 `active` 필드를 `false`로 설정합니다. 비활성화된 사용자의 조직 접근을 복원하려면 [사용자 재활성화](#reactivate-user)를 참고하세요.
* **Multi-tenant Cloud**: 사용자를 조직에서 제거합니다. 사용자의 접근을 복원하려면 조직에 사용자를 다시 추가하세요. [사용자 생성](#create-user-request-multi-tenant)을 참고하세요. Multi-tenant Cloud에서는 사용자 계정을 조직에서 관리하지 않습니다.

<Note>이 작업은 사용자 계정에만 적용되며, service account에는 적용되지 않습니다. service account 비활성화는 지원되지 않습니다. 팀 service account는 W&amp;B Team 설정에서 관리하세요.</Note>

<div id="endpoint">
  #### 엔드포인트
</div>

* **URL**: `<host-url>/scim/Users/{id}`
* **메서드**: PATCH

<div id="parameters">
  #### 매개변수
</div>

| 매개변수 | 타입 | 필수 여부 | 설명 |
|-----------|------|----------|-------------|
| `id` | string | 예 | 비활성화할 사용자의 고유 ID |
| `op` | string | 예 | `replace` |
| `value` | object | 예 | `{"active": false}` 값을 가진 객체 |

#### 예시

<Tabs>
  <Tab title="사용자 비활성화 요청 (Dedicated/Self-Managed)">
    ```bash
    PATCH /scim/Users/abc
    ```

    ```json
    {
        "schemas": ["urn:ietf:params:scim:api:messages:2.0:PatchOp"],
        "Operations": [
            {
                "op": "replace",
                "value": {"active": false}
            }
        ]
    }
    ```
  </Tab>

  <Tab title="사용자 비활성화 요청 (Multi-tenant)">
    ```bash
    PATCH /scim/Users
    ```

    ```json
    {
        "schemas": ["urn:ietf:params:scim:api:messages:2.0:PatchOp"],
        "Operations": [
            {
                "op": "replace",
                "value": {"active": false}
            }
        ]
    }
    ```
  </Tab>
</Tabs>

<div id="response">
  #### 응답
</div>

<Tabs>
  <Tab title="사용자 비활성화 응답 (Dedicated/Self-Managed)">
    ```bash
    (상태 코드 200)
    ```

    ```json
    {
        "active": false,
        "displayName": "Dev User 1",
        "emails": {
            "Value": "dev-user1@example.com",
            "Display": "",
            "Type": "",
            "Primary": true
        },
        "id": "abc",
        "meta": {
            "resourceType": "User",
            "created": "2023-10-01T00:00:00Z",
            "lastModified": "2023-10-01T00:00:00Z",
            "location": "Users/abc"
        },
        "schemas": [
            "urn:ietf:params:scim:schemas:core:2.0:User"
        ],
        "userName": "dev-user1"
    }
    ```
  </Tab>

  <Tab title="사용자 비활성화 응답 (Multi-tenant)">
    ```bash
    (상태 코드 200)
    ```

    ```json
    {
        "schemas": ["urn:ietf:params:scim:api:messages:2.0:PatchOp"],
        "Operations": [
            {
                "op": "replace",
                "value": {"active": true}
            }
        ]
    }
    ```
  </Tab>
</Tabs>

<div id="reactivate-user">
  ### 사용자 재활성화
</div>

조직에서 이전에 비활성화한 사용자를 다시 활성화합니다.

<Note>
  * 사용자 재활성화는 사용자 계정에만 적용되며, service account에는 적용되지 않습니다. service account 재활성화는 지원되지 않습니다. service account는 W&amp;B Team 설정에서 관리하세요.

  * [Multi-tenant Cloud](/ko/platform/hosting/hosting-options/multi_tenant_cloud)에서는 사용자 재활성화가 지원되지 않습니다. 사용자의 액세스 권한을 복원하려면 조직에 다시 추가하세요. [사용자 생성](#create-user-request-multi-tenant)을 참고하세요. Multi-tenant Cloud에서는 사용자의 계정을 조직에서 관리하지 않습니다. 사용자를 재활성화하려고 하면 HTTP `400` 오류가 발생합니다:
    ```json
    {
        "schemas": [
            "urn:ietf:params:scim:api:messages:2.0:Error"
        ],
        "detail": "User reactivation operations are not supported in SaaS Cloud",
        "status": "400"
    }
    ```
</Note>

<div id="endpoint">
  #### 엔드포인트
</div>

* **URL**: `<host-url>/scim/Users/{id}`
* **메서드**: PATCH

<div id="parameters">
  #### 매개변수
</div>

| 매개변수 | 타입 | 필수 여부 | 설명 |
|-----------|------|----------|-------------|
| `id` | string | 예 | 재활성화할 사용자의 고유 ID |
| `op` | string | 예 | `replace` |
| `value` | object | 예 | `{"active": true}` 값이 설정된 객체 |

#### 예제

<Tabs>
  <Tab title="사용자 재활성화 요청">
    ```bash
    PATCH /scim/Users/abc
    ```

    ```json
    {
        "schemas": ["urn:ietf:params:scim:api:messages:2.0:PatchOp"],
        "Operations": [
            {
                "op": "replace",
                "value": {"active": true}
            }
        ]
    }
    ```
  </Tab>

  <Tab title="사용자 재활성화 응답">
    ```bash
    (Status 200)
    ```

    ```json
    {
        "active": true,
        "displayName": "Dev User 1",
        "emails": {
            "Value": "dev-user1@example.com",
            "Display": "",
            "Type": "",
            "Primary": true
        },
        "id": "abc",
        "meta": {
            "resourceType": "User",
            "created": "2023-10-01T00:00:00Z",
            "lastModified": "2023-10-01T00:00:00Z",
            "location": "Users/abc"
        },
        "schemas": [
            "urn:ietf:params:scim:schemas:core:2.0:User"
        ],
        "userName": "dev-user1"
    }
    ```
  </Tab>
</Tabs>

<div id="assign-organization-role">
  ### 조직 역할 할당
</div>

사용자에게 조직 수준 역할을 할당합니다.

<Note>이 작업은 서비스 계정이 아닌 사용자에게만 적용됩니다. 서비스 계정에는 사용자 지정 역할이 지원되지 않습니다.</Note>

<div id="endpoint">
  #### 엔드포인트
</div>

* **URL**: `<host-url>/scim/Users/{id}`
* **메서드**: PATCH

<div id="parameters">
  #### 매개변수
</div>

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `id` | string | Yes | 사용자의 고유 ID |
| `op` | string | Yes | `replace` |
| `path` | string | Yes | `organizationRole` |
| `value` | string | Yes | 역할 이름 (`admin` 또는 `member`) |

<Note>
  조직 범위의 `viewer` 역할은 사용이 중단(deprecated)되었으며 더 이상 UI에서 할당할 수 없습니다. SCIM을 사용해 사용자에게 `viewer` 역할을 할당하는 경우 다음과 같이 처리됩니다.

  * 조직에서는 `member` 역할이 할당됩니다.
  * Models에서는 `full` 시트 대신 `viewer` 시트가 할당됩니다. 이를 통해 Models에는 조회 전용 권한이, Registry에는 전체 권한이 부여됩니다. 사용 가능한 Models 시트가 없으면 `Seat limit reached` 오류가 기록되고, 해당 멤버는 Models 접근 권한 없이 추가됩니다. 나중에 시트가 확보되면 업데이트할 수 있습니다.
  * Weave에서는 `full` 시트 대신 `viewer` 시트가 할당됩니다. 이를 통해 Weave에는 조회 전용 권한이 부여됩니다. 사용 가능한 Weave 시트가 없으면 `Seat limit reached` 오류가 기록되고, 해당 멤버는 Weave 접근 권한 없이 추가됩니다. 나중에 시트가 확보되면 업데이트할 수 있습니다.
  * 조직 수준에서 표시되는 Registry에 대해서는 Registry `viewer` 역할이 할당됩니다.
</Note>

#### 예시

<Tabs>
  <Tab title="조직 역할 할당 요청">
    ```bash
    PATCH /scim/Users/abc
    ```

    ```json
    {
        "schemas": ["urn:ietf:params:scim:api:messages:2.0:PatchOp"],
        "Operations": [
            {
                "op": "replace",
                "path": "organizationRole",
                "value": "admin"
            }
        ]
    }
    ```
  </Tab>

  <Tab title="조직 역할 할당 응답">
    ```bash
    (Status 200)
    ```

    ```json
    {
        "active": true,
        "displayName": "Dev User 1",
        "emails": {
            "Value": "dev-user1@example.com",
            "Display": "",
            "Type": "",
            "Primary": true
        },
        "id": "abc",
        "meta": {
            "resourceType": "User",
            "created": "2023-10-01T00:00:00Z",
            "lastModified": "2023-10-01T00:00:00Z",
            "location": "Users/abc"
        },
        "schemas": [
            "urn:ietf:params:scim:schemas:core:2.0:User"
        ],
        "userName": "dev-user1",
        "teamRoles": [
            {
                "teamName": "team1",
                "roleName": "admin"
            }
        ],
        "organizationRole": "admin"
    }
    ```
  </Tab>
</Tabs>

<div id="assign-team-role">
  ### 팀 역할 할당
</div>

사용자에게 팀 레벨 역할을 할당합니다.

<Note>이 작업은 사용자에게만 적용되며, 서비스 계정에는 적용되지 않습니다. 서비스 계정에서는 커스텀 역할이 지원되지 않습니다.</Note>

<div id="endpoint">
  #### 엔드포인트
</div>

* **URL**: `<host-url>/scim/Users/{id}`
* **Method**: PATCH

<div id="parameters">
  #### 매개변수
</div>

| 매개변수 | 타입 | 필수 | 설명 |
|-----------|------|----------|-------------|
| `id` | string | 예 | 사용자의 고유 ID |
| `op` | string | 예 | `replace` |
| `path` | string | 예 | `teamRoles` |
| `value` | array | 예 | `teamName`과 `roleName`을 포함하는 객체 배열 |

#### 예시

<Tabs>
  <Tab title="팀 역할 부여 요청">
    ```bash
    PATCH /scim/Users/abc
    ```

    ```json
    {
        "schemas": ["urn:ietf:params:scim:api:messages:2.0:PatchOp"],
        "Operations": [
            {
                "op": "replace",
                "path": "teamRoles",
                "value": [
                    {
                        "roleName": "admin",
                        "teamName": "team1"
                    }
                ]
            }
        ]
    }
    ```
  </Tab>

  <Tab title="팀 역할 부여 응답">
    ```bash
    (Status 200)
    ```

    ```json
    {
        "active": true,
        "displayName": "Dev User 1",
        "emails": {
            "Value": "dev-user1@example.com",
            "Display": "",
            "Type": "",
            "Primary": true
        },
        "id": "abc",
        "meta": {
            "resourceType": "User",
            "created": "2023-10-01T00:00:00Z",
            "lastModified": "2023-10-01T00:00:00Z",
            "location": "Users/abc"
        },
        "schemas": [
            "urn:ietf:params:scim:schemas:core:2.0:User"
        ],
        "userName": "dev-user1",
        "teamRoles": [
            {
                "teamName": "team1",
                "roleName": "admin"
            }
        ],
        "organizationRole": "admin"
    }
    ```
  </Tab>
</Tabs>

<div id="add-to-registry">
  ### 레지스트리에 추가
</div>

지정된 레지스트리 수준 역할이 부여된 사용자를 레지스트리에 추가합니다.

<Note>이 작업은 사용자에게만 적용되며, 서비스 계정에는 적용되지 않습니다. 서비스 계정에는 사용자 지정 역할이 지원되지 않습니다.</Note>

<div id="endpoint">
  #### 엔드포인트
</div>

* **URL**: `<host-url>/scim/Users/{id}`
* **메서드**: PATCH

<div id="parameters">
  #### 매개변수
</div>

| 매개변수 | 유형 | 필수 여부 | 설명 |
|-----------|------|----------|-------------|
| `id` | string | 예 | 사용자 고유 ID |
| `op` | string | 예 | `add` |
| `path` | string | 예 | `registryRoles` |
| `value` | array | 예 | `registryName`과 `roleName` 속성을 가진 객체 배열 |

#### 예시

<Tabs>
  <Tab title="레지스트리에 추가 요청">
    ```bash
    PATCH /scim/Users/abc
    ```

    ```json
    {
        "schemas": ["urn:ietf:params:scim:api:messages:2.0:PatchOp"],
        "Operations": [
            {
                "op": "replace",
                "path": "registryRoles",
                "value": [
                    {
                        "roleName": "admin",
                        "registryName": "hello-registry"
                    }
                ]
            }
        ]
    }
    ```
  </Tab>

  <Tab title="레지스트리에 추가 응답">
    ```bash
    (Status 200)
    ```

    ```json
    {
        "active": true,
        "displayName": "Dev User 1",
        "emails": {
            "Value": "dev-user1@example.com",
            "Display": "",
            "Type": "",
            "Primary": true
        },
        "id": "abc",
        "meta": {
            "resourceType": "User",
            "created": "2023-10-01T00:00:00Z",
            "lastModified": "2023-10-01T00:00:00Z",
            "location": "Users/abc"
        },
        "schemas": [
            "urn:ietf:params:scim:schemas:core:2.0:User"
        ],
        "userName": "dev-user1",
        "registryRoles": [
            {
                "registryName": "hello-registry",
                "roleName": "admin"
            }
        ],
        "organizationRole": "admin"
    }
    ```
  </Tab>
</Tabs>

<div id="remove-from-registry">
  ### Registry에서 제거
</div>

레지스트리에서 사용자를 제거합니다.

<Note>
  * 제거 작업은 RFC 7644 SCIM 프로토콜 규격을 따릅니다. 특정 레지스트리에서 사용자를 제거하려면 `"registryRoles[registryName eq \"{registry_name}\"]"` 필터 구문을 사용하고, 모든 레지스트리에서 사용자를 제거하려면 `"registryRoles"`를 사용하십시오.
  * 이 작업은 사용자 계정에만 적용되며, 서비스 계정에는 적용되지 않습니다. 서비스 계정을 레지스트리에서 제거하려면 W&amp;B 팀 설정에서 제거하십시오.
</Note>

<div id="endpoint">
  #### 엔드포인트
</div>

* **URL**: `<host-url>/scim/Users/{id}`
* **메서드**: PATCH

<div id="parameters">
  #### 매개변수
</div>

| 매개변수 | 유형 | 필수 여부 | 설명 |
|-----------|------|----------|-------------|
| `id` | string | 예 | 고유한 사용자 ID |
| `op` | string | 예 | `remove` |
| `path` | string | 예 | `"registryRoles[registryName eq \"{registry_name}\"]"` 또는 `"registryRoles"` |

#### 예제

<Tabs>
  <Tab title="레지스트리에서 제거 요청">
    ```bash
    PATCH /scim/Users/abc
    ```

    ```json
    {
        "schemas": ["urn:ietf:params:scim:api:messages:2.0:PatchOp"],
        "Operations": [
            {
                "op": "replace",
                "path": "registryRoles[registryName eq \"goodbye-registry\"]"
            }
        ]
    }
    ```
  </Tab>

  <Tab title="레지스트리에서 제거 응답">
    ```bash
    (Status 200)
    ```

    ```json
    {
        "active": true,
        "displayName": "Dev User 1",
        "emails": {
            "Value": "dev-user1@example.com",
            "Display": "",
            "Type": "",
            "Primary": true
        },
        "id": "abc",
        "meta": {
            "resourceType": "User",
            "created": "2023-10-01T00:00:00Z",
            "lastModified": "2023-10-01T00:00:00Z",
            "location": "Users/abc"
        },
        "schemas": [
            "urn:ietf:params:scim:schemas:core:2.0:User"
        ],
        "userName": "dev-user1",
        "registryRoles": [
            {
                "registryName": "hello-registry",
                "roleName": "admin"
            }
        ],
        "organizationRole": "admin"
    }
    ```
  </Tab>
</Tabs>

<Tabs>
  <Tab title="모든 레지스트리에서 제거 요청">
    ```bash
    PATCH /scim/Users/abc
    ```

    ```json
    {
        "schemas": ["urn:ietf:params:scim:api:messages:2.0:PatchOp"],
        "Operations": [
            {
                "op": "replace",
                "path": "registryRoles"
            }
        ]
    }
    ```
  </Tab>

  <Tab title="모든 레지스트리에서 제거 응답">
    ```bash
    (Status 200)
    ```

    ```json
    {
        "active": true,
        "displayName": "Dev User 1",
        "emails": {
            "Value": "dev-user1@example.com",
            "Display": "",
            "Type": "",
            "Primary": true
        },
        "id": "abc",
        "meta": {
            "resourceType": "User",
            "created": "2023-10-01T00:00:00Z",
            "lastModified": "2023-10-01T00:00:00Z",
            "location": "Users/abc"
        },
        "schemas": [
            "urn:ietf:params:scim:schemas:core:2.0:User"
        ],
        "userName": "dev-user1",
        "organizationRole": "admin"
    }
    ```
  </Tab>
</Tabs>

<div id="group-resource">
  ## 그룹 리소스
</div>

IAM에서 SCIM 그룹을 생성하면 해당 그룹에 대응하는 W&amp;B 팀이 생성 및 매핑되며, 이후 SCIM 그룹에 대한 다른 작업은 이 팀을 대상으로 수행됩니다.

<div id="service-accounts">
  ### 서비스 계정
</div>

SCIM을 사용해 W&amp;B 팀을 생성하면, 서비스 계정의 팀 리소스에 대한 액세스를 유지하기 위해 모든 조직 수준의 서비스 계정이 자동으로 해당 팀에 추가됩니다.

<div id="filtering-groups">
  ### 그룹 필터링
</div>

`/Groups` 엔드포인트는 특정 팀을 찾기 위한 필터링을 지원합니다.

<div id="supported-filters">
  #### 지원되는 필터
</div>

* `displayName eq "value"` - 팀 표시 이름으로 그룹 필터링

#### 예시

```bash
GET /scim/Groups?filter=displayName eq "engineering-team"
```

<div id="get-team">
  ### 팀 조회
</div>

팀의 고유 ID를 제공하여 팀 정보를 조회합니다.

<div id="endpoint">
  #### 엔드포인트
</div>

* **URL**: `<host-url>/scim/Groups/{id}`
* **HTTP 메서드**: GET

#### 예제

<Tabs>
  <Tab title="요청">
    ```bash
    GET /scim/Groups/ghi
    ```
  </Tab>

  <Tab title="응답">
    ```bash
    (Status 200)
    ```

    ```json
    {
        "displayName": "acme-devs",
        "id": "ghi",
        "members": [
            {
                "Value": "abc",
                "Ref": "",
                "Type": "",
                "Display": "dev-user1"
            }
        ],
        "meta": {
            "resourceType": "Group",
            "created": "2023-10-01T00:00:00Z",
            "lastModified": "2023-10-01T00:00:00Z",
            "location": "Groups/ghi"
        },
        "schemas": [
            "urn:ietf:params:scim:schemas:core:2.0:Group"
        ]
    }
    ```
  </Tab>
</Tabs>

<div id="list-teams">
  ### 팀 목록 조회
</div>

팀 목록을 조회합니다.

<div id="endpoint">
  #### 엔드포인트
</div>

* **URL**: `<host-url>/scim/Groups`
* **Method**: GET

#### 예시

<Tabs>
  <Tab title="요청">
    ```bash
    GET /scim/Groups
    ```
  </Tab>

  <Tab title="응답">
    ```bash
    (Status 200)
    ```

    ```json
    {
        "Resources": [
            {
                "displayName": "acme-devs",
                "id": "ghi",
                "members": [
                    {
                        "Value": "abc",
                        "Ref": "",
                        "Type": "",
                        "Display": "dev-user1"
                    }
                ],
                "meta": {
                    "resourceType": "Group",
                    "created": "2023-10-01T00:00:00Z",
                    "lastModified": "2023-10-01T00:00:00Z",
                    "location": "Groups/ghi"
                },
                "schemas": [
                    "urn:ietf:params:scim:schemas:core:2.0:Group"
                ]
            }
        ],
        "itemsPerPage": 9999,
        "schemas": [
            "urn:ietf:params:scim:api:messages:2.0:ListResponse"
        ],
        "startIndex": 1,
        "totalResults": 1
    }
    ```
  </Tab>
</Tabs>

<div id="create-team">
  ### 팀 생성
</div>

* **Endpoint**: **`<host-url>/scim/Groups`**
* **Method**: POST
* **Description**: 새 팀 리소스를 생성합니다.
* **Supported Fields**: 지원되는 필드

| Field | Type | Required |
| --- | --- | --- |
| `displayName` | String | 예 |
| `members` | Multi-Valued Array | 예 (`value` 하위 필드는 필수이며 사용자 ID에 매핑됩니다) |

#### 예시

다음은 `dev-user2`를 멤버로 갖는 `wandb-support` 팀을 생성하는 예입니다.

<Tabs>
  <Tab title="요청">
    ```bash
    POST /scim/Groups
    ```

    ```json
    {
        "schemas": ["urn:ietf:params:scim:schemas:core:2.0:Group"],
        "displayName": "wandb-support",
        "members": [
            {
                "value": "def"
            }
        ]
    }
    ```
  </Tab>

  <Tab title="응답">
    ```bash
    (Status 201)
    ```

    ```json
    {
        "displayName": "wandb-support",
        "id": "jkl",
        "members": [
            {
                "Value": "def",
                "Ref": "",
                "Type": "",
                "Display": "dev-user2"
            }
        ],
        "meta": {
            "resourceType": "Group",
            "created": "2023-10-01T00:00:00Z",
            "lastModified": "2023-10-01T00:00:00Z",
            "location": "Groups/jkl"
        },
        "schemas": [
            "urn:ietf:params:scim:schemas:core:2.0:Group"
        ]
    }
    ```
  </Tab>
</Tabs>

<div id="update-team">
  ### 팀 업데이트
</div>

* **Endpoint**: **`<host-url>/scim/Groups/{id}`**
* **Method**: PATCH
* **Description**: 기존 팀의 구성원 목록을 업데이트합니다.
* **Supported Operations**: `add` member, `remove` member, `replace` members

<Note>
  - remove 연산은 RFC 7644 SCIM 프로토콜 사양을 따릅니다. 특정 사용자를 제거하려면 필터 구문 `members[value eq "{user_id}"]`를 사용하고, 팀에서 모든 사용자를 제거하려면 `members`를 사용하세요.

    **사용자 식별**: 구성원 관련 연산에서 `{user_id}`는 다음 중 하나가 될 수 있습니다:

    * W&amp;B 사용자 ID
    * 이메일 주소(예: &quot;user@example.com&quot;)
  - 이 연산은 사용자에게만 적용되며, 서비스 계정에는 적용되지 않습니다. 팀의 서비스 계정은 W&amp;B 팀 설정에서 업데이트하세요.
</Note>

<Info>
  요청에서 `{team_id}`는 실제 팀 ID로, `{user_id}`는 실제 사용자 ID 또는 이메일 주소로 바꿔서 사용하세요.
</Info>

<div id="replace-team-members">
  ### 팀 구성원 교체
</div>

팀의 모든 구성원을 새로운 목록으로 교체합니다.

<Note>이 작업은 서비스 계정이 아닌 사용자에게만 동작합니다. 서비스 계정은 W&amp;B 팀 설정에서 관리하세요.</Note>

* **Endpoint**: **`<host-url>/scim/Groups/{id}`**
* **Method**: PUT
* **Description**: 전체 팀 구성원 목록을 교체합니다.

<Tabs>
  <Tab title="Request">
    ```bash
    PUT /scim/Groups/{team_id}
    ```

    ```json
    {
        "schemas": ["urn:ietf:params:scim:schemas:core:2.0:Group"],
        "displayName": "acme-devs",
        "members": [
            {
                "value": "{user_id_1}"
            },
            {
                "value": "{user_id_2}"
            }
        ]
    }
    ```
  </Tab>

  <Tab title="Response">
    ```bash
    (Status 200)
    ```

    ```json
    {
        "displayName": "acme-devs",
        "id": "ghi",
        "members": [
            {
                "Value": "user_id_1",
                "Ref": "",
                "Type": "",
                "Display": "user1"
            },
            {
                "Value": "user_id_2",
                "Ref": "",
                "Type": "",
                "Display": "user2"
            }
        ],
        "meta": {
            "resourceType": "Group",
            "created": "2023-10-01T00:00:00Z",
            "lastModified": "2023-10-01T00:01:00Z",
            "location": "Groups/ghi"
        },
        "schemas": [
            "urn:ietf:params:scim:schemas:core:2.0:Group"
        ]
    }
    ```
  </Tab>
</Tabs>

**사용자를 팀에 추가하기**

`dev-user2`를 `acme-devs` 팀에 추가합니다:

<Note>이 작업은 서비스 계정이 아닌 사용자에게만 동작합니다. 서비스 계정은 W&amp;B 팀 설정에서 관리하세요.</Note>

<Tabs>
  <Tab title="Request">
    ```bash
    PATCH /scim/Groups/{team_id}
    ```

    ```json
    {
        "schemas": ["urn:ietf:params:scim:api:messages:2.0:PatchOp"],
        "Operations": [
            {
                "op": "add",
                "path": "members",
                "value": [
                    {
                        "value": "{user_id}"
                    }
                ]
            }
        ]
    }
    ```
  </Tab>

  <Tab title="Response">
    ```bash
    (Status 200)
    ```

    ```json
    {
        "displayName": "acme-devs",
        "id": "ghi",
        "members": [
            {
                "Value": "abc",
                "Ref": "",
                "Type": "",
                "Display": "dev-user1"
            },
            {
                "Value": "def",
                "Ref": "",
                "Type": "",
                "Display": "dev-user2"
            }
        ],
        "meta": {
            "resourceType": "Group",
            "created": "2023-10-01T00:00:00Z",
            "lastModified": "2023-10-01T00:01:00Z",
            "location": "Groups/ghi"
        },
        "schemas": [
            "urn:ietf:params:scim:schemas:core:2.0:Group"
        ]
    }
    ```
  </Tab>
</Tabs>

**특정 사용자를 팀에서 제거하기**

`dev-user2`를 `acme-devs` 팀에서 제거합니다:

<Note>이 작업은 서비스 계정이 아닌 사용자에게만 동작합니다. 서비스 계정은 W&amp;B 팀 설정에서 관리하세요.</Note>

<Tabs>
  <Tab title="요청">
    ```bash
    PATCH /scim/Groups/{team_id}
    ```

    ```json
    {
        "schemas": ["urn:ietf:params:scim:api:messages:2.0:PatchOp"],
        "Operations": [
            {
                "op": "remove",
                "path": "members[value eq \"{user_id}\"]"
            }
        ]
    }
    ```
  </Tab>

  <Tab title="응답">
    ```bash
    (Status 200)
    ```

    ```json
    {
        "displayName": "acme-devs",
        "id": "ghi",
        "members": [
            {
                "Value": "abc",
                "Display": "dev-user1"
            }
        ],
        "meta": {
            "resourceType": "Group",
            "created": "2023-10-01T00:00:00Z",
            "lastModified": "2023-10-01T00:01:00Z",
            "location": "Groups/ghi"
        },
        "schemas": [
            "urn:ietf:params:scim:schemas:core:2.0:Group"
        ]
    }
    ```
  </Tab>
</Tabs>

**팀에서 모든 사용자 제거**

`acme-devs`에서 모든 사용자를 제거하려면:

<Note>이 작업은 사용자에게만 적용되며, 서비스 계정에는 적용되지 않습니다. 서비스 계정은 W&amp;B Team 설정에서 관리하세요.</Note>

<Tabs>
  <Tab title="요청">
    ```bash
    PATCH /scim/Groups/{team_id}
    ```

    ```json
    {
        "schemas": ["urn:ietf:params:scim:api:messages:2.0:PatchOp"],
        "Operations": [
            {
                "op": "remove",
                "path": "members"
            }
        ]
    }
    ```
  </Tab>

  <Tab title="응답">
    ```bash
    (Status 200)
    ```

    ```json
    {
        "displayName": "acme-devs",
        "id": "ghi",
        "members": null,
        "meta": {
            "resourceType": "Group",
            "created": "2023-10-01T00:00:00Z",
            "lastModified": "2023-10-01T00:01:00Z",
            "location": "Groups/ghi"
        },
        "schemas": [
            "urn:ietf:params:scim:schemas:core:2.0:Group"
        ]
    }
    ```
  </Tab>
</Tabs>

<div id="delete-team">
  ### 팀 삭제
</div>

* 현재 SCIM API에서는 팀과 연결된 추가 데이터 때문에 팀 삭제를 지원하지 않습니다. 모든 데이터를 삭제하려는 것이 확실한 경우 앱에서 팀을 삭제하십시오.

<div id="role-resource">
  ## 역할 리소스
</div>

SCIM 역할 리소스는 W&amp;B 커스텀 역할에 매핑됩니다. 앞에서 언급했듯이 `/Roles` 엔드포인트는 공식 SCIM 스키마의 일부가 아니며, W&amp;B 조직에서 커스텀 역할을 자동으로 관리할 수 있도록 W&amp;B가 `/Roles` 엔드포인트를 추가로 제공합니다.

<div id="get-custom-role">
  ### 커스텀 역할 가져오기
</div>

역할의 고유 ID를 제공하면 해당 커스텀 역할 정보를 조회합니다.

<div id="endpoint">
  #### 엔드포인트
</div>

* **URL**: `<host-url>/scim/Roles/{id}`
* **Method**: GET

#### 예시

<Tabs>
  <Tab title="요청">
    ```bash
    GET /scim/Roles/abc
    ```
  </Tab>

  <Tab title="응답">
    ```bash
    (Status 200)
    ```

    ```json
    {
        "description": "A sample custom role for example",
        "id": "Um9sZTo3",
        "inheritedFrom": "member", // 사전 정의된 역할을 나타냅니다
        "meta": {
            "resourceType": "Role",
            "created": "2023-11-20T23:10:14Z",
            "lastModified": "2023-11-20T23:31:23Z",
            "location": "Roles/Um9sZTo3"
        },
        "name": "Sample custom role",
        "organizationID": "T3JnYW5pemF0aW9uOjE0ODQ1OA==",
        "permissions": [
            {
                "name": "artifact:read",
                "isInherited": true // member 사전 정의된 역할에서 상속됨
            },
            ...
            ...
            {
                "name": "project:update",
                "isInherited": false // 관리자가 추가한 사용자 지정 권한
            }
        ],
        "schemas": [
            ""
        ]
    }
    ```
  </Tab>
</Tabs>

<div id="list-custom-roles">
  ### 커스텀 역할 목록 조회
</div>

W&amp;B 조직에 정의된 모든 커스텀 역할 정보를 조회합니다.

<div id="endpoint">
  #### 엔드포인트
</div>

* **URL**: `<host-url>/scim/Roles`
* **메서드**: GET

#### 예시

<Tabs>
  <Tab title="요청">
    ```bash
    GET /scim/Roles
    ```
  </Tab>

  <Tab title="응답">
    ```bash
    (Status 200)
    ```

    ```json
    {
       "Resources": [
            {
                "description": "예시용 샘플 사용자 지정 역할입니다",
                "id": "Um9sZTo3",
                "inheritedFrom": "member", // 사용자 지정 역할이 상속받는 미리 정의된 역할을 나타냅니다
                "meta": {
                    "resourceType": "Role",
                    "created": "2023-11-20T23:10:14Z",
                    "lastModified": "2023-11-20T23:31:23Z",
                    "location": "Roles/Um9sZTo3"
                },
                "name": "샘플 사용자 지정 역할",
                "organizationID": "T3JnYW5pemF0aW9uOjE0ODQ1OA==",
                "permissions": [
                    {
                        "name": "artifact:read",
                        "isInherited": true // member 미리 정의된 역할에서 상속됨
                    },
                    ...
                    ...
                    {
                        "name": "project:update",
                        "isInherited": false // 관리자가 추가한 사용자 지정 권한
                    }
                ],
                "schemas": [
                    ""
                ]
            },
            {
                "description": "예시용 또 다른 샘플 사용자 지정 역할입니다",
                "id": "Um9sZToxMg==",
                "inheritedFrom": "viewer", // 사용자 지정 역할이 상속받는 미리 정의된 역할을 나타냅니다
                "meta": {
                    "resourceType": "Role",
                    "created": "2023-11-21T01:07:50Z",
                    "location": "Roles/Um9sZToxMg=="
                },
                "name": "샘플 사용자 지정 역할 2",
                "organizationID": "T3JnYW5pemF0aW9uOjE0ODQ1OA==",
                "permissions": [
                    {
                        "name": "launchagent:read",
                        "isInherited": true // viewer 미리 정의된 역할에서 상속됨
                    },
                    ...
                    ...
                    {
                        "name": "run:stop",
                        "isInherited": false // 관리자가 추가한 사용자 지정 권한
                    }
                ],
                "schemas": [
                    ""
                ]
            }
        ],
        "itemsPerPage": 9999,
        "schemas": [
            "urn:ietf:params:scim:api:messages:2.0:ListResponse"
        ],
        "startIndex": 1,
        "totalResults": 2
    }
    ```
  </Tab>
</Tabs>

<div id="create-custom-role">
  ### 사용자 정의 역할 생성
</div>

* **Endpoint**: **`<host-url>/scim/Roles`**
* **Method**: POST
* **Description**: W&amp;B 조직에 새 사용자 정의 역할을 생성합니다.
* **Supported Fields**:

| Field | Type | Required |
| --- | --- | --- |
| `name` | String | 사용자 정의 역할 이름 |
| `description` | String | 사용자 정의 역할 설명 |
| `permissions` | Object array | 각 객체에 `w&bobject:operation` 형식의 값을 갖는 문자열 필드 `name`이 포함된 권한 객체 배열입니다. 예를 들어, W&amp;B 실행 삭제 작업에 대한 권한 객체의 경우 `name` 값은 `run:delete`입니다. |
| `inheritedFrom` | String | 사용자 정의 역할이 상속받을 사전 정의된 역할입니다. `member` 또는 `viewer`가 될 수 있습니다. |

#### 예시

<Tabs>
  <Tab title="요청">
    ```bash
    POST /scim/Roles
    ```

    ```json
    {
        "schemas": ["urn:ietf:params:scim:schemas:core:2.0:Role"],
        "name": "Sample custom role",
        "description": "A sample custom role for example",
        "permissions": [
            {
                "name": "project:update"
            }
        ],
        "inheritedFrom": "member"
    }
    ```
  </Tab>

  <Tab title="응답">
    ```bash
    (Status 201)
    ```

    ```json
    {
        "description": "A sample custom role for example",
        "id": "Um9sZTo3",
        "inheritedFrom": "member", // 미리 정의된 역할을 의미합니다
        "meta": {
            "resourceType": "Role",
            "created": "2023-11-20T23:10:14Z",
            "lastModified": "2023-11-20T23:31:23Z",
            "location": "Roles/Um9sZTo3"
        },
        "name": "Sample custom role",
        "organizationID": "T3JnYW5pemF0aW9uOjE0ODQ1OA==",
        "permissions": [
            {
                "name": "artifact:read",
                "isInherited": true // member 미리 정의된 역할에서 상속됨
            },
            ...
            ...
            {
                "name": "project:update",
                "isInherited": false // 관리자가 추가한 사용자 정의 권한
            }
        ],
        "schemas": [
            ""
        ]
    }
    ```
  </Tab>
</Tabs>

<div id="update-custom-role">
  ### 사용자 지정 역할 업데이트
</div>

<div id="add-permissions-to-role">
  #### 역할에 권한 추가
</div>

* **Endpoint**: **`<host-url>/scim/Roles/{id}`**
* **Method**: PATCH
* **Description**: 기존 사용자 정의 역할에 권한을 추가합니다.

<Tabs>
  <Tab title="Request">
    ```bash
    PATCH /scim/Roles/{role_id}
    ```

    ```json
    {
        "schemas": ["urn:ietf:params:scim:api:messages:2.0:PatchOp"],
        "Operations": [
            {
                "op": "add",
                "path": "permissions",
                "value": [
                    {
                        "name": "project:delete"
                    },
                    {
                        "name": "run:stop"
                    }
                ]
            }
        ]
    }
    ```
  </Tab>

  <Tab title="Response">
    ```bash
    (Status 200)
    ```

    새 권한이 추가된 업데이트된 역할을 반환합니다.
  </Tab>
</Tabs>

<div id="remove-a-permission-from-a-role">
  #### 역할에서 권한 제거
</div>

* **엔드포인트**: **`<host-url>/scim/Roles/{id}`**
* **메서드**: PATCH
* **설명**: 기존 사용자 정의 역할에서 권한을 제거합니다.

<Tabs>
  <Tab title="요청">
    ```bash
    PATCH /scim/Roles/{role_id}
    ```

    ```json
    {
        "schemas": ["urn:ietf:params:scim:api:messages:2.0:PatchOp"],
        "Operations": [
            {
                "op": "remove",
                "path": "permissions",
                "value": [
                    {
                        "name": "project:update"
                    }
                ]
            }
        ]
    }
    ```
  </Tab>

  <Tab title="응답">
    ```bash
    (Status 200)
    ```

    지정된 권한이 제거된 최신 역할을 반환합니다.
  </Tab>
</Tabs>

<div id="replace-custom-role">
  ### 사용자 정의 역할 대체
</div>

* **Endpoint**: **`<host-url>/scim/Roles/{id}`**
* **Method**: PUT
* **Description**: 사용자 정의 역할 정의 전체를 대체합니다.

<Tabs>
  <Tab title="요청">
    ```bash
    PUT /scim/Roles/{role_id}
    ```

    ```json
    {
        "schemas": ["urn:ietf:params:scim:schemas:core:2.0:Role"],
        "name": "Updated custom role",
        "description": "Updated description for the custom role",
        "permissions": [
            {
                "name": "project:read"
            },
            {
                "name": "run:read"
            },
            {
                "name": "artifact:read"
            }
        ],
        "inheritedFrom": "viewer"
    }
    ```
  </Tab>

  <Tab title="응답">
    ```bash
    (Status 200)
    ```

    완전히 대체된 역할 정의를 반환합니다.
  </Tab>
</Tabs>

<div id="delete-custom-role">
  ### 사용자 지정 역할 삭제
</div>

W&amp;B 조직에서 사용자 지정 역할을 삭제합니다. **주의해서 사용하십시오.** 이 작업을 수행하면, 해당 사용자 지정 역할이 상속받았던 사전 정의된 역할이 이전에 그 사용자 지정 역할이 부여되어 있던 모든 사용자에게 대신 할당됩니다.

<div id="endpoint">
  #### 엔드포인트
</div>

* **URL**: `<host-url>/scim/Roles/{id}`
* **메서드**: DELETE

#### 예시

<Tabs>
  <Tab title="요청">
    ```bash
    DELETE /scim/Roles/abc
    ```
  </Tab>

  <Tab title="응답">
    ```bash
    (Status 204 No Content)
    ```
  </Tab>
</Tabs>

<div id="advanced-features">
  ## 고급 기능
</div>

<div id="etag-support">
  ### ETag 지원
</div>

SCIM API는 동시 수정으로 인한 충돌을 방지하기 위한 조건부 업데이트에 ETag를 지원합니다. ETag는 `ETag` 응답 헤더와 `meta.version` 필드에 반환됩니다.

<div id="etags">
  #### ETags
</div>

ETag을 사용하려면:

1. **현재 ETag 가져오기**: 리소스를 GET할 때 응답의 ETag 헤더 값을 확인합니다.
2. **조건부 업데이트**: 리소스를 업데이트할 때 `If-Match` 헤더에 해당 ETag를 포함합니다.

#### 예시

```
# 사용자 가져오기 및 ETag 확인
GET /scim/Users/abc
# 응답에 포함: ETag: W/"xyz123"

# ETag로 업데이트
PATCH /scim/Users/abc
If-Match: W/"xyz123"

{
    "schemas": ["urn:ietf:params:scim:api:messages:2.0:PatchOp"],
    "Operations": [
        {
            "op": "replace",
            "path": "organizationRole",
            "value": "admin"
        }
    ]
}
```

`412 Precondition Failed` 오류 응답은 해당 리소스가 사용자가 조회한 이후에 변경되었음을 나타냅니다.

<div id="error-handling">
  ### 오류 처리
</div>

SCIM API는 표준 SCIM 오류 응답을 반환합니다:

| Status Code | Description |
|-------------|-------------|
| `200` | 성공 |
| `201` | 생성됨 |
| `204` | 콘텐츠 없음 (삭제 성공) |
| `400` | 잘못된 요청 - 유효하지 않은 매개변수 또는 요청 본문 |
| `401` | 인증 실패 - 인증에 실패함 |
| `403` | 금지됨 - 권한 부족 |
| `404` | 찾을 수 없음 - 리소스를 찾을 수 없음 |
| `409` | 충돌 - 리소스가 이미 존재함 |
| `412` | 사전 조건 실패 - ETag 불일치 |
| `500` | 내부 서버 오류 |

<div id="implementation-differences-per-deployment-type">
  ### 배포 유형별 구현 차이점
</div>

W&amp;B는 두 가지 SCIM API 구현을 별도로 제공하며, 두 구현 간에 지원되는 기능이 다릅니다:

| 기능                      | 전용 클라우드     | 자가 관리형   |
|---------------------------|-------------------|---------------|
| 사용자 이메일 변경        |        -          |    ✓    |
| 사용자 표시 이름 변경     |        -          |    ✓    |
| 사용자 비활성화           |    ✓        |    ✓    |
| 사용자 재활성화           |        -          |    ✓    |
| 사용자당 여러 이메일      |    ✓        |      -        |

<div id="limitations">
  ## 제한 사항
</div>

* **최대 결과 수**: 요청당 최대 9,999개 항목입니다.
* **Single-tenant 환경**: 사용자당 하나의 이메일 주소만 지원합니다.
* **팀 삭제**: SCIM을 통해는 지원되지 않습니다(대신 W&amp;B 웹 인터페이스를 사용하세요).
* **사용자 재활성화**: Multi-tenant Cloud 환경에서는 지원되지 않습니다.
* **좌석(시트) 한도**: 조직 좌석 한도에 도달하면 작업이 실패할 수 있습니다.