---
title: 사용자 지정 차트 개요
description: Vega 시각화를 사용해 W&B 프로젝트에서 사용자 지정 차트 만들기
---

W&amp;B 프로젝트에서 사용자 지정 차트를 만드세요. 임의의 데이터 테이블을 로깅한 뒤 원하는 방식으로 정확하게 시각화할 수 있습니다. [Vega](https://vega.github.io/vega/)의 강력한 기능을 활용해 폰트, 색상, 툴팁의 세부 사항까지 제어하세요.

* 코드: 예제 [Colab 노트북](https://tiny.cc/custom-charts)을 사용해 보세요.
* 동영상: [워크스루 영상](https://www.youtube.com/watch?v=3-N9OV6bkSM)을 시청하세요.
* 예제: Keras와 Sklearn을 사용하는 빠른 [데모 노트북](https://colab.research.google.com/drive/1g-gNGokPWM2Qbc8p1Gofud0_5AoZdoSD?usp=sharing)

<Frame>
  <img src="/images/app_ui/supported_charts.png" alt="vega.github.io/vega에서 지원하는 차트" max-width="90%" />
</Frame>

<div id="how-it-works">
  ### 작동 방식
</div>

1. **데이터 기록**: 스크립트에서 [config](/ko/models/track/config/)와 summary 데이터를 기록합니다.
2. **차트 사용자 지정**: [GraphQL](https://graphql.org) 쿼리로 기록된 데이터를 가져옵니다. 강력한 시각화 문법인 [Vega](https://vega.github.io/vega/)로 쿼리 결과를 시각화합니다.
3. **차트 기록**: 스크립트에서 `wandb.plot_table()`을 호출해 직접 만든 프리셋 차트를 기록합니다.

<Frame>
  <img src="/images/app_ui/pr_roc.png" alt="PR 및 ROC 곡선" />
</Frame>

예상한 데이터가 표시되지 않는다면, 찾고 있는 열이 선택한 실행에서 기록되지 않았을 수 있습니다. 차트를 저장한 다음 실행 테이블로 돌아가 **eye(눈 모양)** 아이콘을 사용해 선택한 실행을 확인하세요.

<div id="log-charts-from-a-script">
  ## 스크립트에서 차트 로그 남기기
</div>

<div id="builtin-presets">
  ### 내장 프리셋
</div>

W&amp;B에는 스크립트에서 직접 로깅할 수 있는 여러 가지 내장 차트 프리셋이 있습니다. 여기에는 선 그래프, 산점도, 막대 그래프, 히스토그램, PR 곡선, ROC 곡선 등이 포함됩니다.

<Tabs>
  <Tab title="선형 차트">
    `wandb.plot.line()`

    커스텀 선 그래프를 로깅합니다. 임의의 x, y 축에서, 순서가 있는 (x, y) 점들의 목록을 선으로 연결해 표시한 그래프입니다.

    ```python
    with wandb.init() as run:
      data = [[x, y] for (x, y) in zip(x_values, y_values)]
      table = wandb.Table(data=data, columns=["x", "y"])
      run.log(
          {
              "my_custom_plot_id": wandb.plot.line(
                  table, "x", "y", title="Custom Y vs X Line Plot"
              )
          }
      )
    ```

    라인 플롯(line plot)은 임의의 두 차원을 기준으로 곡선을 기록합니다. 두 개의 값 리스트를 서로에 대해 플롯할 때는, 각 리스트의 값 개수가 반드시 정확히 일치해야 합니다(예를 들어, 각 점에는 x와 y가 모두 있어야 합니다).

    <Frame>
      <img src="/images/app_ui/line_plot.png" alt="사용자 지정 라인 플롯" />
    </Frame>

    [예시 리포트 보기](https://wandb.ai/wandb/plots/reports/Custom-Line-Plots--VmlldzoyNjk5NTA) 또는 [예시 Google Colab 노트북 실행해 보기](https://tiny.cc/custom-charts).
  </Tab>

  <Tab title="산점도">
    `wandb.plot.scatter()`

    임의의 두 축 x와 y 위의 점 (x, y) 목록으로 구성된 사용자 정의 산점도를 기록합니다.

    ```python
    with wandb.init() as run:
      data = [[x, y] for (x, y) in zip(class_x_prediction_scores, class_y_prediction_scores)]
      table = wandb.Table(data=data, columns=["class_x", "class_y"])
      run.log({"my_custom_id": wandb.plot.scatter(table, "class_x", "class_y")})
    ```

    이를 사용해서 임의의 두 차원에 대한 산점도 포인트를 로그로 남길 수 있습니다. 두 개의 값 리스트를 서로 대응시켜 그리는 경우, 리스트에 있는 값의 개수가 정확히 일치해야 합니다(예: 각 점에는 x와 y가 모두 있어야 합니다).

    <Frame>
      <img src="/images/app_ui/demo_scatter_plot.png" alt="Scatter plot" />
    </Frame>

    [예시 리포트 보기](https://wandb.ai/wandb/plots/reports/Custom-Scatter-Plots--VmlldzoyNjk5NDQ) 또는 [예시 Google Colab 노트북 사용해 보기](https://tiny.cc/custom-charts).
  </Tab>

  <Tab title="막대 차트">
    `wandb.plot.bar()`

    레이블이 있는 값 목록을 막대로 표시하는 커스텀 막대 차트를 몇 줄의 코드만으로 바로 로깅합니다:

    ```python
    with wandb.init() as run:
      data = [[label, val] for (label, val) in zip(labels, values)]
      table = wandb.Table(data=data, columns=["label", "value"])
      run.log(
          {
              "my_bar_chart_id": wandb.plot.bar(
                  table, "label", "value", title="Custom Bar Chart"
              )
          }
      )
    ```

    이 기능을 사용하면 임의의 막대 차트를 로깅할 수 있습니다. 목록(리스트)에 포함된 레이블과 값의 개수는 반드시 정확히 일치해야 합니다(예를 들어, 각 데이터 포인트에는 둘 다가 있어야 합니다).

    <Frame>
      <img src="/images/app_ui/demo_bar_plot.png" alt="데모 막대 차트" />
    </Frame>

    [예제 리포트를 확인하세요](https://wandb.ai/wandb/plots/reports/Custom-Bar-Charts--VmlldzoyNzExNzk) 또는 [예제 Google Colab 노트북을 실행해 보세요](https://tiny.cc/custom-charts).
  </Tab>

  <Tab title="히스토그램">
    `wandb.plot.histogram()`

    몇 줄의 코드만으로 바로 사용자 정의 히스토그램을 로그로 남길 수 있습니다. 값 리스트를 발생 빈도/횟수에 따라 구간(bin)으로 나눠 집계합니다. 예를 들어, 예측 신뢰도 점수(`scores`) 리스트가 있고 그 분포를 시각화하고 싶다고 해 보겠습니다:

    ```python
    with wandb.init() as run:
      data = [[s] for s in scores]
      table = wandb.Table(data=data, columns=["scores"])
      run.log({"my_histogram": wandb.plot.histogram(table, "scores", title=None)})
    ```

    이를 사용하여 임의의 히스토그램을 로그로 남길 수 있습니다. `data`는 행과 열로 이루어진 2D 배열을 지원하도록 설계된 리스트의 리스트라는 점에 유의하세요.

    <Frame>
      <img src="/images/app_ui/demo_custom_chart_histogram.png" alt="Custom histogram" />
    </Frame>

    [예시 리포트 보기](https://wandb.ai/wandb/plots/reports/Custom-Histograms--VmlldzoyNzE0NzM) 또는 [예시 Google Colab 노트북 실행해 보기](https://tiny.cc/custom-charts).
  </Tab>

  <Tab title="정밀도-재현율(PR) 곡선">
    `wandb.plot.pr_curve()`

    한 줄 코드로 [Precision-Recall 곡선](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.precision_recall_curve.html#sklearn.metrics.precision_recall_curve)을 그립니다.

    ```python
    with wandb.init() as run:
      plot = wandb.plot.pr_curve(ground_truth, predictions, labels=None, classes_to_plot=None)

      run.log({"pr": plot})
    ```

    코드에서 다음 항목에 접근할 수 있을 때마다 이를 로깅할 수 있습니다:

    * 예제 집합에 대한 모델의 예측 점수(`predictions`)
    * 해당 예제들에 대한 정답 레이블(`ground_truth`)
    * (선택 사항) 레이블 인덱스 0이 cat, 1이 dog, 2가 bird 등을 의미하는 경우의 레이블/클래스 이름 목록(`labels=["cat", "dog", "bird"...]`)
    * (선택 사항) 플롯에서 시각화할 레이블의 부분집합(리스트 형식 그대로)

    <Frame>
      <img src="/images/app_ui/demo_average_precision_lines.png" alt="정밀도-재현율 곡선" />
    </Frame>

    [예시 리포트 보기](https://wandb.ai/wandb/plots/reports/Plot-Precision-Recall-Curves--VmlldzoyNjk1ODY) 또는 [예시 Google Colab 노트북 실행해 보기](https://colab.research.google.com/drive/1mS8ogA3LcZWOXchfJoMrboW3opY1A8BY?usp=sharing).
  </Tab>

  <Tab title="ROC 곡선">
    `wandb.plot.roc_curve()`

    한 줄의 코드로 [ROC 곡선](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.roc_curve.html#sklearn.metrics.roc_curve)을 생성합니다:

    ```python
    with wandb.init() as run:
      # ground_truth는 실제 레이블 목록이고, predictions는 예측 점수 목록입니다
      ground_truth = [0, 1, 0, 1, 0, 1]
      predictions = [0.1, 0.4, 0.35, 0.8, 0.7, 0.9]

      # ROC 곡선 플롯 생성
      # labels는 클래스 이름의 선택적 목록이고, classes_to_plot은 시각화할 레이블의 선택적 부분 집합입니다
      plot = wandb.plot.roc_curve(
          ground_truth, predictions, labels=None, classes_to_plot=None
      )

      run.log({"roc": plot})
    ```

    코드에서 다음에 접근할 수 있을 때마다 이 차트를 로그로 남길 수 있습니다:

    * 예제 집합에 대한 모델의 예측 점수(`predictions`)
    * 해당 예제들에 대한 정답 레이블(`ground_truth`)
    * (선택 사항) 레이블 인덱스 0이 cat, 1이 dog, 2가 bird 등일 때의 레이블/클래스 이름 목록 (`labels=["cat", "dog", "bird"...]`)
    * (선택 사항) 플롯에서 시각화할 이 레이블들의 부분 집합(역시 리스트 형식으로)

    <Frame>
      <img src="/images/app_ui/demo_custom_chart_roc_curve.png" alt="ROC curve" />
    </Frame>

    [예시 리포트 보기](https://wandb.ai/wandb/plots/reports/Plot-ROC-Curves--VmlldzoyNjk3MDE) 또는 [예시 Google Colab 노트북 사용해 보기](https://colab.research.google.com/drive/1_RMppCqsA8XInV_jhJz32NCZG6Z5t1RO?usp=sharing).
  </Tab>
</Tabs>

<div id="custom-presets">
  ### 사용자 지정 프리셋
</div>

기본 제공 프리셋을 조정하거나 새 프리셋을 만든 다음 차트를 저장하세요. 스크립트에서 해당 사용자 지정 프리셋으로 직접 데이터를 로깅하려면 차트 ID를 사용하세요. [예제 Google Colab 노트북을 실행해 보세요](https://tiny.cc/custom-charts).

```python
# 플롯할 열이 포함된 테이블 생성
table = wandb.Table(data=data, columns=["step", "height"])

# 테이블의 열을 차트의 필드에 매핑
fields = {"x": "step", "value": "height"}

# 테이블을 사용하여 새 커스텀 차트 프리셋 채우기
# 저장된 차트 프리셋을 사용하려면 vega_spec_name을 변경하세요
my_custom_chart = wandb.plot_table(
    vega_spec_name="carey/new_chart",
    data_table=table,
    fields=fields,
)
```

<Frame>
  <img src="/images/app_ui/custom_presets.png" alt="사용자 지정 차트 프리셋" max-width="90%" />
</Frame>

<div id="log-data">
  ## 로그 데이터
</div>

스크립트에서 다음과 같은 데이터 유형을 로그하고, 커스텀 차트에서 사용할 수 있습니다:

* **Config**: 실험의 초기 설정(독립 변수)입니다. 여기에는 학습 시작 시 `wandb.Run.config`에 키로 기록한 모든 명명된 필드가 포함됩니다. 예: `wandb.Run.config.learning_rate = 0.0001`
* **Summary**: 학습 중에 로깅되는 단일 값(결과 또는 종속 변수)입니다. 예: `wandb.Run.log({"val_acc" : 0.8})`. 학습 중에 `wandb.Run.log()`를 통해 이 키에 여러 번 값을 쓰면, Summary는 해당 키의 최종 값으로 설정됩니다.
* **History**: 로깅된 스칼라 값의 전체 시계열은 `history` 필드를 통해 쿼리에서 사용할 수 있습니다.
* **summaryTable**: 여러 값의 목록을 로깅해야 하는 경우 `wandb.Table()`을 사용해 데이터를 저장한 다음, 커스텀 패널에서 이를 쿼리하세요.
* **historyTable**: 히스토리 데이터를 확인해야 하는 경우 커스텀 차트 패널에서 `historyTable`을 쿼리하세요. 매번 `wandb.Table()`을 호출하거나 커스텀 차트를 로깅할 때마다 해당 스텝의 히스토리에 새 테이블이 생성됩니다.

<div id="how-to-log-a-custom-table">
  ### 커스텀 테이블을 로깅하는 방법
</div>

`wandb.Table()`을 사용해 데이터를 2차원 배열 형태로 로깅합니다. 일반적으로 이 테이블의 각 행은 하나의 데이터 포인트를 나타내고, 각 열은 차트로 표시하려는 각 데이터 포인트의 관련 필드/차원을 나타냅니다. 커스텀 패널을 구성하면 전체 테이블은 `wandb.Run.log()`에 전달한 키 이름(아래 예시의 `custom_data_table`)으로 접근할 수 있고, 개별 필드는 열 이름(`x`, `y`, `z`)으로 접근할 수 있습니다. 실험 전체에 걸쳐 여러 시점에서 테이블을 로깅할 수 있습니다. 각 테이블의 최대 크기는 10,000행입니다. [Google Colab에서 예제를 실행해 보세요](https://tiny.cc/custom-charts).

```python
with wandb.init() as run:
  # 커스텀 데이터 테이블 로깅
  my_custom_data = [[x1, y1, z1], [x2, y2, z2]]
  run.log(
      {"custom_data_table": wandb.Table(data=my_custom_data, columns=["x", "y", "z"])}
  )
```

<div id="customize-the-chart">
  ## 차트 사용자 지정
</div>

먼저 새 사용자 지정 차트를 추가한 다음, 현재 화면에 표시된 실행에서 데이터를 선택하도록 쿼리를 편집합니다. 이 쿼리는 [GraphQL](https://graphql.org)을 사용해 실행의 config, summary, history 필드에서 데이터를 가져옵니다.

<Frame>
  <img src="/images/app_ui/customize_chart.gif" alt="Custom chart creation" max-width="90%" />
</Frame>

<div id="custom-visualizations">
  ### 커스텀 시각화
</div>

오른쪽 상단의 **Chart**를 선택해 기본 프리셋으로 시작합니다. 이어서 **Chart fields**를 선택해 쿼리에서 불러온 데이터를 차트의 해당 필드에 매핑합니다.

아래 이미지는 메트릭을 선택한 다음 이를 아래의 막대 차트 필드에 매핑하는 예시를 보여줍니다.

<Frame>
  <img src="/images/app_ui/demo_make_a_custom_chart_bar_chart.gif" alt="커스텀 막대 차트 만들기" max-width="90%" />
</Frame>

<div id="how-to-edit-vega">
  ### Vega를 편집하는 방법
</div>

패널 상단에서 **Edit**을 클릭해 [Vega](https://vega.github.io/vega/) 편집 모드로 들어갑니다. 여기에서 UI에 대화형 차트를 생성하는 [Vega specification](https://vega.github.io/vega/docs/specification/)을 정의할 수 있습니다. 차트의 모든 요소를 변경할 수 있습니다. 예를 들어 제목을 바꾸거나, 다른 색 구성표를 선택하거나, 연결된 선 대신 일련의 점으로 곡선을 표시할 수 있습니다. 또한 Vega transform을 사용해 값 배열을 히스토그램 빈으로 구간화하는 등 데이터 자체를 변경할 수도 있습니다. 패널 미리보기는 실시간으로 업데이트되므로, Vega spec이나 쿼리를 편집하면서 변경사항의 효과를 바로 확인할 수 있습니다. [Vega documentation and tutorials](https://vega.github.io/vega/)를 참고하세요.

**필드 참조**

W&amp;B에서 차트로 데이터를 가져오려면, Vega spec 어디에든 `"${field:<field-name>}"` 형식의 템플릿 문자열을 추가하세요. 그러면 오른쪽 **Chart Fields** 영역에 드롭다운이 생성되며, 사용자는 이를 통해 Vega에 매핑할 쿼리 결과 열을 선택할 수 있습니다.

필드의 기본값을 설정하려면 다음 구문을 사용하세요: `"${field:<field-name>:<placeholder text>}"`

<div id="saving-chart-presets">
  ### 차트 프리셋 저장
</div>

모달 하단에 있는 버튼을 클릭해 특정 시각화 패널에 변경 사항을 적용합니다. 또는 Vega 사양(Vega spec)을 저장해 프로젝트 내 다른 곳에서 사용할 수도 있습니다. 재사용 가능한 차트 정의를 저장하려면 Vega 편집기 상단에서 **Save as**를 클릭하고 프리셋 이름을 입력합니다.

<div id="articles-and-guides">
  ## 아티클 및 가이드
</div>

1. [W&amp;B 머신러닝 시각화 IDE](https://wandb.ai/wandb/posts/reports/The-W-B-Machine-Learning-Visualization-IDE--VmlldzoyNjk3Nzg)
2. [NLP 어텐션 기반 모델 시각화](https://wandb.ai/kylegoyette/gradientsandtranslation2/reports/Visualizing-NLP-Attention-Based-Models-Using-Custom-Charts--VmlldzoyNjg2MjM)
3. [어텐션이 그래디언트 흐름에 미치는 영향 시각화](https://wandb.ai/kylegoyette/gradientsandtranslation/reports/Visualizing-The-Effect-of-Attention-on-Gradient-Flow-Using-Custom-Charts--VmlldzoyNjg1NDg)
4. [임의 곡선 로깅](https://wandb.ai/stacey/presets/reports/Logging-Arbitrary-Curves--VmlldzoyNzQyMzA)

<div id="common-use-cases">
  ## 일반적인 사용 사례
</div>

* 오차 막대가 있는 막대 그래프를 사용자 지정하기
* 사용자 지정 x-y 좌표가 필요한 모델 검증 지표 표시하기 (예: precision-recall 곡선)
* 서로 다른 두 모델/실험의 데이터 분포를 히스토그램으로 겹쳐서 표시하기
* 학습 중 여러 시점의 스냅샷을 통해 지표 변화를 보여주기
* 아직 W&amp;B에 없는 고유한 시각화를 만들고, 가능하다면 전 세계와 공유하기