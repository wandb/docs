---
description: 선 그래프에서 스무딩을 사용해 노이즈가 많은 데이터의 추세를 확인합니다.
title: 선 그래프 스무딩
---

W&B는 다음과 같은 여러 가지 스무딩을 지원합니다:

- [시간 가중 지수 이동 평균(Time Weighted Exponential Moving Average, TWEMA) 스무딩](#time-weighted-exponential-moving-average-twema-smoothing-default) 
- [가우시안 스무딩](#gaussian-smoothing)
- [이동 평균 스무딩](#running-average-smoothing)
- [지수 이동 평균(Exponential Moving Average, EMA) 스무딩](#exponential-moving-average-ema-smoothing)

[대화형 W&B 리포트](https://wandb.ai/carey/smoothing-example/reports/W-B-Smoothing-Features--Vmlldzo1MzY3OTc)에서 실제 예제를 확인해 보세요.

<Frame>
    <img src="/images/app_ui/beamer_smoothing.gif" alt="여러 스무딩 알고리즘 데모"  />
</Frame>

<div id="time-weighted-exponential-moving-average-twema-smoothing-default">
  ## 시간 가중 지수 이동 평균(TWEMA) 스무딩 (기본값)
</div>

시간 가중 지수 이동 평균(Time-Weighted Exponential Moving Average, TWEMA) 스무딩 알고리즘은 이전 지점들의 가중치를 지수적으로 감소시키는 방식으로 시계열 데이터를 스무딩하는 기법입니다. 이 기법에 대한 자세한 내용은 [Exponential Smoothing](https://www.wikiwand.com/en/Exponential_smoothing)을 참고하세요. 범위는 0에서 1 사이입니다. 시계열 초반 값들이 0으로 치우치지 않도록 편향 보정(de-bias) 항이 추가되어 있습니다.

TWEMA 알고리즘은 선 위의 점 밀도(x축의 단위 범위당 `y` 값의 개수)를 고려합니다. 이를 통해 특성이 서로 다른 여러 선을 동시에 표시할 때도 일관된 스무딩을 적용할 수 있습니다.

다음은 내부적으로 어떻게 동작하는지 보여주는 예시 코드입니다:

```javascript
const smoothingWeight = Math.min(Math.sqrt(smoothingParam || 0), 0.999);
let lastY = yValues.length > 0 ? 0 : NaN;
let debiasWeight = 0;

return yValues.map((yPoint, index) => {
  const prevX = index > 0 ? index - 1 : 0;
  // VIEWPORT_SCALE는 결과를 차트의 x축 범위에 맞게 조정합니다
  const changeInX =
    ((xValues[index] - xValues[prevX]) / rangeOfX) * VIEWPORT_SCALE;
  const smoothingWeightAdj = Math.pow(smoothingWeight, changeInX);

  lastY = lastY * smoothingWeightAdj + yPoint;
  debiasWeight = debiasWeight * smoothingWeightAdj + 1;
  return lastY / debiasWeight;
});
```

앱에서는 [다음과 같이 표시됩니다](https://wandb.ai/carey/smoothing-example/reports/W-B-Smoothing-Features--Vmlldzo1MzY3OTc):

<Frame>
  <img src="/images/app_ui/weighted_exponential_moving_average.png" alt="TWEMA 스무딩 데모" />
</Frame>

<div id="gaussian-smoothing">
  ## 가우시안 스무딩
</div>

가우시안 스무딩(또는 가우시안 커널 스무딩)은 각 포인트의 가중 평균을 계산하는 방식이며, 이때 가중치는 스무딩 파라미터로 지정한 표준편차를 갖는 가우시안 분포를 따릅니다. 스무딩된 값은 각 입력 x 값마다, 해당 지점의 앞뒤에 위치한 포인트들을 함께 고려하여 계산됩니다.

앱에서는 다음과 같이 표시됩니다: [링크](https://wandb.ai/carey/smoothing-example/reports/W-B-Smoothing-Features--Vmlldzo1MzY3OTc#3.-gaussian-smoothing)

<Frame>
    <img src="/images/app_ui/gaussian_smoothing.png" alt="가우시안 스무딩 데모"  />
</Frame>

<div id="running-average-smoothing">
  ## 이동 평균 스무딩
</div>

이동 평균(running average)은 주어진 x 값의 앞뒤 구간(window)에 있는 점들의 평균값으로 각 점을 대체하는 스무딩 알고리즘입니다. 자세한 내용은 위키백과의 ["Boxcar Filter"](https://en.wikipedia.org/wiki/Moving_average)를 참고하세요. 이동 평균에 대해 선택한 매개변수는 이동 평균을 계산할 때 Weights &amp; Biases가 고려해야 할 점의 개수를 의미합니다.

x축 상에서 점들의 간격이 고르지 않다면 대신 가우시안 스무딩을 사용하는 것이 좋습니다.

다음은 이것이 [앱에서 어떻게 보이는지](https://wandb.ai/carey/smoothing-example/reports/W-B-Smoothing-Features--Vmlldzo1MzY3OTc#4.-running-average)에 대한 예시입니다:

<Frame>
    <img src="/images/app_ui/running_average.png" alt="이동 평균 스무딩 데모"  />
</Frame>

<div id="exponential-moving-average-ema-smoothing">
  ## 지수 이동 평균(EMA) 스무딩
</div>

지수 이동 평균(Exponential Moving Average, EMA) 스무딩 알고리즘은 지수 윈도우 함수를 사용하여 시계열 데이터를 스무딩하는 경험적 기법입니다. 이 기법에 대한 자세한 내용은 [Exponential Smoothing](https://www.wikiwand.com/en/Exponential_smoothing)을 참고하세요. 값의 범위는 0에서 1까지입니다. 시계열의 초기 값들이 0 쪽으로 치우치지 않도록 편향 보정(debias) 항을 추가합니다.

많은 경우, EMA 스무딩은 먼저 버킷팅을 한 뒤에 적용하는 것이 아니라, 전체 히스토리를 한 번 스캔한 후에 적용됩니다. 이 방식이 더 정확한 스무딩을 제공하는 경우가 많습니다.

다음과 같은 상황에서는 EMA 스무딩이 대신 버킷팅 이후에 적용됩니다:

* Sampling
* Grouping
* Expressions
* Non-monotonic x-axes
* Time-based x-axes

다음은 내부적으로 어떻게 동작하는지 보여주는 샘플 코드입니다:

```javascript
  data.forEach(d => {
    const nextVal = d;
    last = last * smoothingWeight + (1 - smoothingWeight) * nextVal;
    numAccum++;
    debiasWeight = 1.0 - Math.pow(smoothingWeight, numAccum);
    smoothedData.push(last / debiasWeight);
```

앱에서는 다음과 같이 표시됩니다 [앱에서 보기](https://wandb.ai/carey/smoothing-example/reports/W-B-Smoothing-Features--Vmlldzo1MzY3OTc):

<Frame>
  <img src="/images/app_ui/exponential_moving_average.png" alt="EMA 스무딩 데모" />
</Frame>

<div id="hide-original-data">
  ## 원본 데이터 숨기기
</div>

기본적으로 스무딩되지 않은 원본 데이터가 배경의 흐릿한 선으로 그래프에 표시됩니다. 이 표시를 끄려면 **Show Original**을 클릭하세요.

<Frame>
    <img src="/images/app_ui/demo_wandb_smoothing_turn_on_and_off_original_data.gif" alt="원본 데이터 표시 켜기 또는 끄기"  />
</Frame>