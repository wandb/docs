---
description: W&B를 Docker와 통합하는 방법
title: Docker
---

<div id="docker-integration">
  ## Docker 인테그레이션
</div>

W&B는 코드가 실행된 Docker 이미지에 대한 참조 정보를 저장할 수 있으므로, 이전 실험이 실행되었던 정확한 환경을 그대로 복원할 수 있습니다. wandb 라이브러리는 이 상태를 유지하기 위해 **WANDB_DOCKER** 환경 변수를 확인합니다. 이 상태를 자동으로 설정해 주는 몇 가지 헬퍼 기능을 제공합니다.

<div id="local-development">
  ### 로컬 개발
</div>

`wandb docker`는 도커 컨테이너를 시작하고 wandb 환경 변수를 전달하며, 코드를 마운트하고 wandb가 설치되어 있는지 확인하는 명령입니다. 기본적으로 이 명령은 TensorFlow, PyTorch, Keras, Jupyter가 설치된 도커 이미지를 사용합니다. 동일한 명령을 사용해 사용자 정의 도커 이미지를 시작할 수 있습니다: `wandb docker my/image:latest`. 이 명령은 현재 디렉터리를 컨테이너의 "/app" 디렉터리에 마운트하며, "--dir" 플래그를 사용해 이를 변경할 수 있습니다.

<div id="production">
  ### 프로덕션
</div>

`wandb docker-run` 명령은 프로덕션 환경의 워크로드를 위해 제공됩니다. 이 명령은 `nvidia-docker`를 손쉽게 대체해 사용할 수 있도록 설계되었습니다. `docker run` 명령을 간단히 래핑해 호출에 자격 증명과 **WANDB_DOCKER** 환경 변수를 추가합니다. `--runtime` 플래그를 전달하지 않았고 머신에 `nvidia-docker`가 설치되어 있는 경우, 런타임이 nvidia로 설정되도록 자동으로 처리합니다.

<div id="kubernetes">
  ### Kubernetes
</div>

Kubernetes에서 트레이닝 워크로드를 실행하고 k8s API가 파드에 노출되어 있다면\(기본적으로 그렇습니다\), wandb는 도커 이미지의 다이제스트를 얻기 위해 해당 API를 조회하여 **WANDB_DOCKER** 환경 변수를 자동으로 설정합니다.

<div id="restoring">
  ## 복원
</div>

run이 **WANDB_DOCKER** 환경 변수로 계측되어 있었다면, `wandb restore username/project:run_id`를 호출하면 코드를 복원한 새 브랜치를 체크아웃한 뒤, 트레이닝에 사용된 것과 동일한 Docker 이미지를 원래 사용한 명령이 미리 입력된 상태로 실행합니다.