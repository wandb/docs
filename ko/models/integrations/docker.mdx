---
description: W&B를 Docker와 연동하는 방법.
title: Docker
---

<div id="docker-integration">
  ## Docker 통합
</div>

W&B는 코드가 실행된 Docker 이미지에 대한 포인터를 저장하여, 이전 실험을 실행되었던 정확한 환경에서 그대로 복원할 수 있도록 합니다. wandb 라이브러리는 이 정보를 유지하기 위해 **WANDB_DOCKER** 환경 변수를 참조합니다. 이 값을 자동으로 설정해 주는 몇 가지 헬퍼 함수를 제공합니다.

<div id="local-development">
  ### 로컬 개발
</div>

`wandb docker`는 Docker 컨테이너를 실행하고 wandb 환경 변수를 전달하며, 사용자의 코드를 마운트하고 wandb가 설치되어 있도록 보장하는 명령어입니다. 기본적으로 이 명령어는 TensorFlow, PyTorch, Keras, Jupyter가 설치된 Docker 이미지를 사용합니다. 동일한 명령어를 사용해 자신의 Docker 이미지를 실행할 수도 있습니다: `wandb docker my/image:latest`. 이 명령어는 현재 디렉터리를 컨테이너의 "/app" 디렉터리에 마운트하며, "--dir" 플래그로 이를 변경할 수 있습니다.

<div id="production">
  ### 프로덕션
</div>

`wandb docker-run` 명령은 프로덕션 워크로드를 위해 제공됩니다. 이 명령은 `nvidia-docker`를 그대로 대체할 수 있는 drop-in 대체 명령입니다. 이는 `docker run` 명령을 간단히 래핑하여 호출 시 자격 증명과 **WANDB_DOCKER** 환경 변수를 추가합니다. "--runtime" 플래그를 전달하지 않고 머신에서 `nvidia-docker`를 사용할 수 있는 경우, 런타임이 nvidia로 설정되도록 보장합니다.

<div id="kubernetes">
  ### Kubernetes
</div>

Kubernetes에서 학습 워크로드를 실행하고 k8s API가 Pod에 노출되어 있다면\(이는 기본 설정입니다\). wandb는 Docker 이미지의 다이제스트를 얻기 위해 API를 쿼리하고 **WANDB_DOCKER** 환경 변수를 자동으로 설정합니다.

<div id="restoring">
  ## 복원
</div>

실행에 **WANDB_DOCKER** 환경 변수를 사용해 계측했다면, `wandb restore username/project:run_id`를 호출하면 코드를 복원하는 새 브랜치를 체크아웃한 다음, 원래 사용했던 명령이 미리 설정된 상태로 학습에 사용된 것과 완전히 동일한 Docker 이미지를 실행합니다.