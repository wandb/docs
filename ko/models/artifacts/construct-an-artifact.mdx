---
description: W&B Artifact를 생성하고 기록합니다. 하나 이상의 파일 또는 URI 참조를 Artifact에 추가하는 방법을 알아보세요.
title: 아티팩트 생성
---

W&amp;B Python SDK를 사용해 [W&amp;B 실행](/ko/models/ref/python/experiments/run)에서 Artifact를 생성할 수 있습니다. [파일, 디렉터리, URI, 그리고 병렬 실행에서 생성된 파일을 Artifact에 추가](#add-files-to-an-artifact)할 수 있습니다. 파일을 Artifact에 추가한 다음, Artifact를 W&amp;B Server 또는 [자체 프라이빗 서버](/ko/platform/hosting/hosting-options/self-managed)에 저장합니다. 각 Artifact는 하나의 실행에 연결됩니다.

Amazon S3에 저장된 파일과 같은 외부 파일을 추적하는 방법은 [외부 파일 추적](./track-external-files) 페이지를 참조하세요.

<div id="construct-an-artifact">
  ## 아티팩트 생성하기
</div>

다음 세 단계로 [W&amp;B Artifact](/ko/models/ref/python/experiments/artifact)를 생성합니다:

1. [`wandb.Artifact()`로 아티팩트 Python 객체 생성하기](/ko/models/artifacts/construct-an-artifact#1-create-an-artifact-python-object-with-wandb-artifact)
2. [아티팩트에 하나 이상의 파일 추가하기](/ko/models/artifacts/construct-an-artifact#2-add-one-more-files-to-the-artifact)
3. [아티팩트를 W&amp;B 서버에 저장하기](/ko/models/artifacts/construct-an-artifact#3-save-your-artifact-to-the-w\&b-server)

<div id="1-create-an-artifact-python-object-with-wandbartifact">
  ### 1. `wandb.Artifact()`로 Artifact Python 객체 생성하기
</div>

[`wandb.Artifact()`](/ko/models/ref/python/experiments/artifact) 클래스를 초기화해서 Artifact 객체를 만듭니다. 다음 매개변수를 지정합니다:

* **Name**: 아티팩트의 이름입니다. 이름은 고유하면서도 설명적이고 기억하기 쉬워야 합니다.
* **Type**: 아티팩트의 타입입니다. 타입은 단순하고 설명적이어야 하며, 머신 러닝 파이프라인의 한 단계에 대응해야 합니다. 일반적인 아티팩트 타입에는 `'dataset'` 또는 `'model'`이 있습니다.

<Note>
  W&amp;B는 W&amp;B App에서 유향 비순환 그래프(directed acyclic graph)를 생성하기 위해 제공한 &quot;name&quot;과 &quot;type&quot;을 사용합니다. 자세한 내용은 [아티팩트 그래프 탐색 및 순회](./explore-and-traverse-an-artifact-graph)를 참고하세요.
</Note>

<Warning>
  아티팩트는 타입과 관계없이 동일한 이름을 가질 수 없습니다. 즉, `dataset` 타입의 `cats`라는 이름의 아티팩트를 만들고, 같은 이름을 가진 `model` 타입의 아티팩트를 또 만들 수 없습니다.
</Warning>

아티팩트 객체를 초기화할 때 선택적으로 설명(description)과 메타데이터(metadata)를 제공할 수 있습니다. 사용 가능한 속성과 매개변수에 대한 자세한 정보는 Python SDK Reference Guide의 [`wandb.Artifact`](/ko/models/ref/python/experiments/artifact) 클래스 정의를 참고하세요.

다음 코드 스니펫을 복사해 붙여넣어 아티팩트 객체를 생성하세요. `<name>` 및 `<type>` 플레이스홀더를 원하는 값으로 바꾸세요:

```python
import wandb

# 아티팩트 객체 생성
artifact = wandb.Artifact(name="<name>", type="<type>")
```

<div id="2-add-one-more-files-to-the-artifact">
  ### 2. 아티팩트에 파일을 하나 더 추가하기
</div>

[파일, 디렉터리, 외부 URI 참조(예: Amazon S3) 등](/ko/models/artifacts/construct-an-artifact#add-files-to-an-artifact)을 Artifact 객체에 추가할 수 있습니다.

파일 하나를 추가하려면 Artifact 객체의 [`Artifact.add_file()`](/ko/models/ref/python/experiments/artifact#add_file) 메서드를 사용합니다:

```python
artifact.add_file(local_path="path/to/file.txt", name="<name>")
```

디렉터리를 추가하려면 [`Artifact.add_dir()`](/ko/models/ref/python/experiments/artifact#add_dir) 메서드를 사용하세요:

```python
artifact.add_dir(local_path="path/to/directory", name="<name>")
```

아티팩트에 다양한 파일 유형을 추가하는 방법에 대한 자세한 내용은 다음 섹션인 [아티팩트에 파일 추가하기](/ko/models/artifacts/construct-an-artifact#add-files-to-an-artifact)를 참고하세요.

<div id="3-save-your-artifact-to-the-wb-server">
  ### 3. 아티팩트를 W&amp;B 서버에 저장하기
</div>

아티팩트를 W&amp;B 서버에 저장합니다. 실행(Run) 객체의 [`wandb.Run.log_artifact()`](/ko/models/ref/python/experiments/run#log_artifact) 메서드를 사용하여 아티팩트를 저장합니다.

```python
with wandb.init(project="<project>", job_type="<job-type>") as run:
    run.log_artifact(artifact)
```

<Tip>
  **`wandb.Run.log_artifact()` 또는 `Artifact.save()`를 언제 사용해야 하는지**

  * 특정 실행과 연결된 새로운 아티팩트를 생성하려면 `wandb.Run.log_artifact()`를 사용하세요.
  * 새로운 실행을 생성하지 않고 기존 아티팩트를 업데이트하려면 `Artifact.save()`를 사용하세요.
</Tip>

위 내용을 정리하면, 다음 코드 스니펫에서는 데이터셋 아티팩트를 생성하고 해당 아티팩트에 파일을 추가한 뒤, 아티팩트를 W&amp;B에 저장하는 방법을 보여줍니다.

```python
import wandb

artifact = wandb.Artifact(name="<name>", type="<type>")
artifact.add_file(local_path="path/to/file.txt", name="<name>")
artifact.add_dir(local_path="path/to/directory", name="<name>")

with wandb.init(project="<project>", job_type="<job-type>") as run:
    run.log_artifact(artifact)
```

동일한 이름과 타입으로 아티팩트를 로그할 때마다 W&amp;B는 해당 아티팩트의 새 버전을 생성합니다. 자세한 내용은 [새 아티팩트 버전 생성하기](/ko/models/artifacts/create-a-new-artifact-version)를 참조하세요.

<Warning>
  W&amp;B는 업로드 성능을 위해 `wandb.Run.log_artifact()` 호출을 비동기적으로 수행합니다. 이로 인해 반복문에서 아티팩트를 로그할 때 예상치 못한 동작이 발생할 수 있습니다. 예를 들어 다음과 같습니다:

  ```python
  with wandb.init() as run:
      for i in range(10):
          a = wandb.Artifact(name = "race",
              type="dataset",
              metadata={
                  "index": i,
              },
          )
          # ... 아티팩트 a에 파일을 추가 ...
          run.log_artifact(a)
  ```

  아티팩트 버전 **v0**이 메타데이터에 index가 0인 값을 가진다고는 보장할 수 없습니다. 아티팩트가 임의의 순서로 로그될 수 있기 때문입니다.
</Warning>

<div id="add-files-to-an-artifact">
  ## 아티팩트에 파일 추가하기
</div>

다음 섹션에서는 서로 다른 유형의 객체를 아티팩트에 추가하는 방법을 보여줍니다. 아래 예제를 따라가면서, 다음과 같은 구조를 가진 디렉터리가 있다고 가정해 보겠습니다.

```
root-directory
| - hello.txt
| - images/
| -- | cat.png
| -- | dog.png
| - checkpoints/
| -- | model.h5
| - models/
| -- | model.h5
```

<div id="add-a-single-file">
  ### 단일 파일 추가
</div>

[`wandb.Artifact.add_file()`](/ko/models/ref/python/experiments/artifact#method-artifact-add-file)를 사용하여 단일 로컬 파일을 아티팩트에 추가합니다. `local_path` 매개변수로 파일의 로컬 경로를 지정합니다:

```python
import wandb

# 아티팩트 객체 초기화
artifact = wandb.Artifact(name="<name>", type="<type>")

# 단일 파일 추가
artifact.add_file(local_path="path/file.format")
```

예를 들어, 작업 중인 로컬 디렉터리에 `'hello.txt'`라는 파일이 있다고 가정해 보겠습니다.

```python
artifact.add_file("hello.txt")
```

이제 아티팩트의 내용은 다음과 같습니다:

```
hello.txt
```

원한다면 `name` 매개변수에 다른 이름을 전달하여 아티팩트 객체 내부에서 파일 이름을 변경할 수 있습니다. 이전 예제를 이어서 보면 다음과 같습니다:

```python
artifact.add_file(
    local_path="hello.txt", 
    name="new/path/hello_world.txt"
    )
```

아티팩트는 다음과 같이 저장됩니다:

```
new/path/hello_world.txt
```

다음 표는 API 호출 방식에 따라 아티팩트에 어떤 파일이 포함되는지를 보여줍니다:

| API Call                                                  | 생성된 아티팩트            |
| --------------------------------------------------------- | ------------------- |
| `artifact.new_file('hello.txt')`                          | `hello.txt`         |
| `artifact.add_file('model.h5')`                           | `model.h5`          |
| `artifact.add_file('checkpoints/model.h5')`               | `model.h5`          |
| `artifact.add_file('model.h5', name='models/mymodel.h5')` | `models/mymodel.h5` |

<div id="add-multiple-files">
  ### 여러 파일 추가
</div>

[`wandb.Artifact.add_dir()`](/ko/models/ref/python/experiments/artifact#method-artifact-add-dir) 메서드를 사용해 로컬 디렉터리의 여러 파일을 아티팩트에 추가합니다. 디렉터리의 로컬 경로를 `local_path` 파라미터 인자로 전달합니다.

```python
import wandb

# 아티팩트 객체 초기화
artifact = wandb.Artifact(name="<name>", type="<type>")

# 아티팩트에 로컬 디렉터리 추가
artifact.add_dir(local_path="path/file.format", name="optional-prefix")
```

다음 표는 API 호출에 따라 생성되는 아티팩트 내용이 어떻게 달라지는지 보여줍니다:

| API Call                                    | 생성되는 아티팩트 내용                                                         |
| ------------------------------------------- | -------------------------------------------------------------------- |
| `artifact.add_dir('images')`                | <p><code>cat.png</code></p><p><code>dog.png</code></p>               |
| `artifact.add_dir('images', name='images')` | <p><code>images/cat.png</code></p><p><code>images/dog.png</code></p> |

<div id="add-a-uri-reference">
  ### URI 참조 추가
</div>

W&amp;B 라이브러리가 처리할 수 있는 스킴을 가진 URI인 경우, Artifact는 재현성을 위해 체크섬과 기타 정보를 추적합니다.

[`wandb.Artifact.add_reference()`](/ko/models/ref/python/experiments/artifact#method-artifact-add-reference) 메서드를 사용해 아티팩트에 외부 URI 참조를 추가합니다. `'uri'` 문자열을 사용자의 URI로 바꿉니다. 필요에 따라 name 매개변수로 아티팩트 내에서 원하는 경로를 전달할 수 있습니다.

```python
# URI 참조 추가
artifact.add_reference(uri="uri", name="optional-name")
```

Artifact는 현재 다음과 같은 URI 스킴을 지원합니다:

* `http(s)://`: HTTP를 통해 접근 가능한 파일 경로입니다. HTTP 서버가 `ETag` 및 `Content-Length` 응답 헤더를 지원하는 경우, 아티팩트는 ETag 값 형태의 체크섬과 크기 메타데이터를 추적합니다.
* `s3://`: S3의 객체 또는 객체 프리픽스에 대한 경로입니다. 아티팩트는 참조된 객체에 대해 체크섬과 버전 관리 정보(버킷에 객체 버전 관리가 활성화된 경우)를 추적합니다. 객체 프리픽스는 해당 프리픽스 아래의 객체들을 포함하도록 확장되며, 최대 10,000개 객체까지 포함됩니다.
* `gs://`: GCS의 객체 또는 객체 프리픽스에 대한 경로입니다. 아티팩트는 참조된 객체에 대해 체크섬과 버전 관리 정보(버킷에 객체 버전 관리가 활성화된 경우)를 추적합니다. 객체 프리픽스는 해당 프리픽스 아래의 객체들을 포함하도록 확장되며, 최대 10,000개 객체까지 포함됩니다.

다음 표는 API 호출에 따라 아티팩트 내용이 어떻게 달라지는지 보여줍니다:

| API call                                                                      | 생성되는 아티팩트 내용                                                         |
| ----------------------------------------------------------------------------- | -------------------------------------------------------------------- |
| `artifact.add_reference('s3://my-bucket/model.h5')`                           | `model.h5`                                                           |
| `artifact.add_reference('s3://my-bucket/checkpoints/model.h5')`               | `model.h5`                                                           |
| `artifact.add_reference('s3://my-bucket/model.h5', name='models/mymodel.h5')` | `models/mymodel.h5`                                                  |
| `artifact.add_reference('s3://my-bucket/images')`                             | <p><code>cat.png</code></p><p><code>dog.png</code></p>               |
| `artifact.add_reference('s3://my-bucket/images', name='images')`              | <p><code>images/cat.png</code></p><p><code>images/dog.png</code></p> |

<div id="add-files-to-artifacts-from-parallel-runs">
  ### 병렬 실행에서 아티팩트에 파일 추가하기
</div>

대용량 데이터셋이나 분산 학습의 경우, 여러 개의 병렬 실행이 하나의 아티팩트에 파일을 함께 추가해야 할 수도 있습니다.

```python
import wandb
import time

# 이 예제는 데모 목적으로 Ray를 사용하여 병렬로 실행합니다.
import ray

ray.init()

artifact_type = "dataset"
artifact_name = "parallel-artifact"
table_name = "distributed_table"
parts_path = "parts"
num_parallel = 5

# 병렬 writer의 각 배치는 고유한
# 그룹 이름을 가져야 합니다.
group_name = "writer-group-{}".format(round(time.time()))


@ray.remote
def train(i):
    """
    writer 작업입니다. 각 writer는 아티팩트에 이미지 하나를 추가합니다.
    """
    with wandb.init(group=group_name) as run:
        artifact = wandb.Artifact(name=artifact_name, type=artifact_type)

        # wandb 테이블에 데이터를 추가합니다.
        table = wandb.Table(columns=["a", "b", "c"], data=[[i, i * 2, 2**i]])

        # 아티팩트의 폴더에 테이블을 추가합니다.
        artifact.add(table, "{}/table_{}".format(parts_path, i))

        # 아티팩트를 upsert하면 아티팩트에 데이터를 생성하거나 추가합니다.
        run.upsert_artifact(artifact)


# 실행을 병렬로 시작합니다.
result_ids = [train.remote(i) for i in range(num_parallel)]

# 아티팩트를 완료하기 전에 모든 writer의 파일이
# 추가되었는지 확인하기 위해 join합니다.
ray.get(result_ids)

# 모든 writer가 완료되면 아티팩트를 완료하여
# 준비 상태로 표시합니다.
with wandb.init(group=group_name) as run:
    artifact = wandb.Artifact(artifact_name, type=artifact_type)

    # 테이블 폴더를 가리키는 "PartitionTable"을 생성하고
    # 아티팩트에 추가합니다.
    artifact.add(wandb.data_types.PartitionedTable(parts_path), table_name)

    # finish_artifact는 아티팩트를 확정하여 이 버전에 대한
    # 이후 "upsert"를 허용하지 않습니다.
    run.finish_artifact(artifact)
```

<div id="find-path-for-logged-artifacts-and-other-metadata">
  ## 로그된 아티팩트와 기타 메타데이터의 경로 찾기
</div>

다음 코드 스니펫은 [W&amp;B Public API](/ko/models/ref/python/public-api/)를 사용해 실행에 포함된 파일 목록(이름 및 URL 포함)을 가져오는 방법을 보여줍니다. `<entity/project/run-id>` 플레이스홀더를 실제 값으로 바꿔 사용하십시오:

```python
from wandb.apis.public.files import Files
from wandb.apis.public.api import Api

# 예시 실행 객체
run = Api().run("<entity/project/run-id>")

# 실행의 파일을 순회하기 위한 Files 객체 생성
files = Files(api.client, run)

# 파일 순회
for file in files:
    print(f"파일 이름: {file.name}")
    print(f"파일 URL: {file.url}")
    print(f"버킷의 파일 경로: {file.direct_url}")
```

제공되는 속성과 메서드에 대한 자세한 내용은 [File](/ko/models/ref/python/public-api/file) 클래스를 참조하세요.
