---
title: 웹후크 자동화 생성
---

import EnterpriseCloudOnly from "/snippets/ko/_includes/enterprise-cloud-only.mdx";

<Info>
  <EnterpriseCloudOnly />
</Info>

이 페이지에서는 웹훅 [automation](/ko/models/automations/)을 생성하는 방법을 설명합니다. Slack automation을 생성하려면 [Create a Slack automation](/ko/models/automations/create-automations/slack/) 문서를 참조하세요.

웹훅 automation을 생성하는 전체적인 단계는 다음과 같습니다.

1. 필요한 경우 automation에 필요한 각 민감한 문자열(액세스 토큰, 비밀번호, SSH 키 등)에 대해 [W&amp;B secret을 생성](/ko/platform/secrets/)합니다. Secret은 **Team Settings**에서 정의됩니다.
2. 엔드포인트와 인증 세부 정보를 정의하고, 통합이 필요한 secret에 대한 접근 권한을 부여하기 위해 [웹훅을 생성](#create-a-webhook)합니다.
3. 모니터링할 [event](/ko/models/automations/automation-events/)와 W&amp;B가 전송할 페이로드를 정의하기 위해 [automation을 생성](#create-an-automation)합니다. 페이로드에 필요한 secret에 automation이 접근할 수 있도록 권한을 부여합니다.

<div id="create-a-webhook">
  ## 웹훅 생성하기
</div>

팀 관리자는 팀에 웹훅을 추가할 수 있습니다.

<Note>
  웹훅에 Bearer 토큰이 필요하거나 페이로드에 민감한 문자열이 필요한 경우, 웹훅을 생성하기 전에 해당 값을 포함하는 [시크릿을 생성](/ko/platform/secrets/#add-a-secret)하세요. 하나의 웹훅에는 액세스 토큰 1개와 그 외 시크릿 1개까지만 설정할 수 있습니다. 웹훅의 인증 및 인가 요구 사항은 웹훅 서비스에 의해 결정됩니다.
</Note>

1. W&amp;B에 로그인한 후 **Team Settings** 페이지로 이동합니다.
2. **Webhooks** 섹션에서 **New webhook**을 클릭합니다.
3. 웹훅의 이름을 입력합니다.
4. 웹훅의 엔드포인트 URL을 입력합니다.
5. 웹훅에 Bearer 토큰이 필요하다면 **Access token**을 해당 토큰을 포함하는 [secret](/ko/platform/secrets/)으로 설정합니다. 웹훅 자동화를 사용할 때 W&amp;B는 `Authorization: Bearer` HTTP 헤더를 액세스 토큰으로 설정하며, `${ACCESS_TOKEN}` [payload 변수](#payload-variables)에서 토큰을 참조할 수 있습니다. W&amp;B가 웹훅 서비스로 전송하는 `POST` 요청의 구조에 대해서는 [웹훅 문제 해결](#troubleshoot-your-webhook)을 참고하세요.
6. 웹훅의 페이로드에 비밀번호 또는 다른 민감한 문자열이 필요하다면 **Secret**을 해당 값을 포함하는 secret으로 설정합니다. 이 웹훅을 사용하는 자동화를 설정할 때, 시크릿 이름 앞에 `$`를 붙여 [payload 변수](#payload-variables)로 시크릿을 참조할 수 있습니다.

   웹훅의 액세스 토큰이 시크릿에 저장되어 있는 경우, *반드시* 다음 단계도 완료하여 해당 시크릿을 액세스 토큰으로 지정해야 합니다.
7. W&amp;B가 엔드포인트에 연결하고 인증할 수 있는지 확인하려면:

   1. 선택적으로 테스트에 사용할 페이로드를 입력합니다. 페이로드 안에서 웹훅이 접근할 수 있는 시크릿을 참조하려면 시크릿 이름 앞에 `$`를 붙입니다. 이 페이로드는 테스트에만 사용되며 저장되지 않습니다. 자동화의 페이로드는 [자동화를 생성](#create-a-webhook-automation)할 때 구성합니다. `POST` 요청에서 시크릿과 액세스 토큰이 어디에 지정되는지는 [웹훅 문제 해결](#troubleshoot-your-webhook)을 참고하세요.
   2. **Test**를 클릭합니다. W&amp;B는 구성한 자격 증명을 사용해 웹훅의 엔드포인트에 연결을 시도합니다. 페이로드를 제공했다면, W&amp;B가 해당 페이로드를 전송합니다.

   테스트가 성공하지 않으면 웹훅 구성을 확인한 후 다시 시도하세요. 필요하다면 [웹훅 문제 해결](#troubleshoot-your-webhook)을 참고하세요.

<Frame>
  ![Screenshot showing two webhooks in a Team](/images/automations/webhooks.png)
</Frame>

이제 이 웹훅을 사용하는 [자동화](#create-a-webhook-automation)를 생성할 수 있습니다.

<div id="create-an-automation">
  ## 자동화 생성
</div>

[웹훅을 구성](#create-a-webhook)한 후 **Registry** 또는 **Project**를 선택하고, 웹훅을 트리거하는 자동화를 생성하려면 다음 단계를 따르세요.

<Tabs>
  <Tab title="Registry">
    Registry 관리자(Registry admin)는 해당 Registry에서 자동화를 생성할 수 있습니다. Registry 자동화는 Registry의 모든 컬렉션에 적용되며, 이후에 추가되는 컬렉션에도 적용됩니다.

    1. W&amp;B에 로그인합니다.

    2. Registry 이름을 클릭하여 해당 Registry의 세부 정보를 확인합니다.

    3. Registry 범위의 자동화를 생성하려면 **Automations** 탭을 클릭한 다음 **Create automation**을 클릭합니다.

    4. 모니터링할 [이벤트](/ko/models/automations/automation-events/#registry-events)를 선택합니다.

       표시되는 추가 필드를 모두 입력합니다. 예를 들어 **An artifact alias is added**를 선택한 경우 **Alias regex**를 지정해야 합니다.

       **Next step**을 클릭합니다.

    5. [웹훅](#create-a-webhook)을 소유한 팀을 선택합니다.

    6. **Action type**을 **Webhooks**로 설정한 다음 사용할 [웹훅](#create-a-webhook)을 선택합니다.

    7. 웹훅에 대한 액세스 토큰을 구성한 경우 `${ACCESS_TOKEN}` [payload 변수](#payload-variables)에서 토큰에 액세스할 수 있습니다. 웹훅에 대해 시크릿을 구성한 경우, 페이로드에서 해당 이름 앞에 `$`를 붙여 액세스할 수 있습니다. 웹훅의 요구 사항은 웹훅 서비스에 따라 결정됩니다.

    8. **Next step**을 클릭합니다.

    9. 자동화 이름을 입력합니다. 선택적으로 설명을 입력할 수 있습니다. **Create automation**을 클릭합니다.
  </Tab>

  <Tab title="Project">
    W&amp;B 관리자(W&amp;B admin)는 프로젝트에서 자동화를 생성할 수 있습니다.

    1. W&amp;B에 로그인한 후 프로젝트 페이지로 이동합니다.
    2. 사이드바에서 **Automations**를 클릭한 다음 **Create automation**을 클릭합니다.

       또는 워크스페이스의 라인 플롯에서 표시되는 메트릭에 대해 [실행 메트릭 자동화](/ko/models/automations/automation-events/#run-events)를 빠르게 생성할 수 있습니다. 패널 위에 마우스를 올린 후 패널 상단의 종 모양 아이콘을 클릭합니다.

       <Frame>
         <img src="/images/automations/run_metric_automation_from_panel.png" alt="자동화 종 아이콘 위치" />
       </Frame>
    3. 아티팩트 별칭이 추가되었을 때나 실행 메트릭이 지정한 임계값을 만족했을 때와 같이, 모니터링할 [이벤트](/ko/models/automations/automation-events/#project)를 선택합니다.

       1. 이벤트 유형에 따라 달라지는 표시된 추가 필드를 모두 입력합니다. 예를 들어 **An artifact alias is added**를 선택한 경우 **Alias regex**를 지정해야 합니다.

          1. 실행에 의해 트리거되는 자동화의 경우, 선택적으로 하나 이상의 실행 필터를 지정할 수 있습니다.

             * **Filter to one user&#39;s runs**: 지정한 사용자가 생성한 실행만 포함합니다. 토글을 클릭해 필터를 켠 다음 사용자 이름을 지정합니다.
             * **Filter on run name**: 이름이 지정한 정규식과 일치하는 실행만 포함합니다. 토글을 클릭해 필터를 켠 다음 정규식을 지정합니다.

          자동화는 프로젝트의 모든 컬렉션에 적용되며, 이후에 추가되는 컬렉션에도 적용됩니다.
       2. **Next step**을 클릭합니다.
    4. [웹훅](#create-a-webhook)을 소유한 팀을 선택합니다.
    5. **Action type**을 **Webhooks**로 설정한 다음 사용할 [웹훅](#create-a-webhook)을 선택합니다.
    6. 웹훅에 페이로드가 필요한 경우, 페이로드를 구성하여 **Payload** 필드에 붙여넣습니다. 웹훅에 대한 액세스 토큰을 구성한 경우 `${ACCESS_TOKEN}` [payload 변수](#payload-variables)에서 토큰에 액세스할 수 있습니다. 웹훅에 대해 시크릿을 구성한 경우, 페이로드에서 해당 이름 앞에 `$`를 붙여 액세스할 수 있습니다. 웹훅의 요구 사항은 웹훅 서비스에 따라 결정됩니다.
    7. **Next step**을 클릭합니다.
    8. 자동화 이름을 입력합니다. 선택적으로 설명을 입력할 수 있습니다. **Create automation**을 클릭합니다.
  </Tab>
</Tabs>

<div id="view-and-manage-automations">
  ## 자동화 보기 및 관리
</div>

<Tabs>
  <Tab title="Registry">
    Registry의 **Automations** 탭에서 해당 Registry의 자동화를 관리할 수 있습니다.

    * 자동화의 세부 정보를 보려면 해당 이름을 클릭합니다.
    * 자동화를 편집하려면 해당 항목의 작업 `...` 메뉴를 클릭한 다음 **Edit automation**을 클릭합니다.
    * 자동화를 삭제하려면 해당 항목의 작업 `...` 메뉴를 클릭한 다음 **Delete automation**을 클릭합니다. 이때 삭제를 한 번 더 확인해야 합니다.
  </Tab>

  <Tab title="프로젝트">
    W&amp;B 관리자는 프로젝트의 **Automations** 탭에서 해당 프로젝트의 자동화를 보고 관리할 수 있습니다.

    * 자동화의 세부 정보를 보려면 해당 이름을 클릭합니다.
    * 자동화를 편집하려면 해당 항목의 작업 `...` 메뉴를 클릭한 다음 **Edit automation**을 클릭합니다.
    * 자동화를 삭제하려면 해당 항목의 작업 `...` 메뉴를 클릭한 다음 **Delete automation**을 클릭합니다. 이때 삭제를 한 번 더 확인해야 합니다.
  </Tab>
</Tabs>

<div id="payload-reference">
  ## 페이로드 참조
</div>

다음 섹션을 사용하여 웹훅의 페이로드를 구성하세요. 웹훅과 해당 페이로드를 테스트하는 방법에 대한 자세한 내용은 [웹훅 문제 해결](#troubleshoot-your-webhook)을 참고하세요.

<div id="payload-variables">
  ### 페이로드 변수
</div>

이 섹션에서는 웹훅 페이로드를 구성할 때 사용할 수 있는 변수를 설명합니다.

| Variable | Details |
|----------|---------|
| `${project_name}`             | 동작을 트리거한 변경 사항을 소유한 프로젝트의 이름입니다. |
| `${entity_name}`              | 동작을 트리거한 변경 사항을 소유한 엔터티 또는 팀의 이름입니다. |
| `${event_type}`               | 동작을 트리거한 이벤트의 유형입니다. |
| `${event_author}`             | 동작을 트리거한 사용자의 이름입니다. |
| `${alias}`                    | 자동화가 **An artifact alias is added** 이벤트에 의해 트리거된 경우, 아티팩트의 별칭을 포함합니다. 다른 자동화의 경우 이 변수는 비어 있습니다. |
| `${tag}`                      | 자동화가 **An artifact tag is added** 이벤트에 의해 트리거된 경우, 아티팩트의 태그를 포함합니다. 다른 자동화의 경우 이 변수는 비어 있습니다. |
| `${artifact_collection_name}` | 아티팩트 버전이 연결된 아티팩트 컬렉션의 이름입니다. |
| `${artifact_metadata.<KEY>}`  | 동작을 트리거한 아티팩트 버전에서 임의의 최상위 메타데이터 키의 값입니다. `<KEY>`를 최상위 메타데이터 키 이름으로 바꾸십시오. 웹훅 페이로드에서는 최상위 메타데이터 키만 사용할 수 있습니다. |
| `${artifact_version}`         | 동작을 트리거한 아티팩트 버전의 [`Wandb.Artifact`](/ko/models/ref/python/experiments/artifact.md/) 표현입니다. |
| `${artifact_version_string}` | 동작을 트리거한 아티팩트 버전의 문자열(`string`) 표현입니다. |
| `${ACCESS_TOKEN}` | 액세스 토큰이 설정된 경우, [웹훅](#create-a-webhook)에 구성된 액세스 토큰의 값입니다. 액세스 토큰은 `Authorization: Bearer` HTTP 헤더로 자동 전달됩니다. |
| `${SECRET_NAME}` | 설정된 경우, [웹훅](#create-a-webhook)에 구성된 시크릿의 값입니다. `SECRET_NAME`을 시크릿 이름으로 바꾸십시오. |

<div id="payload-examples">
  ### 페이로드 예시
</div>

이 섹션에는 몇 가지 일반적인 사용 사례에 대한 웹훅 페이로드 예시가 포함되어 있습니다. 예시는 [페이로드 변수](#payload-variables)의 사용 방법을 보여줍니다.

<Tabs>
  <Tab title="GitHub Repository Dispatch">
    <Note>
      GHA 워크플로를 트리거할 수 있도록 액세스 토큰에 필요한 권한이 설정되어 있는지 확인하세요. 자세한 내용은 [GitHub 문서](https://docs.github.com/en/rest/repos/repos?#create-a-repository-dispatch-event)를 참고하세요.
    </Note>

    W&amp;B에서 repository dispatch를 전송하여 GitHub Action을 트리거합니다. 예를 들어, `on` 키의 트리거로 repository dispatch를 사용하는 GitHub workflow 파일이 있다고 가정해 보겠습니다:

    ```yaml
    on:
    repository_dispatch:
      types: BUILD_AND_DEPLOY
    ```

    예를 들어 리포지토리 페이로드는 다음과 같습니다:

    ```json
    {
      "event_type": "BUILD_AND_DEPLOY",
      "client_payload": 
      {
        "event_author": "${event_author}",
        "artifact_version": "${artifact_version}",
        "artifact_version_string": "${artifact_version_string}",
        "artifact_collection_name": "${artifact_collection_name}",
        "project_name": "${project_name}",
        "entity_name": "${entity_name}"
        }
    }
    ```

    <Note>
      webhook 페이로드의 `event_type` 키는 GitHub workflow YAML 파일의 `types` 필드와 일치해야 합니다.
    </Note>

    렌더링된 템플릿 문자열의 내용과 위치는 자동화가 구성된 이벤트 또는 모델 버전에 따라 달라집니다. `${event_type}` 은 `LINK_ARTIFACT` 또는 `ADD_ARTIFACT_ALIAS` 로 렌더링됩니다. 아래 예시 매핑을 참고하세요:

    ```text
    ${event_type} --> "LINK_ARTIFACT" or "ADD_ARTIFACT_ALIAS"
    ${event_author} --> "<wandb-user>"
    ${artifact_version} --> "wandb-artifact://_id/QXJ0aWZhY3Q6NTE3ODg5ODg3""
    ${artifact_version_string} --> "<entity>/model-registry/<registered_model_name>:<alias>"
    ${artifact_collection_name} --> "<registered_model_name>"
    ${project_name} --> "model-registry"
    ${entity_name} --> "<entity>"
    ```

    템플릿 문자열을 사용하여 W&amp;B에서 GitHub Actions 및 기타 도구로 컨텍스트를 동적으로 전달하세요. 이러한 도구가 Python 스크립트를 호출할 수 있다면, [W&amp;B API](/ko/models/artifacts/download-and-use-an-artifact/)를 통해 등록된 모델 아티팩트를 사용할 수 있습니다.

    * repository dispatch에 대한 자세한 내용은 [GitHub Marketplace의 공식 문서](https://github.com/marketplace/actions/repository-dispatch)를 참조하세요.

    * 모델 평가 및 배포 자동화 방법을 안내하는 동영상인 [Webhook Automations for Model Evaluation](https://www.youtube.com/watch?v=7j-Mtbo-E74\&ab_channel=Weights%26Biases) 및 [Webhook Automations for Model Deployment](https://www.youtube.com/watch?v=g5UiAFjM2nA\&ab_channel=Weights%26Biases)를 시청하세요.

    * Model CI에 GitHub Actions webhook 자동화를 사용하는 방법을 보여 주는 W&amp;B [report](https://wandb.ai/wandb/wandb-model-cicd/reports/Model-CI-CD-with-W-B--Vmlldzo0OTcwNDQw)를 검토하세요. Modal Labs webhook을 사용해 Model CI를 구현하는 방법은 이 [GitHub repository](https://github.com/hamelsmu/wandb-modal-webhook)를 확인하세요.
  </Tab>

  <Tab title="Microsoft Teams 알림">
    다음 예시 페이로드는 webhook을 사용하여 Teams 채널에 알림을 보내는 방법을 보여줍니다:

    ```json
    {
    "@type": "MessageCard",
    "@context": "http://schema.org/extensions",
    "summary": "New Notification",
    "sections": [
      {
        "activityTitle": "Notification from WANDB",
        "text": "This is an example message sent via Teams webhook.",
        "facts": [
          {
            "name": "Author",
            "value": "${event_author}"
          },
          {
            "name": "Event Type",
            "value": "${event_type}"
          }
        ],
        "markdown": true
      }
    ]
    }
    ```

    템플릿 문자열을 사용하여 실행 시점에 W&amp;B 데이터를 페이로드에 삽입할 수 있습니다(위의 Teams 예시처럼).
  </Tab>

  <Tab title="Slack 알림">
    <Note>
      이 섹션은 과거 기록용으로만 제공됩니다. 현재 Slack 연동에 웹훅을 사용 중이라면, 구성을 업데이트하여 대신 [새 Slack 통합](#create-a-slack-automation)을 사용하도록 W&amp;B에서 권장합니다.
    </Note>

    [Slack API 문서](https://api.slack.com/messaging/webhooks)에 설명된 지침에 따라 Slack 앱을 설정하고 Incoming Webhook 통합을 추가합니다. `Bot User OAuth Token` 아래에 지정된 시크릿이 W&amp;B 웹훅의 액세스 토큰으로 설정되어 있는지 확인합니다.

    다음은 페이로드 예시입니다:

    ```json
    {
        "text": "New alert from WANDB!",
    "blocks": [
        {
                "type": "section",
            "text": {
                "type": "mrkdwn",
                "text": "Registry event: ${event_type}"
            }
        },
            {
                "type":"section",
                "text": {
                "type": "mrkdwn",
                "text": "New version: ${artifact_version_string}"
            }
            },
            {
            "type": "divider"
        },
            {
                "type": "section",
            "text": {
                "type": "mrkdwn",
                "text": "Author: ${event_author}"
            }
            }
        ]
    }
    ```
  </Tab>
</Tabs>

<div id="troubleshoot-your-webhook">
  ## 웹훅 문제 해결
</div>

W&amp;B App UI를 사용해 대화형으로, 또는 Bash 스크립트를 사용해 프로그래밍 방식으로 웹훅 문제를 해결할 수 있습니다. 새 웹훅을 만들 때나 기존 웹훅을 편집할 때 웹훅을 점검할 수 있습니다.

W&amp;B가 `POST` 요청에 사용하는 형식에 대한 자세한 내용은 **Bash script** 탭을 참고하세요.

<Tabs>
  <Tab title="W&B App UI">
    팀 관리자는 W&amp;B App UI를 사용해 웹훅을 대화형으로 테스트할 수 있습니다.

    1. W&amp;B 팀 설정(Team Settings) 페이지로 이동합니다.
    2. **Webhooks** 섹션까지 스크롤합니다.
    3. 웹훅 이름 옆의 가로 점 세 개(미트볼 아이콘)를 클릭합니다.
    4. **Test**를 선택합니다.
    5. 나타나는 UI 패널에서 표시된 필드에 POST 요청을 붙여넣습니다.
       <Frame>
         <img src="/images/models/webhook_ui.png" alt="웹훅 페이로드 테스트 데모" />
       </Frame>
    6. **Test webhook**을 클릭합니다. 그러면 W&amp;B App UI 내에서 W&amp;B가 엔드포인트로부터의 응답을 표시합니다.
       <Frame>
         <img src="/images/models/webhook_ui_testing.gif" alt="웹훅 테스트 데모" />
       </Frame>

    데모는 동영상 [Testing Webhooks in W&amp;B](https://www.youtube.com/watch?v=bl44fDpMGJw\&ab_channel=Weights%26Biases)를 참고하세요.
  </Tab>

  <Tab title="Bash script">
    다음 셸 스크립트는 웹훅이 트리거될 때 W&amp;B가 웹훅 자동화에 보내는 요청과 유사한 `POST` 요청을 생성하는 한 가지 방법을 보여줍니다.

    아래 코드를 셸 스크립트에 복사해 붙여넣어 웹훅을 문제 해결하세요. 다음 항목에는 직접 값을 지정해야 합니다:

    * `ACCESS_TOKEN`
    * `SECRET`
    * `PAYLOAD`
    * `API_ENDPOINT`

    ```bash webhook_test.sh
    #!/bin/bash

    # 액세스 토큰과 secret
    ACCESS_TOKEN="your_api_key"
    SECRET="your_api_secret"

    # 전송하려는 데이터 (예: JSON 형식)
    PAYLOAD='{"key1": "value1", "key2": "value2"}'

    # HMAC 서명 생성
    # 보안을 위해 W&B는 웹훅에 연결된 공유 secret 키와
    # 페이로드로부터 계산된 X-Wandb-Signature를
    # 헤더에 포함합니다
    # HMAC with SHA-256 알고리즘을 사용합니다.
    SIGNATURE=$(echo -n "$PAYLOAD" | openssl dgst 
    -sha256 -hmac "$SECRET" -binary | base64)

    # cURL 요청 실행
    curl -X POST \
      -H "Content-Type: application/json" \
      -H "Authorization: Bearer $ACCESS_TOKEN" \
      -H "X-Wandb-Signature: $SIGNATURE" \
      -d "$PAYLOAD" API_ENDPOINT
    ```
  </Tab>
</Tabs>