---
title: 웹후크 자동화 만들기
---

import EnterpriseCloudOnly from "/snippets/ko/_includes/enterprise-cloud-only.mdx";

<Info>
  <EnterpriseCloudOnly />
</Info>

이 페이지에서는 웹훅 [automation](/ko/models/automations/)을 생성하는 방법을 설명합니다. Slack automation을 생성하려면 [Create a Slack automation](/ko/models/automations/create-automations/slack/)을 참고하세요.

웹훅 automation을 생성하는 전체적인 절차는 다음과 같습니다:

1. 필요한 경우, 액세스 토큰, 비밀번호, SSH 키와 같이 automation에서 필요한 각 민감한 문자열마다 [W&amp;B secret를 생성](/ko/platform/secrets/)합니다. Secret은 **Team Settings**에서 정의합니다.
2. 엔드포인트와 인증 세부 정보를 정의하고 필요한 secret에 대한 접근 권한을 인테그레이션에 부여하기 위해 [웹훅을 생성](#create-a-webhook)합니다.
3. 감지할 [event](/ko/models/automations/automation-events/)와 W&amp;B가 전송할 페이로드를 정의하기 위해 [automation을 생성](#create-an-automation)합니다. 또한 페이로드에 필요한 secret에 대한 접근 권한을 automation에 부여합니다.

<div id="create-a-webhook">
  ## 웹훅 생성
</div>

팀 관리자는 팀에 웹훅을 추가할 수 있습니다.

<Note>
  웹훅에 Bearer 토큰이 필요하거나 페이로드에 민감한 문자열이 필요한 경우, 웹훅을 생성하기 전에 [해당 값을 포함하는 시크릿을 생성](/ko/platform/secrets/#add-a-secret)하십시오. 하나의 웹훅에는 액세스 토큰과 다른 시크릿을 각각 최대 하나씩만 설정할 수 있습니다. 웹훅의 인증 및 인가 요구 사항은 웹훅 서비스에 의해 결정됩니다.
</Note>

1. W&amp;B에 로그인한 후 **Team Settings** 페이지로 이동합니다.
2. **Webhooks** 섹션에서 **New webhook**을 클릭합니다.
3. 웹훅 이름을 입력합니다.
4. 웹훅의 엔드포인트 URL을 입력합니다.
5. 웹훅에 Bearer 토큰이 필요한 경우, **Access token**을 해당 토큰을 포함하는 [secret](/ko/platform/secrets/)으로 설정합니다. 웹훅 자동화를 사용할 때 W&amp;B는 `Authorization: Bearer` HTTP 헤더를 액세스 토큰으로 설정하며, `${ACCESS_TOKEN}` [페이로드 변수](#payload-variables)에서 이 토큰에 접근할 수 있습니다. W&amp;B가 웹훅 서비스로 보내는 `POST` 요청의 구조에 대해서는 [웹훅 문제 해결](#troubleshoot-your-webhook)을 참조하십시오.
6. 웹훅이 페이로드에 비밀번호 또는 기타 민감한 문자열을 필요로 하는 경우, **Secret**을 해당 값을 포함하는 시크릿으로 설정합니다. 이 웹훅을 사용하는 자동화를 설정할 때, 시크릿 이름 앞에 `$`를 붙여 [페이로드 변수](#payload-variables)로 시크릿에 접근할 수 있습니다.

   웹훅의 액세스 토큰이 시크릿에 저장된 경우, 다음 단계도 완료하여 해당 시크릿을 액세스 토큰으로 지정해야 합니다.
7. W&amp;B가 엔드포인트에 연결하고 인증할 수 있는지 확인하려면:

   1. 필요에 따라 테스트에 사용할 페이로드를 입력합니다. 페이로드 내에서 웹훅이 접근할 수 있는 시크릿을 참조하려면 시크릿 이름 앞에 `$`를 붙입니다. 이 페이로드는 테스트에만 사용되며 저장되지 않습니다. 자동화의 페이로드는 [자동화를 생성](#create-a-webhook-automation)할 때 구성합니다. `POST` 요청에서 시크릿과 액세스 토큰이 어디에 지정되는지 보려면 [웹훅 문제 해결](#troubleshoot-your-webhook)을 참조하십시오.
   2. **Test**를 클릭합니다. W&amp;B는 설정한 자격 증명을 사용해 웹훅의 엔드포인트에 연결을 시도합니다. 페이로드를 입력한 경우, W&amp;B가 해당 페이로드를 전송합니다.

   테스트가 성공하지 않으면 웹훅 설정을 확인한 후 다시 시도하십시오. 필요하다면 [웹훅 문제 해결](#troubleshoot-your-webhook)을 참조하십시오.

<Frame>
  ![팀에 있는 두 개의 웹훅을 보여주는 스크린샷](/images/automations/webhooks.png)
</Frame>

이제 해당 웹훅을 사용하는 [자동화](#create-a-webhook-automation)를 생성할 수 있습니다.

<div id="create-an-automation">
  ## 자동화 생성
</div>

[webhook을 구성](#create-a-webhook)한 후 **Registry** 또는 **Project**를 선택하고, webhook을 트리거하는 자동화를 만들기 위해 다음 단계를 따르세요.

<Tabs>
  <Tab title="Registry">
    Registry 관리자는 해당 registry에서 자동화를 생성할 수 있습니다. Registry 자동화는 앞으로 추가되는 컬렉션을 포함하여 해당 registry의 모든 컬렉션에 적용됩니다.

    1. W&amp;B에 로그인합니다.

    2. 상세 정보를 보려는 registry의 이름을 클릭합니다.

    3. Registry 범위의 자동화를 생성하려면 **Automations** 탭을 클릭한 후 **Create automation**을 클릭합니다.

    4. 모니터링할 [이벤트](/ko/models/automations/automation-events/#registry-events)를 선택합니다.

       나타나는 추가 필드를 모두 입력합니다. 예를 들어 **An artifact alias is added**를 선택한 경우 **Alias regex**를 지정해야 합니다.

       **Next step**을 클릭합니다.

    5. [webhook](#create-a-webhook)을 소유한 팀을 선택합니다.

    6. **Action type**을 **Webhooks**로 설정한 다음 사용할 [webhook](#create-a-webhook)을 선택합니다.

    7. webhook에 대해 액세스 토큰을 구성한 경우 `${ACCESS_TOKEN}` [payload 변수](#payload-variables)에서 해당 토큰에 접근할 수 있습니다. webhook에 대해 secret을 구성한 경우 payload에서 이름 앞에 `$`를 붙여 secret에 접근할 수 있습니다. webhook의 요구 사항은 webhook이 연결된 서비스에 의해 결정됩니다.

    8. **Next step**을 클릭합니다.

    9. 자동화 이름을 지정합니다. 필요하다면 설명을 추가로 입력합니다. **Create automation**을 클릭합니다.
  </Tab>

  <Tab title="Project">
    W&amp;B 관리자는 프로젝트에서 자동화를 생성할 수 있습니다.

    1. W&amp;B에 로그인한 후 프로젝트 페이지로 이동합니다.
    2. 프로젝트 사이드바에서 **Automations**를 클릭한 후 **Create automation**을 클릭합니다.

       또는, 워크스페이스의 라인 플롯(line plot)에서 표시된 메트릭에 대해 [run 메트릭 자동화](/ko/models/automations/automation-events/#run-events)를 빠르게 생성할 수 있습니다. 패널 위에 마우스를 올린 뒤, 패널 상단의 종(bell) 아이콘을 클릭합니다.

       <Frame>
         <img src="/images/automations/run_metric_automation_from_panel.png" alt="Automation 종(bell) 아이콘 위치" />
       </Frame>
    3. 아티팩트 alias가 추가되었을 때나 run 메트릭이 지정된 임계값을 만족했을 때 등 모니터링할 [이벤트](/ko/models/automations/automation-events/#project)를 선택합니다.

       1. 이벤트에 따라 달라지는 추가 필드를 입력합니다. 예를 들어 **An artifact alias is added**를 선택한 경우 **Alias regex**를 지정해야 합니다.

          1. run에 의해 트리거되는 자동화의 경우, 선택적으로 하나 이상의 run 필터를 지정할 수 있습니다.

             * **Filter to one user&#39;s runs**: 지정한 사용자가 생성한 run만 포함합니다. 토글을 클릭해 필터를 켠 다음, 사용자 이름을 지정합니다.
             * **Filter on run name**: 이름이 주어진 정규식과 일치하는 run만 포함합니다. 토글을 클릭해 필터를 켠 다음, 정규식을 지정합니다.

          자동화는 앞으로 추가되는 컬렉션을 포함하여 프로젝트의 모든 컬렉션에 적용됩니다.
       2. **Next step**을 클릭합니다.
    4. [webhook](#create-a-webhook)을 소유한 팀을 선택합니다.
    5. **Action type**을 **Webhooks**로 설정한 다음, 사용할 [webhook](#create-a-webhook)을 선택합니다.
    6. webhook에 payload가 필요한 경우 payload를 구성한 뒤 **Payload** 필드에 붙여넣습니다. webhook에 대해 액세스 토큰을 구성한 경우 `${ACCESS_TOKEN}` [payload 변수](#payload-variables)에서 해당 토큰에 접근할 수 있습니다. webhook에 대해 secret을 구성한 경우 payload에서 이름 앞에 `$`를 붙여 secret에 접근할 수 있습니다. webhook의 요구 사항은 webhook이 연결된 서비스에 의해 결정됩니다.
    7. **Next step**을 클릭합니다.
    8. 자동화 이름을 지정합니다. 필요하다면 설명을 추가로 입력합니다. **Create automation**을 클릭합니다.
  </Tab>
</Tabs>

<div id="view-and-manage-automations">
  ## 자동화 보기 및 관리
</div>

<Tabs>
  <Tab title="레지스트리">
    레지스트리의 **Automations** 탭에서 해당 레지스트리의 자동화를 관리합니다.

    * 자동화의 세부 정보를 보려면 이름을 클릭합니다.
    * 자동화를 편집하려면 `...` 작업 메뉴를 클릭한 다음 **Edit automation**을 클릭합니다.
    * 자동화를 삭제하려면 `...` 작업 메뉴를 클릭한 다음 **Delete automation**을 클릭합니다. 삭제를 확인해야 합니다.
  </Tab>

  <Tab title="프로젝트">
    W&amp;B 관리자는 프로젝트의 **Automations** 탭에서 해당 프로젝트의 자동화를 보고 관리할 수 있습니다.

    * 자동화의 세부 정보를 보려면 이름을 클릭합니다.
    * 자동화를 편집하려면 `...` 작업 메뉴를 클릭한 다음 **Edit automation**을 클릭합니다.
    * 자동화를 삭제하려면 `...` 작업 메뉴를 클릭한 다음 **Delete automation**을 클릭합니다. 삭제를 확인해야 합니다.
  </Tab>
</Tabs>

<div id="payload-reference">
  ## 페이로드 참조
</div>

아래 섹션을 사용해 웹훅의 페이로드를 구성하세요. 웹훅과 해당 페이로드를 테스트하는 방법에 대한 자세한 내용은 [웹후크 문제 해결](#troubleshoot-your-webhook)을 참조하세요.

<div id="payload-variables">
  ### 페이로드 변수
</div>

이 섹션에서는 webhook의 페이로드를 구성할 때 사용할 수 있는 변수를 설명합니다.

| Variable | Details |
|----------|---------|
| `${project_name}`             | 동작을 트리거한 변경 사항을 소유한 프로젝트의 이름입니다. |
| `${entity_name}`              | 동작을 트리거한 변경 사항을 소유한 엔티티 또는 팀의 이름입니다. |
| `${event_type}`               | 동작을 트리거한 이벤트의 유형입니다. |
| `${event_author}`             | 동작을 트리거한 사용자입니다. |
| `${alias}`                    | 자동화가 **An artifact alias is added** 이벤트에 의해 트리거된 경우, 해당 아티팩트의 alias를 포함합니다. 다른 자동화의 경우 이 변수는 비어 있습니다. |
| `${tag}`                      | 자동화가 **An artifact tag is added** 이벤트에 의해 트리거된 경우, 해당 아티팩트의 태그를 포함합니다. 다른 자동화의 경우 이 변수는 비어 있습니다. |
| `${artifact_collection_name}` | 아티팩트 버전이 연결된 아티팩트 컬렉션의 이름입니다. |
| `${artifact_metadata.<KEY>}`  | 동작을 트리거한 아티팩트 버전에서 임의의 최상위 메타데이터 키에 해당하는 값입니다. `<KEY>`를 최상위 메타데이터 키 이름으로 바꾸십시오. webhook의 페이로드에서는 최상위 메타데이터 키만 사용할 수 있습니다. |
| `${artifact_version}`         | 동작을 트리거한 아티팩트 버전을 나타내는 [`Wandb.Artifact`](/ko/models/ref/python/experiments/artifact.md/) 표현입니다. |
| `${artifact_version_string}` | 동작을 트리거한 아티팩트 버전의 `string` 표현입니다. |
| `${ACCESS_TOKEN}` | (액세스 토큰이 구성된 경우) [webhook](#create-a-webhook)에 구성된 액세스 토큰의 값입니다. 액세스 토큰은 `Authorization: Bearer` HTTP 헤더로 자동 전달됩니다. |
| `${SECRET_NAME}` | (구성된 경우) [webhook](#create-a-webhook)에 설정된 시크릿의 값입니다. `SECRET_NAME`을 시크릿 이름으로 바꾸십시오. |

<div id="payload-examples">
  ### 페이로드 예제
</div>

이 섹션에는 몇 가지 일반적인 사용 사례에 대한 웹훅 페이로드 예제가 포함되어 있습니다. 아래 예제들은 [payload variables](#payload-variables)를 사용하는 방법을 보여줍니다.

<Tabs>
  <Tab title="GitHub 리포지토리 디스패치 이벤트">
    <Note>
      GHA 워크플로를 트리거할 수 있도록 액세스 토큰에 필요한 권한이 부여되어 있는지 확인하세요. 자세한 내용은 [GitHub 문서](https://docs.github.com/en/rest/repos/repos?#create-a-repository-dispatch-event)를 참조하세요.
    </Note>

    W&amp;B에서 repository dispatch를 전송하여 GitHub Action을 트리거하세요. 예를 들어, `on` 키에 대한 트리거로 repository dispatch를 사용하도록 설정된 GitHub workflow 파일이 있다고 가정해 봅시다:

    ```yaml
    on:
    repository_dispatch:
      types: BUILD_AND_DEPLOY
    ```

    저장소용 페이로드는 대략 다음과 같은 형태입니다.

    ```json
    {
      "event_type": "BUILD_AND_DEPLOY",
      "client_payload": 
      {
        "event_author": "${event_author}",
        "artifact_version": "${artifact_version}",
        "artifact_version_string": "${artifact_version_string}",
        "artifact_collection_name": "${artifact_collection_name}",
        "project_name": "${project_name}",
        "entity_name": "${entity_name}"
        }
    }
    ```

    <Note>
      webhook 페이로드의 `event_type` 키는 GitHub 워크플로우 YAML 파일의 `types` 필드와 일치해야 합니다.
    </Note>

    렌더링되는 템플릿 문자열의 내용과 위치는 자동화가 어떤 이벤트 또는 모델 버전에 대해 구성되어 있는지에 따라 달라집니다. `${event_type}`는 `LINK_ARTIFACT` 또는 `ADD_ARTIFACT_ALIAS`로 렌더링됩니다. 예시 매핑은 아래를 참고하세요:

    ```text
    ${event_type} --> "LINK_ARTIFACT" or "ADD_ARTIFACT_ALIAS"
    ${event_author} --> "<wandb-user>"
    ${artifact_version} --> "wandb-artifact://_id/QXJ0aWZhY3Q6NTE3ODg5ODg3""
    ${artifact_version_string} --> "<entity>/model-registry/<registered_model_name>:<alias>"
    ${artifact_collection_name} --> "<registered_model_name>"
    ${project_name} --> "model-registry"
    ${entity_name} --> "<entity>"
    ```

    템플릿 문자열을 사용해 W&amp;B에서 GitHub Actions 및 기타 도구로 컨텍스트를 동적으로 전달할 수 있습니다. 해당 도구에서 Python 스크립트를 호출할 수 있다면, [W&amp;B API](/ko/models/artifacts/download-and-use-an-artifact/)를 통해 등록된 모델 아티팩트를 사용할 수 있습니다.

    * repository dispatch에 대한 자세한 내용은 [GitHub Marketplace의 공식 문서](https://github.com/marketplace/actions/repository-dispatch)를 참고하세요.

    * 모델 평가 자동화를 구현하는 방법을 안내하는 영상 [Webhook Automations for Model Evaluation](https://www.youtube.com/watch?v=7j-Mtbo-E74\&ab_channel=Weights%26Biases)과 모델 배포 자동화를 구현하는 방법을 안내하는 영상 [Webhook Automations for Model Deployment](https://www.youtube.com/watch?v=g5UiAFjM2nA\&ab_channel=Weights%26Biases)을 시청하세요.

    * Model CI를 위해 GitHub Actions 웹훅 자동화를 사용하는 방법을 보여주는 W&amp;B [리포트](https://wandb.ai/wandb/wandb-model-cicd/reports/Model-CI-CD-with-W-B--Vmlldzo0OTcwNDQw)를 검토하세요. Modal Labs 웹훅으로 Model CI를 구현하는 방법은 이 [GitHub 저장소](https://github.com/hamelsmu/wandb-modal-webhook)를 참고하세요.
  </Tab>

  <Tab title="Microsoft Teams 알림">
    다음 예제 페이로드는 웹훅을 사용하여 Teams 채널에 알림을 보내는 방법을 보여줍니다:

    ```json
    {
    "@type": "MessageCard",
    "@context": "http://schema.org/extensions",
    "summary": "New Notification",
    "sections": [
      {
        "activityTitle": "Notification from WANDB",
        "text": "This is an example message sent via Teams webhook.",
        "facts": [
          {
            "name": "Author",
            "value": "${event_author}"
          },
          {
            "name": "Event Type",
            "value": "${event_type}"
          }
        ],
        "markdown": true
      }
    ]
    }
    ```

    실행 시점에 템플릿 문자열을 사용하여 페이로드에 W&amp;B 데이터를 삽입할 수 있습니다(위의 Teams 예제와 같이).
  </Tab>

  <Tab title="Slack 알림">
    <Note>
      이 섹션은 과거 내용을 보존하기 위한 것입니다. 현재 Slack과 인테그레이션하기 위해 webhook을 사용 중이라면, 설정을 업데이트하여 [새 Slack 인테그레이션](#create-a-slack-automation)을 사용하도록 할 것을 W&amp;B에서 권장합니다.
    </Note>

    [Slack API documentation](https://api.slack.com/messaging/webhooks)에 나와 있는 지침에 따라 Slack 앱을 설정하고 incoming webhook 인테그레이션을 추가하세요. `Bot User OAuth Token` 아래에 지정된 시크릿 값을 W&amp;B webhook의 액세스 토큰으로 사용해야 합니다.

    다음은 예시 페이로드입니다.

    ```json
    {
        "text": "New alert from WANDB!",
    "blocks": [
        {
                "type": "section",
            "text": {
                "type": "mrkdwn",
                "text": "Registry event: ${event_type}"
            }
        },
            {
                "type":"section",
                "text": {
                "type": "mrkdwn",
                "text": "New version: ${artifact_version_string}"
            }
            },
            {
            "type": "divider"
        },
            {
                "type": "section",
            "text": {
                "type": "mrkdwn",
                "text": "Author: ${event_author}"
            }
            }
        ]
    }
    ```
  </Tab>
</Tabs>

<div id="troubleshoot-your-webhook">
  ## 웹후크 문제 해결하기
</div>

W&amp;B App UI를 사용해 대화형으로, 또는 Bash 스크립트를 사용해 프로그래밍 방식으로 웹후크를 문제 해결할 수 있습니다. 새 웹후크를 생성할 때나 기존 웹후크를 수정할 때 웹후크를 점검할 수 있습니다.

W&amp;B에서 `POST` 요청에 사용하는 포맷에 대한 자세한 내용은 **Bash script** 탭을 참조하세요.

<Tabs>
  <Tab title="W&B App UI">
    팀 관리자는 W&amp;B App UI를 사용해 웹후크를 대화형으로 테스트할 수 있습니다.

    1. W&amp;B Team Settings 페이지로 이동합니다.
    2. **Webhooks** 섹션으로 스크롤합니다.
    3. 웹후크 이름 옆의 가로 점 세 개(미트볼 아이콘)를 클릭합니다.
    4. **Test**를 선택합니다.
    5. 나타나는 UI 패널에서 표시된 필드에 `POST` 요청을 붙여넣습니다.
       <Frame>
         <img src="/images/models/webhook_ui.png" alt="웹후크 페이로드를 테스트하는 데모" />
       </Frame>
    6. **Test webhook**을 클릭합니다. 그러면 W&amp;B App UI 내에서 엔드포인트로부터의 응답을 W&amp;B가 표시합니다.
       <Frame>
         <img src="/images/models/webhook_ui_testing.gif" alt="웹후크를 테스트하는 데모" />
       </Frame>

    데모를 보려면 [Testing Webhooks in W&amp;B](https://www.youtube.com/watch?v=bl44fDpMGJw\&ab_channel=Weights%26Biases) 영상을 참고하세요.
  </Tab>

  <Tab title="Bash script">
    이 셸 스크립트는 웹후크가 트리거될 때 W&amp;B가 웹후크 자동화로 보내는 요청과 유사한 `POST` 요청을 생성하는 한 가지 방법을 보여줍니다.

    아래 코드를 셸 스크립트에 복사해 붙여넣어 웹후크를 문제 해결하세요. 다음 값은 직접 지정해야 합니다:

    * `ACCESS_TOKEN`
    * `SECRET`
    * `PAYLOAD`
    * `API_ENDPOINT`

    ```bash webhook_test.sh
    #!/bin/bash

    # 액세스 토큰과 시크릿
    ACCESS_TOKEN="your_api_key"
    SECRET="your_api_secret"

    # 전송하려는 데이터(예: JSON 형식)
    PAYLOAD='{"key1": "value1", "key2": "value2"}'

    # HMAC 서명 생성
    # 보안을 위해 wandb는 헤더에 X-Wandb-Signature를 포함하며,
    # 이는 페이로드와 웹후크와 연결된 공유 시크릿 키로부터
    # HMAC-SHA-256 알고리즘을 사용해 계산됩니다.
    SIGNATURE=$(echo -n "$PAYLOAD" | openssl dgst 
    -sha256 -hmac "$SECRET" -binary | base64)

    # cURL 요청 보내기
    curl -X POST \
      -H "Content-Type: application/json" \
      -H "Authorization: Bearer $ACCESS_TOKEN" \
      -H "X-Wandb-Signature: $SIGNATURE" \
      -d "$PAYLOAD" API_ENDPOINT
    ```
  </Tab>
</Tabs>