---
title: W&B Platform をオンプレミスでデプロイする
description: オンプレミス インフラストラクチャー での W&B Server のホスティング
---

import SelfManagedVersionRequirements from "/snippets/en/_includes/self-managed-version-requirements.mdx";
import SelfManagedNetworkingRequirements from "/snippets/en/_includes/self-managed-networking-requirements.mdx";
import SelfManagedSslTlsRequirements from "/snippets/en/_includes/self-managed-ssl-tls-requirements.mdx";
import SelfManagedMysqlRequirements from "/snippets/en/_includes/self-managed-mysql-requirements.mdx";
import SelfManagedMysqlDatabaseCreation from "/snippets/en/_includes/self-managed-mysql-database-creation.mdx";
import SelfManagedRedisRequirements from "/snippets/en/_includes/self-managed-redis-requirements.mdx";
import SelfManagedObjectStorageRequirements from "/snippets/en/_includes/self-managed-object-storage-requirements.mdx";
import SelfManagedHardwareRequirements from "/snippets/en/_includes/self-managed-hardware-requirements.mdx";
import SelfManagedVerifyInstallation from "/snippets/en/_includes/self-managed-verify-installation.mdx";

<Note>
W&B では、[W&B Multi-tenant Cloud](/platform/hosting/hosting-options/multi_tenant_cloud) または [W&B 専用クラウド](/platform/hosting/hosting-options/dedicated_cloud/) デプロイメントタイプのような、フルマネージドなデプロイメントオプションを推奨しています。W&B のフルマネージドサービスは、設定をほとんど、あるいは全く必要とせず、シンプルかつ安全に使用できます。
</Note>

関連するご質問については、W&B セールスチーム（[contact@wandb.com](mailto:contact@wandb.com)）までお問い合わせください。

## インフラストラクチャー ガイドライン

W&B のデプロイを開始する前に、ハードウェアのサイジングに関する推奨事項を含む、完全なインフラストラクチャー要件について [リファレンスアーキテクチャー](/platform/hosting/self-managed/ref-arch/#infrastructure-requirements) を参照してください。

### バージョン要件
<SelfManagedVersionRequirements/>

### ハードウェア要件

<SelfManagedHardwareRequirements/>

## MySQL データベース

<SelfManagedMysqlRequirements/>

MySQL のバージョン要件については、上記の [バージョン要件](#version-requirements) セクションを参照してください。

セルフマネージドインスタンス向けの MySQL 設定パラメータについては、[リファレンスアーキテクチャーの MySQL 設定セクション](/platform/hosting/self-managed/ref-arch/#mysql-configuration-parameters) を参照してください。

### データベースの作成

<SelfManagedMysqlDatabaseCreation/>

<Note>
SSL/TLS 証明書の要件については、以下の [SSL/TLS セクション](#ssl-tls) を参照してください。
</Note>

## Redis

<SelfManagedRedisRequirements/>

## オブジェクトストレージ

<SelfManagedObjectStorageRequirements/>

### セルフホスト型オブジェクトストレージの設定

オブジェクトストアは、署名付き URL をサポートしている Amazon S3 互換のオブジェクトストアであれば、外部でホストすることが可能です。[こちらのスクリプト](https://gist.github.com/vanpelt/2e018f7313dabf7cca15ad66c2dd9c5b) を実行して、お使いのオブジェクトストアが署名付き URL をサポートしているか確認してください。MinIO オープンソースのステータスに関する重要な情報については、以下の [MinIO のセットアップセクション](#minio-setup) を参照してください。

さらに、オブジェクトストアには以下の CORS ポリシーを適用する必要があります。

``` xml
<?xml version="1.0" encoding="UTF-8"?>
<CORSConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/">
<CORSRule>
    <AllowedOrigin>http://YOUR-W&B-SERVER-IP</AllowedOrigin>
    <AllowedMethod>GET</AllowedMethod>
    <AllowedMethod>PUT</AllowedMethod>
    <AllowedMethod>HEAD</AllowedMethod>
    <AllowedHeader>*</AllowedHeader>
</CORSRule>
</CORSConfiguration>
```

オブジェクトストレージの設定は、[システムコンソール](/platform/hosting/iam/sso#system-console) を通じて行うか、W&B カスタムリソース（CR）仕様で直接設定します。

#### AWS S3 の設定

AWS S3 バケットの場合、W&B CR に以下の設定を行います。

```yaml
bucket:
  kmsKey: <kms key arn>  # オプション：暗号化用の KMS キー
  name: <bucket name>    # 例: wandb
  path: ""               # 空の文字列のままにします
  provider: s3
  region: <region>       # 例: us-east-1
```

AWS S3 接続では、デフォルトで TLS が有効になっています。

#### S3 互換ストレージの設定

S3 互換ストレージ（MinIO など）の場合は、以下の設定を使用します。

```yaml
bucket:
  kmsKey: null
  name: <s3 endpoint>    # 例: s3.example.com:9000
  path: <bucket name>    # 例: wandb
  provider: s3
  region: <region>       # 例: us-east-1
```

S3 互換ストレージで TLS を使用するには、バケットパスに `?tls=true` を追加します。

```yaml
bucket:
  kmsKey: null
  name: "s3.example.com:9000"
  path: "wandb?tls=true"
  provider: "s3"
  region: "us-east-1"
```

<Warning>
証明書の要件については、以下の [SSL/TLS セクション](#ssl-tls) を参照してください。証明書は信頼されている必要があります。自己署名証明書には追加の設定が必要です。
</Warning>

独自のオブジェクトストアを運用する際に考慮すべき最も重要な事項は以下の通りです。

1. **ストレージ容量とパフォーマンス**: 磁気ディスクを使用しても問題ありませんが、ディスク容量を監視する必要があります。W&B の平均的な利用では数十から数百 GB の結果となりますが、ヘビーな利用ではペタバイト規模のストレージを消費する可能性があります。
2. **フォールトトレランス（耐障害性）**: 最低限、オブジェクトを保存する物理ディスクは RAID アレイ上に構成する必要があります。S3 互換ストレージを使用する場合は、分散構成や高可用性構成の検討をお勧めします。
3. **可用性**: ストレージが利用可能であることを確認するためのモニタリングを設定する必要があります。

独自のオブジェクトストレージサービスを運用する代わりに、以下のような多くのエンタープライズ向け代替手段があります。

1. [Amazon S3 on Outposts](https://aws.amazon.com/s3/outposts/)
2. [NetApp StorageGRID](https://www.netapp.com/data-storage/storagegrid/)

### MinIO のセットアップ

<Warning>
MinIO オープンソースは [メンテナンスモード](https://github.com/minio/minio) であり、アクティブな開発は行われていません。ビルド済みのバイナリは提供されなくなり、重大なセキュリティ修正のみがケースバイケースで検討されます。プロダクション環境のデプロイメントには、マネージドオブジェクトストレージサービスまたは [MinIO Enterprise (AIStor)](https://min.io/product/aistor) の使用を推奨します。
</Warning>

既存の MinIO デプロイメントまたは MinIO Enterprise を使用している場合は、MinIO クライアントを使用してバケットを作成できます。

```bash
# クライアントの設定
mc config host add local http://$MINIO_HOST:$MINIO_PORT "$MINIO_ACCESS_KEY" "$MINIO_SECRET_KEY" --api s3v4
# バケットの作成
mc mb --region=us-east1 local/local-files
```

新規デプロイの場合は、上記のエンタープライズ向け代替手段、またはマネージドクラウドオブジェクトストレージサービスを検討してください。

## W&B サーバーアプリケーションの Kubernetes へのデプロイ

推奨されるインストールメソッドは、Helm 経由でデプロイされる **W&B Kubernetes Operator** を使用することです。

完全なインストール手順については、[Run W&B Server on Kubernetes (Operator)](/platform/hosting/operator/) を参照してください。以下の内容をカバーしています：
- Helm CLI によるデプロイ
- Helm Terraform モジュールによるデプロイ  
- W&B クラウド Terraform モジュール

以下のセクションでは、オンプレミスやデータセンターでのデプロイメントに特有の考慮事項を説明します。

### OpenShift

W&B はオンプレミス環境の OpenShift Kubernetes クラスターへのデプロイをサポートしています。詳細については [リファレンスアーキテクチャー](/platform/hosting/self-managed/ref-arch/#kubernetes) を、オンプレミスの OpenShift デプロイメントに合わせて調整可能な具体的な設定手順については [Operator ガイドの OpenShift セクション](/platform/hosting/operator/#openshift-kubernetes-clusters) を参照してください。

## ネットワーク

ネットワーク要件、ロードバランサーのオプション、および設定例（nginx を含む）については、[リファレンスアーキテクチャーのネットワーキングセクション](/platform/hosting/self-managed/ref-arch/#networking) を参照してください。

## インストールの確認

<SelfManagedVerifyInstallation/>