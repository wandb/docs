---
title: メトリクスをオフラインで保存し、後で W&B に同期することは可能ですか？
---

デフォルトでは、 `wandb.init` はメトリクスをリアルタイムで クラウド に同期する プロセス を開始します。オフラインで使用する場合は、2つの 環境 変数を設定してオフラインモードを有効にし、後で同期するようにします。

以下の 環境 変数を設定してください：

1. `WANDB_API_KEY=$KEY` ： `$KEY` は [User Settings](https://wandb.ai/settings) で作成された APIキー です。
2. `WANDB_MODE="offline"`

以下は、スクリプト 内でこれを実装する例です：

```python
import wandb
import os

# APIキーを設定
os.environ["WANDB_API_KEY"] = "YOUR_KEY_HERE"
# オフラインモードを有効化
os.environ["WANDB_MODE"] = "offline"

config = {
    "dataset": "CIFAR10",
    "machine": "offline cluster",
    "model": "CNN",
    "learning_rate": 0.01,
    "batch_size": 128,
}

with wandb.init(project="offline-demo") as run:
    for i in range(100):
        # メトリクスをログに記録
        run.log({"accuracy": i})
```

ターミナル の出力例は以下の通りです：

<Frame>
<img src="/images/experiments/sample_terminal_output.png" alt="Offline mode terminal output"/>
</Frame>

作業完了後、以下の コマンド を実行して データ を クラウド に同期します：

```shell
wandb sync wandb/dryrun-folder-name
```

<Frame>
<img src="/images/experiments/sample_terminal_output_cloud.png" alt="Cloud sync terminal output"/>
</Frame>