---
title: 折れ線グラフの概要
description: メトリクス の可視化、軸のカスタマイズ、プロット上での複数ラインの比較
---

デフォルトでは、 `wandb.Run.log()` で記録されたメトリクスに対して折れ線グラフ（Line plots）が表示されます。折れ線グラフをカスタマイズして、複数のラインを比較したり、カスタム軸を計算したり、ラベル名を変更したりすることができます。

<Frame>
    <img src="/images/app_ui/line_plot_example.png" alt="Line plot example"  />
</Frame>

<Tip>
 [CoreWeave](https://coreweave.com) インフラストラクチャー上で実行される [Runs](/models/runs) については、 [CoreWeave Mission Control](https://www.coreweave.com/mission-control) が計算インフラを監視します。エラーが発生した場合、W&B はプロジェクトの Workspace 内の Run のプロットにインフラストラクチャー情報を反映します。詳細は [Visualize CoreWeave infrastructure alerts](/models/runs#visualize-coreweave-infrastructure-alerts) を参照してください。
</Tip>

## 折れ線グラフの設定を編集する

このセクションでは、個別の折れ線グラフパネル、セクション内のすべての折れ線グラフパネル、または Workspace 内のすべての折れ線グラフパネルの設定を編集する方法を説明します。折れ線グラフの設定に関する包括的な詳細は、 [Line plot reference](/models/app/features/panels/line-plot/reference) を参照してください。

### 個別の折れ線グラフ
個別の折れ線グラフの設定は、セクションや Workspace の折れ線グラフ設定よりも優先されます。折れ線グラフをカスタマイズするには：

1. パネルにマウスを合わせ、ギアアイコンをクリックします。
1. 表示されるドロワー内で、タブを選択して設定を編集します。
1. **Apply** をクリックします。

折れ線グラフの設定は以下のタブに分かれています：
* **Data**: X軸、Y軸、サンプリング方法、スムージング、外れ値、チャートタイプを設定します。
* **Grouping**: プロット内で Runs をグループ化および集計するかどうか、およびその方法を設定します。
* **Chart**: パネルと軸のタイトルを指定し、凡例の表示・非表示と位置を設定します。
* **Legend**: パネルの凡例の外観と内容をカスタマイズします。
* **Expressions**: 軸に対してカスタム計算式を追加します。

各設定の詳細については、 [Line plot reference](/models/app/features/panels/line-plot/reference) を参照してください。

### セクション内のすべての折れ線グラフ

セクション内のすべての折れ線グラフのデフォルト設定をカスタマイズし、Workspace の設定を上書きするには：
1. セクションのギアアイコンをクリックして設定を開きます。
1. 表示されるドロワー内で、 **Data** または **Display preferences** タブを選択して、セクションのデフォルト設定を構成します。各 **Data** 設定の詳細については、 [Line plot reference](/models/app/features/panels/line-plot/reference) を参照してください。表示設定の詳細については、 [Configure section layout](../#configure-section-layout) を参照してください。

### Workspace 内のすべての折れ線グラフ
Workspace 内のすべての折れ線グラフのデフォルト設定をカスタマイズするには：
1. **Settings** というラベルの付いたギアアイコンがある Workspace の設定をクリックします。
1. **Line plots** をクリックします。
1. 表示されるドロワー内で、 **Data** または **Display preferences** タブを選択して、 Workspace のデフォルト設定を構成します。
    - 各 **Data** 設定の詳細については、 [Line plot reference](/models/app/features/panels/line-plot/reference) を参照してください。
    - 各 **Display preferences** セクションの詳細については、 [Workspace display preferences](../#configure-workspace-layout) を参照してください。 Workspace レベルでは、折れ線グラフのデフォルトの **Zooming** （ズーム）の振る舞いを設定できます。この設定は、一致する X軸キーを持つ折れ線グラフ間でズームを同期させるかどうかを制御します。デフォルトでは無効になっています。


## プロットで平均値を可視化する

複数の異なる Experiments があり、それらの値の平均をプロットで確認したい場合は、テーブルの Grouping 機能を使用できます。 Run テーブルの上にある "Group" をクリックし、 "All" を選択すると、グラフに平均値が表示されます。

平均化する前のグラフは以下のようになります：

<Frame>
    <img src="/images/app_ui/demo_precision_lines.png" alt="Individual precision lines"  />
</Frame>

次の画像は、グループ化されたラインを使用して、 Runs 全体の平均値を表すグラフを示しています。

<Frame>
    <img src="/images/app_ui/demo_average_precision_lines.png" alt="Averaged precision lines"  />
</Frame>

## プロットで NaN 値を可視化する

`wandb.Run.log()` を使用して、 PyTorch テンソルを含む `NaN` 値を折れ線グラフにプロットすることもできます。例：

```python
with wandb.init() as run:
    # NaN値をログに記録
    run.log({"test": float("nan")})
```

<Frame>
    <img src="/images/app_ui/visualize_nan.png" alt="NaN value handling"  />
</Frame>

## 1つのチャートで複数のメトリクスを比較する

<Frame>
    <img src="/images/app_ui/visualization_add.gif" alt="Adding visualization panels"  />
</Frame>

1. ページの右上隅にある **Add panels** ボタンを選択します。
2. 表示される左パネルから、 Evaluation ドロップダウンを展開します。
3. **Run comparer** を選択します。


## 折れ線グラフの色を変更する

デフォルトの Runs の色が比較に役立たない場合があります。これを解決するために、 wandb では手動で色を変更できる2つの方法を提供しています。

<Tabs>
<Tab title="Runテーブルから">
各 Run には、初期化時にデフォルトでランダムな色が割り当てられます。

  <Frame>
    <img src="/images/app_ui/line_plots_run_table_random_colors.png" alt="Random colors given to runs"  />
</Frame>

  いずれかの色をクリックすると、カラーパレットが表示され、そこから希望の色を手動で選択できます。

  <Frame>
    <img src="/images/app_ui/line_plots_run_table_color_palette.png" alt="The color palette"  />
</Frame>
</Tab>
<Tab title="チャート凡例設定から">
1. 設定を編集したいパネルの上にマウスを置きます。
2. 表示される鉛筆アイコンを選択します。
3. **Legend** タブを選択します。

<Frame>
    <img src="/images/app_ui/plot_style_line_plot_legend.png" alt="Line plot legend settings"  />
</Frame>
</Tab>
</Tabs>

## 異なる X軸で可視化する

実験にかかった絶対時間を確認したい場合や、実験が実行された日付を確認したい場合は、 X軸を切り替えることができます。以下は、ステップから相対時間、そして実時間（wall time）に切り替える例です。

<Frame>
    <img src="/images/app_ui/howto_use_relative_time_or_wall_time.gif" alt="X-axis time options"  />
</Frame>

カスタム X軸を使用するには、 Y軸をログに記録するのと同じ `wandb.Run.log()` の呼び出しでメトリクスを記録します。例：

```python
with wandb.init() as run:
    for i in range(100):
        run.log({"accuracy": acc, "custom_x": i * 10})
```

詳細については、 [Customize log axes](/models/track/log/customize-logging-axes#customize-log-axes) を参照してください。


## ズーム

長方形をクリックしてドラッグすると、垂直方向と水平方向を同時にズームできます。これにより、 X軸と Y軸のズームが変更されます。

<Frame>
    <img src="/images/app_ui/line_plots_zoom.gif" alt="Plot zoom functionality"  />
</Frame>

## チャートの凡例を非表示にする

このシンプルな切り替えスイッチで、折れ線グラフの凡例をオフにできます。

<Frame>
    <img src="/images/app_ui/demo_hide_legend.gif" alt="Hide legend toggle"  />
</Frame>

## Run メトリクス通知を作成する

[Automations](/models/automations/) を使用して、 Run メトリクスが指定した条件を満たしたときにチームに通知します。オートメーションは Slack チャンネルへの投稿や Webhook の実行が可能です。

折れ線グラフから、表示されているメトリクスに対して [run metrics notification](/models/automations/automation-events/#run-events) を素早く作成できます。

1. パネルの上にマウスを置き、ベルのアイコンをクリックします。
1. 基本設定または詳細設定コントロールを使用してオートメーションを構成します。例えば、オートメーションの範囲を制限するために Run フィルターを適用したり、絶対的な閾値を設定したりします。

[Automations](/models/automations/) について詳しくはこちら。