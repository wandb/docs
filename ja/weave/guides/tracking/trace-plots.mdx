---
title: トレースプロットの使用
description: Weave の インタラクティブなグラフ を使用して、トレースレベルの メトリクス を可視化およびデバッグできます。デフォルトのプロットやカスタムプロットを通じて、レイテンシ、コスト、トークン使用量のパターンを探索し、LLM
  アプリケーション のパフォーマンスを最適化しましょう。
---

W&B Weave の _trace plots_ （トレースプロット）ツールを使用すると、インタラクティブなグラフを使用して、トレースレベルのメトリクス（例：レイテンシ、コスト、トークン）を探索、可視化、デバッグできます。デフォルトのトレースプロットを使用することも、カスタムトレースプロットビルダーを介して独自のプロットを作成することも可能です。

<Frame>
![Trace plots の動作](/weave/guides/tracking/imgs/plots-example.png)
</Frame>

## はじめに

1. プロジェクトの **Traces** ページに移動します。
2. （任意） **Filter** を選択して、選択したトレースをフィルタリングします（例：日時やオペレーションによるフィルタリング）。
3. **Traces** ビューの右上隅にある **Show Metrics** アイコンをクリックして、トレースプロットのサイドパネルを開きます。

    ![**Show Metrics** アイコン](/weave/guides/tracking/imgs/plots-show-metrics-icon.png)

    ここから、以下の操作が行えます：
   - [デフォルトのトレースプロット](#default-trace-plots)を表示する。
   - [カスタムトレースプロットを作成する](#create-a-custom-trace-plot)。
4. グラフは、トレースのフィルタリングや選択に基づいて動的に更新されます。

## デフォルトのトレースプロット

トレースプロットパネルを初めて開くと、Weave は利用可能なプロジェクトのトレースデータに基づいて、いくつかのトレースプロットを自動生成します：

- 棒グラフ（時間帯ごとにグループ化されたコストまたはレイテンシ）
- 折れ線グラフ（時系列のレイテンシ）
- 散布図（例：プロンプトトークン vs 完了トークン）

各トレースプロットはインタラクティブです：

- ホバーしてツールチップを表示
- ドラッグしてズーム
- ダブルクリックでリセット
- 散布図のポイントをクリックして特定のトレースを開く

## カスタムトレースプロットを作成する

カスタムトレースプロットを作成することもできます。カスタムトレースプロットを作成するには、以下の手順に従ってください：

1. トレースプロットのサイドパネルから、 **➕ Add Chart** をクリックします。

    ![**➕ Add Chart** ボタン](/weave/guides/tracking/imgs/plots-add-chart.png)

2. ポップアップで、利用可能なトレースプロットタイプから1つ選択します：

    ![利用可能なカスタムトレースプロットタイプ](/weave/guides/tracking/imgs/plots-custom-chart-types.png)
    
3. 選択したトレースプロットタイプに合わせて、トレースプロットの設定を行います。プロットタイプごとの設定オプションについては、[プロットタイプ別のトレースプロット設定](#trace-plot-settings-by-plot-type)を参照してください。
4. **Save chart** をクリックしてチャートを保存します。

### プロットタイプ別のトレースプロット設定

カスタムトレースプロットを追加または編集する際、選択したトレースプロットタイプによって利用可能な設定オプションが若干異なります。以下の表に、設定可能なオプションの内訳を示します。

| 設定項目 | 散布図 | 折れ線グラフ | 棒グラフ |
| --------------- | -------------------- | -------------------- | -------------------- |
| Y軸 | ✅ 必須 | ✅ 必須 | ✅ 必須 |
| X軸 | ✅ 選択可能 | 固定 (`started at`) | 固定 (`started at`) |
| グループ化 | ✅ 任意 | ✅ 任意 | ✅ 任意 |
| ビニング (Binning) | ❌ 使用不可 | ✅ 使用可能 | ✅ 使用可能 |
| 集計 (Aggregation) | ❌ 使用不可 | ✅ 使用可能 | ✅ 使用可能 |