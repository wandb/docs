---
title: トレース とその他の ログ 情報の比較
description: コード、 トレース、 プロンプト、 Models、 設定 を視覚的に比較し、その差分を確認します
---

Weave の比較機能（Comparison feature）を使用すると、コード、トレース、プロンプト、Models、およびモデル設定（configuration）を視覚的に比較し、その差分（diff）を確認できます。2つのオブジェクトを並べて比較したり、より大きなオブジェクトのセットを分析して、違い、パターン、傾向を特定したりすることが可能です。

このガイドでは、比較を開始する手順と、ベースライン（baseline）比較、数値差分のフォーマットなど、比較ビューをカスタマイズするための利用可能なアクションについて説明します。

## 比較ビューへのアクセス

1. サイドバーで、比較したいオブジェクトのタイプ（**Traces**、**Models** など）を選択します。
2. 比較したいオブジェクトを選択します。選択方法は、比較するオブジェクトのタイプによって異なります：
   - **Traces** の場合、Traces カラムの適切な行にあるチェックボックスをオンにして、比較するトレースを選択します。
   - **Models** などのオブジェクトの場合、モデルの Versions ページに移動し、比較したいバージョン（version）の横にあるチェックボックスをオンにします。
3. **Compare** をクリックして比較ビューを開きます。これで、[利用可能なアクション](#available-actions)を使用してビューを微調整できます。

## 利用可能なアクション

比較ビューでは、比較されているオブジェクトの数に応じて、複数のアクションを利用できます。[使用上の注意](#usage-notes)も併せてご確認ください。

- [差分表示の変更](#change-the-diff-display)
- [並べて表示（Side-by-side）](#display-side-by-side)
- [統合ビューで表示（Unified view）](#display-in-a-unified-view)
- [ベースラインの設定](#set-a-baseline)
- [ベースラインの解除](#remove-a-baseline)
- [比較順序の変更](#change-the-comparison-order)
- [数値差分の表示形式の変更](#change-numeric-diff-display-format)
- [ベースラインまたは前のオブジェクトと比較する](#compare-with-baseline-or-previous)
- [複数オブジェクトの比較からペアを比較する](#compare-a-pair-from-a-multi-object-comparison)
- [比較からオブジェクトを削除する](#remove-an-object-from-comparison)

### 差分表示の変更

デフォルトでは、**Diff only** はオフに設定されています。変更があった行のみを表示するようにテーブル行をフィルタリングするには、**Diff only** をオンに切り替えます。

### 並べて表示（Side-by-side）

このオプションは、2つのオブジェクトを比較している場合、または [複数オブジェクトの比較から特定のペアを選択](#compare-a-pair-from-a-multi-object-comparison) している場合にのみ利用可能です。

各オブジェクトを別々の列に並べて比較するには、**Side-by-side** を選択します。

<Frame>
![2つのオブジェクトの Side-by-side 比較ビュー](/weave/guides/tools/imgs/comparison-2objs-sidebyside.png)
</Frame>

### 統合ビューで表示（Unified view）

このオプションは、2つのオブジェクトを比較している場合、または [複数オブジェクトの比較から特定のペアを選択](#compare-a-pair-from-a-multi-object-comparison) している場合にのみ利用可能です。

各オブジェクトを統合されたビューで比較するには、**Unified** を選択します。

<Frame>
![2つのオブジェクトの Unified 比較ビュー](/weave/guides/tools/imgs/comparison-2objs-unified.png)
</Frame>

### ベースラインの設定

デフォルトでは、比較ビューの各オブジェクトはその左隣のオブジェクトと比較されます。しかし、特定のオブジェクトを _ベースライン（baseline）_ として設定することもできます。これにより、すべてのオブジェクトがビューの最も左にあるオブジェクトと比較されるようになります。
オブジェクトをベースラインとして設定するには、以下の手順に従ってください：

1. 比較ビューのトップバーで、ベースラインに設定したいオブジェクトの上にマウスを置きます。
2. ID の右側にある3つのドットをクリックします。
   ![ベースラインに設定するオプションの表示。](/weave/guides/tools/imgs/comparison-2objs-baseline.png)
3. ドロップダウンで **Make baseline** を選択します。UI が更新され、ベースラインオブジェクトがトップバーの左端に配置され、ID の横に `Baseline` と表示されます。
    ![ベースラインが設定された状態。](/weave/guides/tools/imgs/comparison-2objs-baseline-set.png)

### ベースラインの解除

オブジェクトのベースライン設定を解除するには、以下の手順に従ってください：

1. 比較ビューのトップバーで、ベースラインオブジェクトの上にマウスを置きます。
2. ID の右側にある3つのドットをクリックします。
3. ドロップダウンで **Remove baseline** を選択します。これで、ID の横に `Baseline` が表示されなくなります。

### 比較順序の変更

比較の順序を変更するには、以下の手順に従ってください：

1. 比較ビューのトップバーで、順序を変更したい ID の上にマウスを置きます。
2. ID の左側にある6つのドットをクリックします。
   ![順序の設定。](/weave/guides/tools/imgs/comparison-2objs-reorder.png)
3. 選択したオブジェクトに応じて、ID を左または右にドラッグします。
4. ID を希望の順序に配置します。UI が更新され、変更された比較順序が表示されます。

### 数値差分の表示形式の変更

`completion_tokens` や `total_tokens` などの数値（numeric value）については、差分を整数またはパーセンテージとして表示できます。さらに、正の数値は倍率として表示することも可能です。数値差分の表示形式を変更するには、以下の手順に従ってください：

1. 比較テーブルで、差分の表示形式を更新したい数値を見つけます。
    ![整数として表示された数値。](/weave/guides/tools/imgs/comparison-2objs-numericdiffformat.png)
2. 差分の値（diff value）をクリックします。形式が自動的に整数またはパーセンテージに更新されます。
    ![パーセンテージに更新された数値。](/weave/guides/tools/imgs/comparison-2objs-numericdiffformat-updated.png)

### ベースラインまたは前のオブジェクトと比較する

このオプションは、3つ以上のオブジェクトを比較している場合にのみ利用可能です。また、[ID の右側にある3つのドットをクリックすることで、既存のベースラインを設定](#set-a-baseline) したり [解除](#remove-a-baseline) したりすることもできます。

3つ以上のオブジェクトでベースライン比較を実行するには、以下の手順に従ってください：

1. 比較ビューの右隅にあるドロップダウンをクリックします。現在のビュー設定に応じて、ドロップダウンのタイトルは **Compare with previous** または **Compare with baseline** のいずれかになっています。
2. 現在のビュー設定に応じて、**Compare with previous** または **Compare with baseline** のいずれかを選択します。
   - **Compare with baseline**: 最も左側のオブジェクトをベースラインとして設定します。テーブルが更新され、左端の列がベースラインになります。
   - **Compare with previous**: ベースラインとなるオブジェクトは設定されません（各オブジェクトをその直前のものと比較します）。

### 複数オブジェクトの比較からペアを比較する

このオプションは、3つ以上のオブジェクトを比較している場合にのみ利用可能です。

3つ以上のオブジェクトを比較しているときに、単一のオブジェクトを前のオブジェクトまたはベースラインと比較できます。これにより、比較テーブルの表示が2つのオブジェクトの比較時と同じ形式に変更されます。複数オブジェクトの比較からペアを比較するには、以下の手順に従ってください：

1. 比較ビューのトップバーで、前回のオブジェクトまたはベースラインと比較したい ID を見つけます。
2. そのアイテムを選択するために ID をクリックします。UI が更新され、2方向の比較テーブルが表示されます。
    ![複数オブジェクト比較からのペア比較。](/weave/guides/tools/imgs/comparsion-7objs-diffonly-subset.png)

テーブルに比較対象として最初に選択された6つのオブジェクトが表示されるようにビューをリセットするには、再度 ID をクリックします。

### 比較からオブジェクトを削除する

このオプションは、3つ以上のオブジェクトを比較している場合にのみ利用可能です。

比較からオブジェクトを削除するには、以下の手順に従ってください：

1. 比較ビューのトップバーで、比較から削除したいオブジェクトを見つけます。
2. ID の右側にある3つのドットをクリックします。
3. ドロップダウンで **Remove object from comparison** を選択します。UI が更新され、削除されたオブジェクトを含まない新しいテーブルが表示されます。

## 使用上の注意

 - 比較機能は UI でのみ利用可能です。
 - 好きなだけ多くのオブジェクトを比較できます。ただし、UI に同時に表示されるのは最大6つまでです。6つ以上のオブジェクトを比較しているときに、現在表示されていないオブジェクトを比較テーブルで確認するには、[比較順序を変更](#change-the-comparison-order) してそのオブジェクトを左から6番目以内に移動させるか、表示しやすいように [複数オブジェクトの比較からペアを選択](#compare-a-pair-from-a-multi-object-comparison) してください。