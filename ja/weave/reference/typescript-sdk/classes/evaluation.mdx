---
title: 'Class: Evaluation<R, E, M>'
description: TypeScript SDK リファレンス
---

[weave](../) / Evaluation

一連の scorer と Datasets を含む評価（Evaluation）をセットアップします。

`evaluation.evaluate(model)` を呼び出すと、Datasets の行が Models に渡されます。このとき、Datasets の列名が `model.predict` の引数名と一致するようにマッピングされます。

その後、すべての scorer が呼び出され、その結果が Weave に保存されます。

`Example`

```ts
// 例題を Dataset に集約します
const dataset = new weave.Dataset({
  id: 'my-dataset',
  rows: [
    { question: 'What is the capital of France?', expected: 'Paris' },
    { question: 'Who wrote "To Kill a Mockingbird"?', expected: 'Harper Lee' },
    { question: 'What is the square root of 64?', expected: '8' },
  ],
});

// カスタムのスコアリング関数を定義します
const scoringFunction = weave.op(function isEqual({ modelOutput, datasetRow }) {
  return modelOutput == datasetRow.expected;
});

// 評価対象の関数を定義します
const model = weave.op(async function alwaysParisModel({ question }) {
  return 'Paris';
});

// 評価を開始します
const evaluation = new weave.Evaluation({
  id: 'my-evaluation',
  dataset: dataset,
  scorers: [scoringFunction],
});

const results = await evaluation.evaluate({ model });
```

## Type parameters

| 名前 | 型 |
| :------ | :------ |
| `R` | `DatasetRow` を継承 |
| `E` | `DatasetRow` を継承 |
| `M` | `M` |

## Hierarchy

- [`WeaveObject`](./weaveobject)

  ↳ `Evaluation`

## Table of contents

### Constructors

- [constructor](./evaluation#constructor)

### Properties

- [\_\_savedRef](./evaluation#__savedref)

### Accessors

- [description](./evaluation#description)
- [name](./evaluation#name)

### Methods

- [evaluate](./evaluation#evaluate)
- [predictAndScore](./evaluation#predictandscore)
- [saveAttrs](./evaluation#saveattrs)

## Constructors

### constructor

• **new Evaluation**\<`R`, `E`, `M`\>(`parameters`): [`Evaluation`](./evaluation)\<`R`, `E`, `M`\>

#### Type parameters

| 名前 | 型 |
| :------ | :------ |
| `R` | `DatasetRow` を継承 |
| `E` | `DatasetRow` を継承 |
| `M` | `M` |

#### Parameters

| 名前 | 型 |
| :------ | :------ |
| `parameters` | `EvaluationParameters`\<`R`, `E`, `M`\> |

#### Returns

[`Evaluation`](./evaluation)\<`R`, `E`, `M`\>

#### Overrides

[WeaveObject](./weaveobject).[constructor](./weaveobject#constructor)

#### Defined in

[evaluation.ts:148](https://github.com/wandb/weave/blob/1aee4006a95d913addb45881dfc950de7ce7b0bd/sdks/node/src/evaluation.ts#L148)

## Properties

### \_\_savedRef

• `Optional` **\_\_savedRef**: [`ObjectRef`](./objectref) \| `Promise`\<[`ObjectRef`](./objectref)\>

#### Inherited from

[WeaveObject](./weaveobject).[__savedRef](./weaveobject#__savedref)

#### Defined in

[weaveObject.ts:73](https://github.com/wandb/weave/blob/1aee4006a95d913addb45881dfc950de7ce7b0bd/sdks/node/src/weaveObject.ts#L73)

## Accessors

### description

• `get` **description**(): `undefined` \| `string`

#### Returns

`undefined` \| `string`

#### Inherited from

WeaveObject.description

#### Defined in

[weaveObject.ts:100](https://github.com/wandb/weave/blob/1aee4006a95d913addb45881dfc950de7ce7b0bd/sdks/node/src/weaveObject.ts#L100)

___

### name

• `get` **name**(): `string`

#### Returns

`string`

#### Inherited from

WeaveObject.name

#### Defined in

[weaveObject.ts:96](https://github.com/wandb/weave/blob/1aee4006a95d913addb45881dfc950de7ce7b0bd/sdks/node/src/weaveObject.ts#L96)

## Methods

### evaluate

▸ **evaluate**(`«destructured»`): `Promise`\<`Record`\<`string`, `any`\>\>

#### Parameters

| 名前 | 型 | デフォルト値 |
| :------ | :------ | :------ |
| `«destructured»` | `Object` | `undefined` |
| › `maxConcurrency?` | `number` | `5` |
| › `model` | `WeaveCallable`\<(...`args`: [\{ `datasetRow`: `R`  }]) => `Promise`\<`M`\>\> | `undefined` |
| › `nTrials?` | `number` | `1` |

#### Returns

`Promise`\<`Record`\<`string`, `any`\>\>

#### Defined in

[evaluation.ts:163](https://github.com/wandb/weave/blob/1aee4006a95d913addb45881dfc950de7ce7b0bd/sdks/node/src/evaluation.ts#L163)

___

### predictAndScore

▸ **predictAndScore**(`«destructured»`): `Promise`\<\{ `model_latency`: `number` = modelLatency; `model_output`: `any` = modelOutput; `model_success`: `boolean` = !modelError; `scores`: \{ `[key: string]`: `any`;  }  }\>

#### Parameters

| 名前 | 型 |
| :------ | :------ |
| `«destructured»` | `Object` |
| › `columnMapping?` | `ColumnMapping`\<`R`, `E`\> |
| › `example` | `R` |
| › `model` | `WeaveCallable`\<(...`args`: [\{ `datasetRow`: `E`  }]) => `Promise`\<`M`\>\> |

#### Returns

`Promise`\<\{ `model_latency`: `number` = modelLatency; `model_output`: `any` = modelOutput; `model_success`: `boolean` = !modelError; `scores`: \{ `[key: string]`: `any`;  }  }\>

#### Defined in

[evaluation.ts:231](https://github.com/wandb/weave/blob/1aee4006a95d913addb45881dfc950de7ce7b0bd/sdks/node/src/evaluation.ts#L231)

___

### saveAttrs

▸ **saveAttrs**(): `Object`

#### Returns

`Object`

#### Inherited from

[WeaveObject](./weaveobject).[saveAttrs](./weaveobject#saveattrs)

#### Defined in

[weaveObject.ts:77](https://github.com/wandb/weave/blob/1aee4006a95d913addb45881dfc950de7ce7b0bd/sdks/node/src/weaveObject.ts#L77)