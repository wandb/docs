---
title: 'ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ: LLM ã®å…¥åŠ›ã¨å‡ºåŠ›ã‚’è¿½è·¡ã™ã‚‹'
description: ãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°ã‚’è¿½åŠ ã—ã¦ã€ LLM ã‚¢ãƒ—ãƒªã®ãƒ‡ãƒãƒƒã‚°ã‚’é–‹å§‹ã—ã¾ã—ã‚‡ã†ã€‚
mode: wide
---

import { ColabLink } from '/snippets/en/_includes/colab-link.mdx';
import { GitHubLink } from '/snippets/en/_includes/github-source-link.mdx';
import WeaveQuickstartPrereqs from "/snippets/en/_includes/weave-quickstart-prereqs.mdx";

<div style={{ display: 'flex', gap: '12px', flexWrap: 'wrap' }}>
<ColabLink url="https://colab.research.google.com/github/wandb/docs/blob/main/weave/cookbooks/source/traces-quickstart.ipynb" />
<GitHubLink url="https://github.com/wandb/docs/blob/main/weave/cookbooks/source/traces-quickstart.ipynb" />
</div>

ã‚³ãƒ¼ãƒ‰ã«ãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°ã‚’è¿½åŠ ã—ã¦ã€Weave ã§ LLM ã‚³ãƒ¼ãƒ«ã‚’è¿½è·¡ã™ã‚‹æ–¹æ³•ã‚’å­¦ã³ã¾ã—ã‚‡ã†ã€‚ã“ã®ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆã§ã¯ã€OpenAI ã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ãƒˆãƒ¬ãƒ¼ã‚¹ã—ã€Weave UI ã§çµæœã‚’ç¢ºèªã™ã‚‹æ‰‹é †ã‚’èª¬æ˜ã—ã¾ã™ã€‚

## å­¦ç¿’å†…å®¹ï¼š

ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ä»¥ä¸‹ã®æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ï¼š

* ã‚³ãƒ¼ãƒ‰å†…ã§ã® Weave ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã¨è¨­å®š
* `weave.op` ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ãŸã‚³ãƒ¼ãƒ‰ã®è¿½è·¡
* Weave UI ã§ã® Traces ã®è¡¨ç¤º

<WeaveQuickstartPrereqs/>

## æ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¸ã®ãƒˆãƒ¬ãƒ¼ã‚¹ã®ãƒ­ã‚°è¨˜éŒ²

ã‚³ãƒ¼ãƒ‰ã®è¿½è·¡ã‚’é–‹å§‹ã—ã€Weave ã«ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’ãƒ­ã‚°è¨˜éŒ²ã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®æ‰‹é †ã«å¾“ã„ã¾ã™ã€‚

1. `weave` ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚³ãƒ¼ãƒ‰ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã™ã€‚
2. ã‚³ãƒ¼ãƒ‰å†…ã§ `weave.init('your_wb_team/project_name')` ã‚’å‘¼ã³å‡ºã—ã€ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°æƒ…å ±ã‚’ W&B ã® [Teams](/platform/app/settings-page/teams) ãŠã‚ˆã³ [Projects](/platform/hosting/iam/org_team_struct#project) ã«é€ä¿¡ã—ã¾ã™ã€‚ãƒãƒ¼ãƒ ã‚’è¨­å®šã—ãªã„å ´åˆã€ãƒˆãƒ¬ãƒ¼ã‚¹ã¯ [ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ¼ãƒ ](/platform/app/settings-page/user-settings/#default-team) ã«é€ä¿¡ã•ã‚Œã¾ã™ã€‚æŒ‡å®šã—ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒãƒãƒ¼ãƒ å†…ã«å­˜åœ¨ã—ãªã„å ´åˆã€Weave ãŒè‡ªå‹•çš„ã«ä½œæˆã—ã¾ã™ã€‚
3. è¿½è·¡ã—ãŸã„ç‰¹å®šã®é–¢æ•°ã« [`@weave.op()` ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿](/weave/guides/tracking/ops) ã‚’è¿½åŠ ã—ã¾ã™ã€‚Weave ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ LLM ã¸ã®ã‚³ãƒ¼ãƒ«ã‚’è‡ªå‹•çš„ã«è¿½è·¡ã—ã¾ã™ãŒã€Weave ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã§ã€ç‰¹å®šã®é–¢æ•°ã®å…¥åŠ›ã€å‡ºåŠ›ã€ãŠã‚ˆã³ã‚³ãƒ¼ãƒ‰ã‚’è¿½è·¡ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚TypeScript ã§ã¯ã€`weave.op(your_function)` ã¨ã„ã†æ§‹æ–‡ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

ä»¥ä¸‹ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯ã€OpenAI ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ï¼ˆ[OpenAI APIã‚­ãƒ¼](https://platform.openai.com/docs/quickstart/step-2-setup-your-api-key) ãŒå¿…è¦ï¼‰ã€Weave ãŒãã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°æƒ…å ±ã‚’è¨˜éŒ²ã—ã¾ã™ã€‚ã“ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§ã¯ã€OpenAI ãƒ¢ãƒ‡ãƒ«ã«å¯¾ã—ã¦å…¥åŠ›ã‹ã‚‰æç«œã®åå‰ã‚’æŠ½å‡ºã—ã€ãã‚Œãã‚Œã®æç«œã®é£Ÿæ€§ï¼ˆè‰é£Ÿã‹è‚‰é£Ÿã‹ï¼‰ã‚’ç‰¹å®šã™ã‚‹ã‚ˆã†ã«æŒ‡ç¤ºã—ã¾ã™ã€‚

ä»¥ä¸‹ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã€Weave ã§æœ€åˆã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿½è·¡ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

<Tabs>
  <Tab title="Python">
    ```python lines {1-2,7-8,27-28}
    # Weaveãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã™
    import weave
    from openai import OpenAI

    client = OpenAI()

    # Weaveã¯ã“ã®é–¢æ•°ã®å…¥åŠ›ã€å‡ºåŠ›ã€ãŠã‚ˆã³ã‚³ãƒ¼ãƒ‰ã‚’è‡ªå‹•çš„ã«è¿½è·¡ã—ã¾ã™
    @weave.op()
    def extract_dinos(sentence: str) -> dict:
        response = client.chat.completions.create(
            model="gpt-4o",
            messages=[
                {
                    "role": "system",
                    "content": """In JSON format extract a list of `dinosaurs`, with their `name`,
    their `common_name`, and whether its `diet` is a herbivore or carnivore"""
                },
                {
                    "role": "user",
                    "content": sentence
                }
                ],
                response_format={ "type": "json_object" }
            )
        return response.choices[0].message.content

    # Weaveã‚’åˆæœŸåŒ–ã—ã€ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ­ã‚°è¨˜éŒ²ã™ã‚‹ãƒãƒ¼ãƒ ã¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’è¨­å®šã—ã¾ã™
    weave.init('your-team/traces-quickstart')

    sentence = """I watched as a Tyrannosaurus rex (T. rex) chased after a Triceratops (Trike), \
    both carnivore and herbivore locked in an ancient dance. Meanwhile, a gentle giant \
    Brachiosaurus (Brachi) calmly munched on treetops, blissfully unaware of the chaos below."""

    result = extract_dinos(sentence)
    print(result)
    ```
  </Tab>
  <Tab title="TypeScript">
    ```typescript lines {1-2,7-8,20,24-25}
    // Weaveãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã™
    import * as weave from 'weave';
    import OpenAI from 'openai';
    
    const openai = new OpenAI();

    // Weaveã¯ã“ã®é–¢æ•°ã®å…¥åŠ›ã€å‡ºåŠ›ã€ãŠã‚ˆã³ã‚³ãƒ¼ãƒ‰ã‚’è‡ªå‹•çš„ã«è¿½è·¡ã—ã¾ã™  
    async function extractDinos(input: string) {
      const response = await openai.chat.completions.create({
        model: 'gpt-4o',
        messages: [
          {
            role: 'user',
            content: `In JSON format extract a list of 'dinosaurs', with their 'name', their 'common_name', and whether its 'diet' is a herbivore or carnivore: ${input}`,
          },
        ],
      });
      return response.choices[0].message.content;
    }
    const extractDinosOp = weave.op(extractDinos);

    async function main() {

      // Weaveã‚’åˆæœŸåŒ–ã—ã€ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ­ã‚°è¨˜éŒ²ã™ã‚‹ãƒãƒ¼ãƒ ã¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’è¨­å®šã—ã¾ã™
      await weave.init('your-team/traces-quickstart');

      const result = await extractDinosOp(
        'I watched as a Tyrannosaurus rex (T. rex) chased after a Triceratops (Trike), both carnivore and herbivore locked in an ancient dance. Meanwhile, a gentle giant Brachiosaurus (Brachi) calmly munched on treetops, blissfully unaware of the chaos below.'
      );
      console.log(result);
    }

    main();

    ```
  </Tab>
</Tabs>

`extract_dinos` é–¢æ•°ã‚’å‘¼ã³å‡ºã™ã¨ã€Weave ã¯ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã®ãƒªãƒ³ã‚¯ã‚’å‡ºåŠ›ã—ã¾ã™ã€‚å‡ºåŠ›ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```shell
weave:  $ pip install weave --upgrade
weave: Logged in as Weights & Biases user: example-username.
weave: View Weave data at https://wandb.ai/your-team/traces-quickstart/weave
weave: ğŸ© https://wandb.ai/your-team/traces-quickstart/r/call/019ae171-7f32-7c96-8b42-931a32f900b7
{
  "dinosaurs": [
    {
      "name": "Tyrannosaurus rex",
      "common_name": "T. rex",
      "diet": "carnivore"
    },
    {
      "name": "Triceratops",
      "common_name": "Trike",
      "diet": "herbivore"
    },
    {
      "name": "Brachiosaurus",
      "common_name": "Brachi",
      "diet": "herbivore"
    }
  ]
}
```

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã§ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒˆãƒ¬ãƒ¼ã‚¹ç¢ºèª

ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã®ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã‹ã€ãƒ–ãƒ©ã‚¦ã‚¶ã«è²¼ã‚Šä»˜ã‘ã¦ Weave UI ã‚’é–‹ãã¾ã™ã€‚Weave UI ã® **Traces** ãƒ‘ãƒãƒ«ã§ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€å…¥åŠ›ã€å‡ºåŠ›ã€ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ã€ãƒˆãƒ¼ã‚¯ãƒ³ä½¿ç”¨é‡ãªã©ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºèªã§ãã¾ã™ã€‚

![Weave Trace Outputs 1](/images/tutorial_trace_1.png)

## Traces ã«ã¤ã„ã¦ã®è©³ç´°

- [é–¢æ•°ã®ãƒ‡ã‚³ãƒ¬ãƒ¼ãƒˆã¨å‘¼ã³å‡ºã—æƒ…å ±ã®å–å¾—æ–¹æ³•](/weave/guides/tracking/tracing) ã«ã¤ã„ã¦è©³ã—ãå­¦ã¶ã€‚
- [Playground](/weave/guides/tools/playground) ã‚’è©¦ã—ã¦ã€ãƒ­ã‚°è¨˜éŒ²ã•ã‚ŒãŸãƒˆãƒ¬ãƒ¼ã‚¹ã§ç•°ãªã‚‹ãƒ¢ãƒ‡ãƒ«ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã€‚
- [ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ¢ç´¢ã™ã‚‹](/weave/guides/integrations/)ã€‚Weave ã¯ã€OpenAIã€Anthropicã€ãã®ä»–å¤šãã® LLM ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¸ã®ã‚³ãƒ¼ãƒ«ã‚’è‡ªå‹•çš„ã«è¿½è·¡ã—ã¾ã™ã€‚ãŠä½¿ã„ã® LLM ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒç¾åœ¨ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã«å«ã¾ã‚Œã¦ã„ãªã„å ´åˆã§ã‚‚ã€`@weave.op()` ã§ãƒ©ãƒƒãƒ—ã™ã‚‹ã“ã¨ã§ã€ä»–ã® LLM ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚„ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¸ã®ã‚³ãƒ¼ãƒ«ã‚’ç°¡å˜ã«è¿½è·¡ã§ãã¾ã™ã€‚

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

[ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è©•ä¾¡ã‚’é–‹å§‹ã™ã‚‹](/weave/tutorial-eval) æ–¹æ³•ã‚’ç¢ºèªã—ã€æ¬¡ã« [RAG ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è©•ä¾¡ã™ã‚‹](/weave/tutorial-rag) æ–¹æ³•ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚